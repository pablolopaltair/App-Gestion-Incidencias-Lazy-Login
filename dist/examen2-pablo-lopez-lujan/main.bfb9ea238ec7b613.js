"use strict";(self.webpackChunkexamen2_pabloLopezLujan=self.webpackChunkexamen2_pabloLopezLujan||[]).push([[179],{2011:(ct,Te,k)=>{k.d(Te,{Dh:()=>ce,GT:()=>pe,cc:()=>Me,hO:()=>Ue,on:()=>G,pX:()=>oe,xv:()=>ge});var l=k(4650),B=k(9260),O=k(2122);ct=k.hmd(ct);const ne=["ngOnDestroy"],oe=(fe,Qe,Ke,Ne={})=>new Proxy(fe,{get:(Se,Ee)=>Ke.runOutsideAngular(()=>{var Ge;if(fe[Ee])return!(null===(Ge=Ne?.spy)||void 0===Ge)&&Ge.get&&Ne.spy.get(Ee,fe[Ee]),fe[Ee];if(ne.indexOf(Ee)>-1)return()=>{};const te=Qe.toPromise().then(ae=>{const me=ae&&ae[Ee];return"function"==typeof me?me.bind(ae):me&&me.then?me.then(K=>Ke.run(()=>K)):Ke.run(()=>me)});return new Proxy(()=>{},{get:(ae,me)=>te[me],apply:(ae,me,K)=>te.then(Q=>{var le;const ie=Q&&Q(...K);return!(null===(le=Ne?.spy)||void 0===le)&&le.apply&&Ne.spy.apply(Ee,K,ie),ie})})})}),pe=(fe,Qe)=>{Qe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Ne=>{Object.defineProperty(fe.prototype,Ne,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Ne))})})};class he{constructor(Qe){return Qe}}const ce=new l.OlP("angularfire2.app.options"),ge=new l.OlP("angularfire2.app.name");function G(fe,Qe,Ke){const Se="object"==typeof Ke&&Ke||{};Se.name=Se.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const Ge=B.Z.apps.filter(te=>te&&te.name===Se.name)[0]||Qe.runOutsideAngular(()=>B.Z.initializeApp(fe,Se));try{JSON.stringify(fe)!==JSON.stringify(Ge.options)&&j("error",`${Ge.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(Ge)}const j=(fe,...Qe)=>{(0,l.X6Q)()&&typeof console<"u"&&console[fe](...Qe)},Y={provide:he,useFactory:G,deps:[ce,l.R0b,[new l.FiY,ge]]};let Ue=(()=>{class fe{constructor(Ke){B.Z.registerVersion("angularfire",O.q4.full,"core"),B.Z.registerVersion("angularfire",O.q4.full,"app-compat"),B.Z.registerVersion("angular",l.q4F.full,Ke.toString())}static initializeApp(Ke,Ne){return{ngModule:fe,providers:[{provide:ce,useValue:Ke},{provide:ge,useValue:Ne}]}}}return fe.\u0275fac=function(Ke){return new(Ke||fe)(l.LFG(l.Lbi))},fe.\u0275mod=l.oAB({type:fe}),fe.\u0275inj=l.cJS({providers:[Y]}),fe})();function Me(fe,Qe,Ke,Ne,Se){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===fe)||[];if(Ee)return function be(fe,Qe){try{return fe.toString()===Qe.toString()}catch{return fe===Qe}}(Se,Ge)||(ve("error",`${Qe} was already initialized on the ${Ke} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Se,was:Ge})),Ee;{const te=Ne();return globalThis.\u0275AngularfireInstanceCache.push([fe,te,Se]),te}}const et=!!ct.hot,ve=(fe,...Qe)=>{(0,l.X6Q)()&&typeof console<"u"&&console[fe](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ct,Te,k)=>{k.d(Te,{q4:()=>Tc,iC:()=>Vn,HU:()=>Hs,vb:()=>js,JM:()=>No,u3:()=>ui});var l=k(4650),B=k(259),O=k(5861),ne=k(9681),oe=k(2090),pe=k(4859),he=k(1877),ce=k(8766);const ge="@firebase/installations",G="0.6.0",Y=`w:${G}`,Ue="FIS_v2",Qe=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(b){return b instanceof oe.ZR&&b.code.includes("request-failed")}function Ne({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Se(b){return{token:b.token,requestStatus:2,expiresIn:Q(b.expiresIn),creationTime:Date.now()}}function Ee(b,C){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(b,C){const U=(yield C.json()).error;return Qe.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function te({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ae(b,{refreshToken:C}){const x=te(b);return x.append("Authorization",function le(b){return`${Ue} ${b}`}(C)),x}function me(b){return K.apply(this,arguments)}function K(){return(K=(0,O.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function Q(b){return Number(b.replace("s","000"))}function ie(b,C){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const U=Ne(b),W=te(b),re=C.getImmediate({optional:!0});if(re){const ft=yield re.getHeartbeatsHeader();ft&&W.append("x-firebase-client",ft)}const ze={method:"POST",headers:W,body:JSON.stringify({fid:x,authVersion:Ue,appId:b.appId,sdkVersion:Y})},ot=yield me(()=>fetch(U,ze));if(ot.ok){const ft=yield ot.json();return{fid:ft.fid||x,registrationStatus:2,refreshToken:ft.refreshToken,authToken:Se(ft.authToken)}}throw yield Ee("Create Installation",ot)})).apply(this,arguments)}function Le(b){return new Promise(C=>{setTimeout(C,b)})}const en=/^[cdef][\w-]{21}$/;function qe(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function dn(b){return function lt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return en.test(x)?x:""}catch{return""}}function En(b){return`${b.appName}!${b.appId}`}const Qt=new Map;function Jt(b,C){const x=En(b);br(x,C),function Ei(b,C){const x=function Fn(){return!Pr&&"BroadcastChannel"in self&&(Pr=new BroadcastChannel("[Firebase] FID Change"),Pr.onmessage=b=>{br(b.data.key,b.data.fid)}),Pr}();x&&x.postMessage({key:b,fid:C}),function Bi(){0===Qt.size&&Pr&&(Pr.close(),Pr=null)}()}(x,C)}function br(b,C){const x=Qt.get(b);if(x)for(const U of x)U(C)}let Pr=null;const qn="firebase-installations-store";let fi=null;function ji(){return fi||(fi=(0,ce.X3)("firebase-installations-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(qn)}})),fi}function Ye(b,C){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(b,C){const x=En(b),W=(yield ji()).transaction(qn,"readwrite"),re=W.objectStore(qn),_e=yield re.get(x);return yield re.put(C,x),yield W.done,(!_e||_e.fid!==C.fid)&&Jt(b,C.fid),C})).apply(this,arguments)}function Zn(b){return wn.apply(this,arguments)}function wn(){return(wn=(0,O.Z)(function*(b){const C=En(b),U=(yield ji()).transaction(qn,"readwrite");yield U.objectStore(qn).delete(C),yield U.done})).apply(this,arguments)}function pr(b,C){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(b,C){const x=En(b),W=(yield ji()).transaction(qn,"readwrite"),re=W.objectStore(qn),_e=yield re.get(x),ze=C(_e);return void 0===ze?yield re.delete(x):yield re.put(ze,x),yield W.done,ze&&(!_e||_e.fid!==ze.fid)&&Jt(b,ze.fid),ze})).apply(this,arguments)}function bn(b){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(b){let C;const x=yield pr(b.appConfig,U=>{const W=yn(U),re=dt(b,W);return C=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function yn(b){return bt(b||{fid:qe(),registrationStatus:0})}function dt(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},U=function ht(b,C){return Ct.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:U}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Br(b)}:{installationEntry:C}}function Ct(){return(Ct=(0,O.Z)(function*(b,C){try{const x=yield ie(b,C);return Ye(b.appConfig,x)}catch(x){throw Ke(x)&&409===x.customData.serverCode?yield Zn(b.appConfig):yield Ye(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Br(b){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(b){let C=yield Dr(b.appConfig);for(;1===C.registrationStatus;)yield Le(100),C=yield Dr(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield bn(b);return U||x}return C})).apply(this,arguments)}function Dr(b){return pr(b,C=>{if(!C)throw Qe.create("installation-not-found");return bt(C)})}function bt(b){return function Fr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Mt(b,C){return ti.apply(this,arguments)}function ti(){return(ti=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const U=zt(b,x),W=ae(b,x),re=C.getImmediate({optional:!0});if(re){const ft=yield re.getHeartbeatsHeader();ft&&W.append("x-firebase-client",ft)}const ze={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Y,appId:b.appId}})},ot=yield me(()=>fetch(U,ze));if(ot.ok)return Se(yield ot.json());throw yield Ee("Generate Auth Token",ot)})).apply(this,arguments)}function zt(b,{fid:C}){return`${Ne(b)}/${C}/authTokens:generate`}function ar(b){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(b,C=!1){let x;const U=yield pr(b.appConfig,re=>{if(!Kt(re))throw Qe.create("not-registered");const _e=re.authToken;if(!C&&H(_e))return re;if(1===_e.requestStatus)return x=Je(b,C),re;{if(!navigator.onLine)throw Qe.create("app-offline");const ze=z(re);return x=_t(b,ze),ze}});return x?yield x:U.authToken})).apply(this,arguments)}function Je(b,C){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(b,C){let x=yield Xe(b.appConfig);for(;1===x.authToken.requestStatus;)yield Le(100),x=yield Xe(b.appConfig);const U=x.authToken;return 0===U.requestStatus?ar(b,C):U})).apply(this,arguments)}function Xe(b){return pr(b,C=>{if(!Kt(C))throw Qe.create("not-registered");return function V(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function _t(b,C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,O.Z)(function*(b,C){try{const x=yield Mt(b,C),U=Object.assign(Object.assign({},C),{authToken:x});return yield Ye(b.appConfig,U),x}catch(x){if(!Ke(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ye(b.appConfig,U)}else yield Zn(b.appConfig);throw x}})).apply(this,arguments)}function Kt(b){return void 0!==b&&2===b.registrationStatus}function H(b){return 2===b.requestStatus&&!function $(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function z(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function L(){return(L=(0,O.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:U}=yield bn(C);return U?U.catch(console.error):ar(C).catch(console.error),x.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,O.Z)(function*(b,C=!1){const x=b;return yield tt(x),(yield ar(x,C)).token})).apply(this,arguments)}function tt(b){return ut.apply(this,arguments)}function ut(){return(ut=(0,O.Z)(function*(b){const{registrationPromise:C}=yield bn(b);C&&(yield C)})).apply(this,arguments)}function Ts(b){return Qe.create("missing-app-config-values",{valueName:b})}const no="installations",As=b=>{const C=b.getProvider("app").getImmediate(),x=function Cn(b){if(!b||!b.options)throw Ts("App Configuration");if(!b.name)throw Ts("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw Ts(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ne._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ss=b=>{const C=b.getProvider("app").getImmediate(),x=(0,ne._getProvider)(C,no).getImmediate();return{getId:()=>function M(b){return L.apply(this,arguments)}(x),getToken:W=>function X(b){return Oe.apply(this,arguments)}(x,W)}};(function Za(){(0,ne._registerComponent)(new pe.wA(no,As,"PUBLIC")),(0,ne._registerComponent)(new pe.wA("installations-internal",Ss,"PRIVATE"))})(),(0,ne.registerVersion)(ge,G),(0,ne.registerVersion)(ge,G,"esm2017");const Gi="@firebase/remote-config",Wn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ac{constructor(C,x,U,W){this.client=C,this.storage=x,this.storageCache=U,this.logger=W}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,W=U<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var x=this;return(0,O.Z)(function*(){const[U,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(C.cacheMaxAgeMillis,U))return W;C.eTag=W&&W.eTag;const re=yield x.client.fetch(C),_e=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&_e.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(_e),re})()}}function Yo(b=navigator){return b.languages&&b.languages[0]||b.language}class Ns{constructor(C,x,U,W,re,_e){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=U,this.projectId=W,this.apiKey=re,this.appId=_e}fetch(C){var x=this;return(0,O.Z)(function*(){const[U,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ot={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:W,app_id:x.appId,language_code:Yo()},ft={method:"POST",headers:ze,body:JSON.stringify(ot)},Nt=fetch(_e,ft),wt=new Promise((yr,qr)=>{C.signal.addEventListener(()=>{const Sh=new Error("The operation was aborted.");Sh.name="AbortError",qr(Sh)})});let wr;try{yield Promise.race([Nt,wt]),wr=yield Nt}catch(yr){let qr="fetch-client-network";throw"AbortError"===yr?.name&&(qr="fetch-timeout"),Wn.create(qr,{originalErrorMessage:yr?.message})}let rr=wr.status;const zs=wr.headers.get("ETag")||void 0;let Ot,Sr;if(200===wr.status){let yr;try{yr=yield wr.json()}catch(qr){throw Wn.create("fetch-client-parse",{originalErrorMessage:qr?.message})}Ot=yr.entries,Sr=yr.state}if("INSTANCE_STATE_UNSPECIFIED"===Sr?rr=500:"NO_CHANGE"===Sr?rr=304:("NO_TEMPLATE"===Sr||"EMPTY_CONFIG"===Sr)&&(Ot={}),304!==rr&&200!==rr)throw Wn.create("fetch-status",{httpStatus:rr});return{status:rr,eTag:zs,config:Ot}})()}}class Zi{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,U)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:U}){var W=this;return(0,O.Z)(function*(){yield function ii(b,C){return new Promise((x,U)=>{const W=Math.max(C-Date.now(),0),re=setTimeout(x,W);b.addEventListener(()=>{clearTimeout(re),U(Wn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const re=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),re}catch(re){if(!function xp(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const _e={throttleEndTimeMillis:Date.now()+(0,oe.$s)(U),backoffCount:U+1};return yield W.storage.setThrottleMetadata(_e),W.attemptFetch(C,_e)}})()}}class Rp{constructor(C,x,U,W,re){this.app=C,this._client=x,this._storageCache=U,this._storage=W,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(b,C){const x=b.target.error||void 0;return Wn.create(C,{originalErrorMessage:x&&x?.message})}const io="app_namespace_store";class Tl{constructor(C,x,U,W=function Op(){return new Promise((b,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{C(Qo(U,"storage-open"))},x.onsuccess=U=>{b(U.target.result)},x.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(io,{keyPath:"compositeKey"})}}catch(x){C(Wn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=U,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const U=yield x.openDbPromise;return new Promise((W,re)=>{const ze=U.transaction([io],"readonly").objectStore(io),ot=x.createCompositeKey(C);try{const ft=ze.get(ot);ft.onerror=Nt=>{re(Qo(Nt,"storage-get"))},ft.onsuccess=Nt=>{const wt=Nt.target.result;W(wt?wt.value:void 0)}}catch(ft){re(Wn.create("storage-get",{originalErrorMessage:ft?.message}))}})})()}set(C,x){var U=this;return(0,O.Z)(function*(){const W=yield U.openDbPromise;return new Promise((re,_e)=>{const ot=W.transaction([io],"readwrite").objectStore(io),ft=U.createCompositeKey(C);try{const Nt=ot.put({compositeKey:ft,value:x});Nt.onerror=wt=>{_e(Qo(wt,"storage-set"))},Nt.onsuccess=()=>{re()}}catch(Nt){_e(Wn.create("storage-set",{originalErrorMessage:Nt?.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const U=yield x.openDbPromise;return new Promise((W,re)=>{const ze=U.transaction([io],"readwrite").objectStore(io),ot=x.createCompositeKey(C);try{const ft=ze.delete(ot);ft.onerror=Nt=>{re(Qo(Nt,"storage-delete"))},ft.onsuccess=()=>{W()}}catch(ft){re(Wn.create("storage-delete",{originalErrorMessage:ft?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class so{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),U=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),re=yield x;re&&(C.lastFetchStatus=re);const _e=yield U;_e&&(C.lastSuccessfulFetchTimestampMillis=_e);const ze=yield W;ze&&(C.activeConfig=ze)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function uy(){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Al(){(0,ne._registerComponent)(new pe.wA("remote-config",function b(C,{instanceIdentifier:x}){const U=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Wn.create("registration-window");if(!(0,oe.hl)())throw Wn.create("indexed-db-unavailable");const{projectId:re,apiKey:_e,appId:ze}=U.options;if(!re)throw Wn.create("registration-project-id");if(!_e)throw Wn.create("registration-api-key");if(!ze)throw Wn.create("registration-app-id");const ot=new Tl(ze,U.name,x=x||"firebase"),ft=new so(ot),Nt=new he.Yd(Gi);Nt.logLevel=he.in.ERROR;const wt=new Ns(W,ne.SDK_VERSION,x,re,_e,ze),wr=new Zi(wt,ot),rr=new ac(wr,ot,ft,Nt),zs=new Rp(U,rr,ft,ot,Nt);return function On(b){const C=(0,oe.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(zs),zs},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Gi,"0.4.0"),(0,ne.registerVersion)(Gi,"0.4.0","esm2017")}();const _r="/firebase-messaging-sw.js",ao="/firebase-cloud-messaging-push-scope",us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wa="google.c.a.c_id",uc="google.c.a.c_l",Ml="google.c.a.ts",uo="google.c.a.e";var si=(()=>{return(b=si||(si={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",si;var b})();function zi(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),W=new Uint8Array(U.length);for(let re=0;re<U.length;++re)W[re]=U.charCodeAt(re);return W}const Os="fcm_token_details_db",co="fcm_token_object_Store";function kp(b){return cc.apply(this,arguments)}function cc(){return cc=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Os))return null;let C=null;return(yield(0,ce.X3)(Os,5,{upgrade:(U=(0,O.Z)(function*(W,re,_e,ze){var ot;if(re<2||!W.objectStoreNames.contains(co))return;const ft=ze.objectStore(co),Nt=yield ft.index("fcmSenderId").get(b);if(yield ft.clear(),Nt)if(2===re){const wt=Nt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;C={token:wt.fcmToken,createTime:null!==(ot=wt.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:zi(wt.vapidKey)}}}else if(3===re){const wt=Nt;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:zi(wt.auth),p256dh:zi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:zi(wt.vapidKey)}}}else if(4===re){const wt=Nt;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:zi(wt.auth),p256dh:zi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:zi(wt.vapidKey)}}}}),function(re,_e,ze,ot){return U.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Os),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),Ln(C)?C:null;var U}),cc.apply(this,arguments)}function Ln(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const gi="firebase-messaging-store";let gr=null;function Ka(){return gr||(gr=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(gi)}})),gr}function lo(b){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(b){const C=oi(b),U=yield(yield Ka()).transaction(gi).objectStore(gi).get(C);if(U)return U;{const W=yield kp(b.appConfig.senderId);if(W)return yield tn(b,W),W}})).apply(this,arguments)}function tn(b,C){return lc.apply(this,arguments)}function lc(){return(lc=(0,O.Z)(function*(b,C){const x=oi(b),W=(yield Ka()).transaction(gi,"readwrite");return yield W.objectStore(gi).put(C,x),yield W.done,C})).apply(this,arguments)}function cs(b){return dc.apply(this,arguments)}function dc(){return(dc=(0,O.Z)(function*(b){const C=oi(b),U=(yield Ka()).transaction(gi,"readwrite");yield U.objectStore(gi).delete(C),yield U.done})).apply(this,arguments)}function oi({appConfig:b}){return b.appId}const Un=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function St(b,C){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(b,C){const x=yield na(b),U=Ae(C),W={method:"POST",headers:x,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(Ps(b.appConfig),W)).json()}catch(_e){throw Un.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(re.error)throw Un.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw Un.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Fp(b,C){return ea.apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(b,C){const x=yield na(b),U=Ae(C.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(`${Ps(b.appConfig)}/${C.token}`,W)).json()}catch(_e){throw Un.create("token-update-failed",{errorInfo:_e?.toString()})}if(re.error)throw Un.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw Un.create("token-update-no-token");return re.token})).apply(this,arguments)}function Nl(b,C){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(b,C){const U={method:"DELETE",headers:yield na(b)};try{const re=yield(yield fetch(`${Ps(b.appConfig)}/${C}`,U)).json();if(re.error)throw Un.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(W){throw Un.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Ps({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function na(b){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ae({p256dh:b,auth:C,endpoint:x,vapidKey:U}){const W={web:{endpoint:x,auth:C,p256dh:b}};return U!==us&&(W.web.applicationPubKey=U),W}const qt=6048e5;function fh(b){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(b){const C=yield ph(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:zi(C.getKey("auth")),p256dh:zi(C.getKey("p256dh"))},U=yield lo(b.firebaseDependencies);if(U){if(Lp(U.subscriptionOptions,x))return Date.now()>=U.createTime+qt?Ya(b,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield Nl(b.firebaseDependencies,U.token)}catch(W){console.warn(W)}return Qa(b.firebaseDependencies,x)}return Qa(b.firebaseDependencies,x)})).apply(this,arguments)}function er(b){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(b){const C=yield lo(b.firebaseDependencies);C&&(yield Nl(b.firebaseDependencies,C.token),yield cs(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ya(b,C){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(b,C){try{const x=yield Fp(b.firebaseDependencies,C),U=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield tn(b.firebaseDependencies,U),x}catch(x){throw yield er(b),x}})).apply(this,arguments)}function Qa(b,C){return go.apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(b,C){const U={token:yield St(b,C),createTime:Date.now(),subscriptionOptions:C};return yield tn(b,U),U.token})).apply(this,arguments)}function ph(b,C){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Hr(C)})})).apply(this,arguments)}function Lp(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function ks(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function tr(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const U=C.notification.body;U&&(b.notification.body=U);const W=C.notification.image;W&&(b.notification.image=W);const re=C.notification.icon;re&&(b.notification.icon=re)}(C,b),function Ci(b,C){!C.data||(b.data=C.data)}(C,b),function ia(b,C){var x,U,W,re,_e;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const ze=null!==(W=null===(U=C.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==W?W:null===(re=C.notification)||void 0===re?void 0:re.click_action;ze&&(b.fcmOptions.link=ze);const ot=null===(_e=C.fcmOptions)||void 0===_e?void 0:_e.analytics_label;ot&&(b.fcmOptions.analyticsLabel=ot)}(C,b),C}function sa(b){return"object"==typeof b&&!!b&&Wa in b}function Wi(b,C){const x=[];for(let U=0;U<b.length;U++)x.push(b.charAt(U)),U<C.length&&x.push(C.charAt(U));return x.join("")}function hc(b){return Un.create("missing-app-config-values",{valueName:b})}Wi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Pl{constructor(C,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Ol(b){if(!b||!b.options)throw hc("App Configuration Object");if(!b.name)throw hc("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const U of C)if(!x[U])throw hc(U);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function gh(b){return mo.apply(this,arguments)}function mo(){return(mo=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(_r,{scope:ao}),b.swRegistration.update().catch(()=>{})}catch(C){throw Un.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function fc(b,C){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield gh(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function pc(b,C){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=us)})).apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(b,C){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield pc(b,C?.vapidKey),yield fc(b,C?.serviceWorkerRegistration),fh(b)})).apply(this,arguments)}function mh(b,C,x){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(b,C,x){const U=yh(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[Wa],message_name:x[uc],message_time:x[Ml],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yh(b){switch(b){case si.NOTIFICATION_CLICKED:return"notification_open";case si.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ls(){return(ls=(0,O.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===si.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(ks(x)):b.onMessageHandler.next(ks(x)));const U=x.data;sa(U)&&"1"===U[uo]&&(yield mh(b,x.messageType,U))})).apply(this,arguments)}const ds="@firebase/messaging",Pn=b=>{const C=new Pl(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Fl(b,C){return ls.apply(this,arguments)}(C,x)),C},Ki=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:U=>function kl(b,C){return yo.apply(this,arguments)}(C,U)}};function gc(){return mc.apply(this,arguments)}function mc(){return(mc=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Mn(){(0,ne._registerComponent)(new pe.wA("messaging",Pn,"PUBLIC")),(0,ne._registerComponent)(new pe.wA("messaging-internal",Ki,"PRIVATE")),(0,ne.registerVersion)(ds,"0.12.0"),(0,ne.registerVersion)(ds,"0.12.0","esm2017")}();const Fs="analytics",Bl="firebase_id",wc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$l="https://www.googletagmanager.com/gtag/js",Bn=new he.Yd("@firebase/analytics");function Xa(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function eu(b,C){const x=document.createElement("script");x.src=`${$l}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function vh(b,C,x,U,W,re){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(b,C,x,U,W,re){const _e=U[W];try{if(_e)yield C[_e];else{const ot=(yield Xa(x)).find(ft=>ft.measurementId===W);ot&&(yield C[ot.appId])}}catch(ze){Bn.error(ze)}b("config",W,re)})).apply(this,arguments)}function Yi(b,C,x,U,W){return ca.apply(this,arguments)}function ca(){return(ca=(0,O.Z)(function*(b,C,x,U,W){try{let re=[];if(W&&W.send_to){let _e=W.send_to;Array.isArray(_e)||(_e=[_e]);const ze=yield Xa(x);for(const ot of _e){const ft=ze.find(wt=>wt.measurementId===ot),Nt=ft&&C[ft.appId];if(!Nt){re=[];break}re.push(Nt)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),b("event",U,W||{})}catch(re){Bn.error(re)}})).apply(this,arguments)}function jl(b){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes($l)&&x.src.includes(b))return x;return null}const nr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),da=new class Ec{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function wo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ih(b){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(b){var C;const{appId:x,apiKey:U}=b,W={method:"GET",headers:wo(U)},re=wc.replace("{app-id}",x),_e=yield fetch(re,W);if(200!==_e.status&&304!==_e.status){let ze="";try{const ot=yield _e.json();null!==(C=ot.error)&&void 0!==C&&C.message&&(ze=ot.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:ze})}return _e.json()})).apply(this,arguments)}function Hl(b){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(b,C=da,x){const{appId:U,apiKey:W,measurementId:re}=b.options;if(!U)throw nr.create("no-app-id");if(!W){if(re)return{measurementId:re,appId:U};throw nr.create("no-api-key")}const _e=C.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new ha;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==x?x:6e4),Gl({appId:U,apiKey:W,measurementId:re},_e,ze,C)})).apply(this,arguments)}function Gl(b,C,x){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,O.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},U,W=da){var re;const{appId:_e,measurementId:ze}=b;try{yield bc(U,C)}catch(ot){if(ze)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:_e,measurementId:ze};throw ot}try{const ot=yield Ih(b);return W.deleteThrottleMetadata(_e),ot}catch(ot){const ft=ot;if(!ru(ft)){if(W.deleteThrottleMetadata(_e),ze)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:_e,measurementId:ze};throw ot}const Nt=503===Number(null===(re=ft?.customData)||void 0===re?void 0:re.httpStatus)?(0,oe.$s)(x,W.intervalMillis,30):(0,oe.$s)(x,W.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Nt,backoffCount:x+1};return W.setThrottleMetadata(_e,wt),Bn.debug(`Calling attemptFetch again in ${Nt} millis`),Gl(b,wt,U,W)}})).apply(this,arguments)}function bc(b,C){return new Promise((x,U)=>{const W=Math.max(C-Date.now(),0),re=setTimeout(x,W);b.addEventListener(()=>{clearTimeout(re),U(nr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function ru(b){if(!(b instanceof oe.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class ha{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Ls,su;function Io(){return(Io=(0,O.Z)(function*(b,C,x,U,W){if(W&&W.global)b("event",x,U);else{const re=yield C;b("event",x,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function Co(b){su=b}function Dc(b){Ls=b}function fs(){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(){if(!(0,oe.hl)())return Bn.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(b){return Bn.warn(nr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(b,C,x,U,W,re,_e){var ze;const ot=Hl(b);ot.then(rr=>{x[rr.measurementId]=rr.appId,b.options.measurementId&&rr.measurementId!==b.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>Bn.error(rr)),C.push(ot);const ft=fs().then(rr=>{if(rr)return U.getId()}),[Nt,wt]=yield Promise.all([ot,ft]);jl(re)||eu(re,Nt.measurementId),su&&(W("consent","default",su),Co(void 0)),W("js",new Date);const wr=null!==(ze=_e?.config)&&void 0!==ze?ze:{};return wr.origin="firebase",wr.update=!0,null!=wt&&(wr[Bl]=wt),W("config",Nt.measurementId,wr),Ls&&(W("set",Ls),Dc(void 0)),Nt.measurementId})).apply(this,arguments)}class ou{constructor(C){this.app=C}_delete(){return delete Cr[this.app.options.appId],Promise.resolve()}}let Cr={},So=[];const Vs={};let Mo,Ai,xo="dataLayer",Zl=!1;function Dh(b,C,x){!function Vp(){const b=[];if((0,oe.ru)()&&b.push("This is a browser extension environment."),(0,oe.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((U,W)=>`(${W+1}) ${U}`).join(" "),x=nr.create("invalid-analytics-context",{errorInfo:C});Bn.warn(x.message)}}();const U=b.options.appId;if(!U)throw nr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw nr.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cr[U])throw nr.create("already-exists",{id:U});if(!Zl){!function tu(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(xo);const{wrappedGtag:re,gtagCore:_e}=function la(b,C,x,U,W){let re=function(..._e){window[U].push(arguments)};return window[W]&&"function"==typeof window[W]&&(re=window[W]),window[W]=function Ic(b,C,x,U){function re(){return(re=(0,O.Z)(function*(_e,ze,ot){try{"event"===_e?yield Yi(b,C,x,ze,ot):"config"===_e?yield vh(b,C,x,U,ze,ot):"consent"===_e?b("consent","update",ot):b("set",ze)}catch(ft){Bn.error(ft)}})).apply(this,arguments)}return function W(_e,ze,ot){return re.apply(this,arguments)}}(re,b,C,x),{gtagCore:re,wrappedGtag:window[W]}}(Cr,So,Vs,xo,"gtag");Ai=re,Mo=_e,Zl=!0}return Cr[U]=function bh(b,C,x,U,W,re,_e){return Ao.apply(this,arguments)}(b,So,Vs,C,Mo,xo,x),new ou(b)}function ly(){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const rt="@firebase/analytics";!function An(){(0,ne._registerComponent)(new pe.wA(Fs,(C,{options:x})=>Dh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ne._registerComponent)(new pe.wA("analytics-internal",function b(C){try{const x=C.getProvider(Fs).getImmediate();return{logEvent:(U,W,re)=>function cn(b,C,x,U){b=(0,oe.m9)(b),function fa(b,C,x,U,W){return Io.apply(this,arguments)}(Ai,Cr[b.app.options.appId],C,x,U).catch(W=>Bn.error(W))}(x,U,W,re)}}catch(x){throw nr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ne.registerVersion)(rt,"0.9.0"),(0,ne.registerVersion)(rt,"0.9.0","esm2017")}();var Xi=k(4408),Tr=k(7565);const zl=new class Bs extends Tr.v{}(class Us extends Xi.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(C,x,U):(C.flush(this),0)}});var Th=k(4986),ps=k(9751),Kl=k(8505),$s=k(9468),st=k(5363);const Tc=new l.GfV("7.5.0"),xi="__angularfire_symbol__analyticsIsSupportedValue",uu="__angularfire_symbol__analyticsIsSupported",ga="__angularfire_symbol__remoteConfigIsSupportedValue",ur="__angularfire_symbol__remoteConfigIsSupported",ma="__angularfire_symbol__messagingIsSupportedValue",cu="__angularfire_symbol__messagingIsSupported";function No(b,C,x){if(C){if(1===C.length)return C[0];const re=C.filter(_e=>_e.app===x);if(1===re.length)return re[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[uu]||(globalThis[uu]=ly().then(b=>globalThis[xi]=b).catch(()=>globalThis[xi]=!1)),globalThis[cu]||(globalThis[cu]=gc().then(b=>globalThis[ma]=b).catch(()=>globalThis[ma]=!1)),globalThis[ur]||(globalThis[ur]=uy().then(b=>globalThis[ga]=b).catch(()=>globalThis[ga]=!1));const js=(b,C)=>{const x=C?[C]:(0,B.C6)(),U=[];return x.forEach(W=>{W.container.getProvider(b).instances.forEach(_e=>{U.includes(_e)||U.push(_e)})}),U};function yi(){}class du{constructor(C,x=zl){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,U){const W=this.zone;return this.delegate.schedule(function(_e){W.runGuarded(()=>{C.apply(this,[_e])})},x,U)}}class gs{constructor(C){this.zone=C,this.task=null}call(C,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yi,{},yi,yi)),x.pipe((0,Kl.b)({next:U,complete:U,error:U})).subscribe(C).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hs=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new du(Zone.current)),this.insideAngular=x.run(()=>new du(Zone.current,Th.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(l.LFG(l.R0b))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ar(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Yl(b){return Ar().ngZone.runOutsideAngular(()=>b())}function kn(b){return Ar().ngZone.run(()=>b())}function Vn(b){return Ar(),function Rn(b){return function(x){return(x=x.lift(new gs(b.ngZone))).pipe((0,$s.R)(b.outsideAngular),(0,st.Q)(b.insideAngular))}}(Ar())(b)}const Zs=(b,C)=>function(){const U=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),kn(()=>b.apply(void 0,U))},ui=(b,C)=>function(){let x;const U=arguments;for(let re=0;re<arguments.length;re++)"function"==typeof U[re]&&(C&&(x||(x=kn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yi,{},yi,yi)))),U[re]=Zs(U[re],x));const W=Yl(()=>b.apply(this,U));if(!C){if(W instanceof ps.y){const re=Ar();return W.pipe((0,$s.R)(re.outsideAngular),(0,st.Q)(re.insideAngular))}return kn(()=>W)}return W instanceof ps.y?W.pipe(Vn):W instanceof Promise?kn(()=>new Promise((re,_e)=>W.then(ze=>kn(()=>re(ze)),ze=>kn(()=>_e(ze))))):"function"==typeof W&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),W.apply(this,arguments)}:kn(()=>W)}},552:(ct,Te,k)=>{k.d(Te,{$:()=>Ps,A:()=>j,B:()=>Me,G:()=>Ss,H:()=>$r,J:()=>Zi,L:()=>H,M:()=>za,N:()=>xl,P:()=>Th,Q:()=>Wa,R:()=>dy,T:()=>uc,U:()=>us,V:()=>si,W:()=>zi,X:()=>kp,Y:()=>Jo,Z:()=>St,_:()=>Fp,a:()=>hs,a0:()=>fh,a1:()=>er,a2:()=>Ya,a3:()=>Qa,a4:()=>ph,a5:()=>Lp,a6:()=>tr,a7:()=>Ci,a8:()=>sa,a9:()=>Wi,aA:()=>$,aB:()=>ze,aC:()=>kn,aD:()=>Yl,aE:()=>pt,aI:()=>wo,aL:()=>uo,aa:()=>gh,ab:()=>fc,ac:()=>pc,af:()=>mh,ag:()=>yh,ah:()=>Fl,ak:()=>gi,al:()=>yc,an:()=>$l,ao:()=>nu,ap:()=>me,aq:()=>ke,ar:()=>tt,as:()=>Ke,at:()=>va,au:()=>Sr,av:()=>Tt,aw:()=>Ne,ax:()=>te,ay:()=>wr,az:()=>Q,b:()=>nr,c:()=>ur,d:()=>Ah,e:()=>cu,f:()=>Vn,g:()=>x,h:()=>ui,i:()=>To,j:()=>re,k:()=>Ri,l:()=>Si,m:()=>Ph,n:()=>kh,o:()=>ce,r:()=>Xi,s:()=>Ji,u:()=>zl,y:()=>Fs});var l=k(5861),B=k(2090),O=k(9681),ne=k(1877),oe=k(655),pe=k(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function Y(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},be=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},et=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fe=new ne.Yd("@firebase/auth");function Qe(v,...p){fe.logLevel<=ne.in.ERROR&&fe.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Ke(v,...p){throw Ge(v,...p)}function Ne(v,...p){return Ge(v,...p)}function Se(v,p,m){const I=Object.assign(Object.assign({},be()),{[p]:m});return new B.LL("auth","Firebase",I).create(p,{appName:v.name})}function Ee(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Ke(v,"argument-error"),Se(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...p){if("string"!=typeof v){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return et.create(v,...p)}function te(v,p,...m){if(!v)throw Ge(p,...m)}function ae(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Qe(p),new Error(p)}function me(v,p){v||ae(p)}const K=new Map;function Q(v){me(v instanceof Function,"Expected a class definition");let p=K.get(v);return p?(me(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,K.set(v,p),p)}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Le(){return"http:"===lt()||"https:"===lt()}function lt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class qe{constructor(p,m){this.shortDelay=p,this.longDelay=m,me(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function en(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(v,p){me(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class En{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ae("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ae("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ae("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jt=new qe(3e4,6e4);function $t(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Rt(v,p,m,I){return br.apply(this,arguments)}function br(){return(br=(0,l.Z)(function*(v,p,m,I,S={}){return Ei(v,S,(0,l.Z)(function*(){let P={},J={};I&&("GET"===p?J=I:P={body:JSON.stringify(I)});const Re=(0,B.xO)(Object.assign({key:v.config.apiKey},J)).slice(1),nt=yield v._getAdditionalHeaders();return nt["Content-Type"]="application/json",v.languageCode&&(nt["X-Firebase-Locale"]=v.languageCode),En.fetch()($i(v,v.config.apiHost,m,Re),Object.assign({method:p,headers:nt,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ei(v,p,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,l.Z)(function*(v,p,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},Qt),p);try{const S=new kr(v),P=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const J=yield P.json();if("needConfirmation"in J)throw qn(v,"account-exists-with-different-credential",J);if(P.ok&&!("errorMessage"in J))return J;{const Re=P.ok?J.errorMessage:J.error.message,[nt,mt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw qn(v,"credential-already-in-use",J);if("EMAIL_EXISTS"===nt)throw qn(v,"email-already-in-use",J);if("USER_DISABLED"===nt)throw qn(v,"user-disabled",J);const jt=I[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw Se(v,jt,mt);Ke(v,jt)}}catch(S){if(S instanceof B.ZR)throw S;Ke(v,"network-request-failed")}})).apply(this,arguments)}function Fn(v,p,m,I){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,l.Z)(function*(v,p,m,I,S={}){const P=yield Rt(v,p,m,I,S);return"mfaPendingCredential"in P&&Ke(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function $i(v,p,m,I){const S=`${p}${m}?${I}`;return v.config.emulator?dn(v.config,S):`${v.config.apiScheme}://${S}`}class kr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Ne(this.auth,"network-request-failed")),Jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(v,p,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const S=Ne(v,p,I);return S.customData._tokenResponse=m,S}function ji(){return(ji=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Ye(v,p){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Zn(v,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function pr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Dn(){return(Dn=(0,l.Z)(function*(v,p=!1){const m=(0,B.m9)(v),I=yield m.getIdToken(p),S=dt(I);te(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,J=P?.sign_in_provider;return{claims:S,token:I,authTime:pr(yn(S.auth_time)),issuedAtTime:pr(yn(S.iat)),expirationTime:pr(yn(S.exp)),signInProvider:J||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function yn(v){return 1e3*Number(v)}function dt(v){const[p,m,I]=v.split(".");if(void 0===p||void 0===m||void 0===I)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,B.tV)(m);return S?JSON.parse(S):(Qe("Failed to decode base64 JWT payload"),null)}catch(S){return Qe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Ct(v,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,l.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof B.ZR&&Jn(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function Jn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Dr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,l.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,l.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class bt{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=pr(this.lastLoginAt),this.creationTime=pr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(v){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,l.Z)(function*(v){var p;const m=v.auth,I=yield v.getIdToken(),S=yield Ct(v,Zn(m,{idToken:I}));te(S?.users.length,m,"internal-error");const P=S.users[0];v._notifyReloadListener(P);const J=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?xn(P.providerUserInfo):[],Re=ar(v.providerData,J),jt=!!v.isAnonymous&&!(v.email&&P.passwordHash||Re?.length),vn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Re,metadata:new bt(P.createdAt,P.lastLoginAt),isAnonymous:jt};Object.assign(v,vn)})).apply(this,arguments)}function zt(){return(zt=(0,l.Z)(function*(v){const p=(0,B.m9)(v);yield Fr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ar(v,p){return[...v.filter(I=>!p.some(S=>S.providerId===I.providerId)),...p]}function xn(v){return v.map(p=>{var{providerId:m}=p,I=(0,oe._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function De(){return(De=(0,l.Z)(function*(v,p){const m=yield Ei(v,{},(0,l.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:P}=v.config,J=$i(v,S,"/v1/token",`key=${P}`),Re=yield v._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",En.fetch()(J,{method:"POST",headers:Re,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){te(p.idToken,"internal-error"),te(typeof p.idToken<"u","internal-error"),te(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function ht(v){const p=dt(v);return te(p,"internal-error"),te(typeof p.exp<"u","internal-error"),te(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,l.Z)(function*(){return te(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,l.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:J}=yield function Je(v,p){return De.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(S,P,Number(J))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:S,expirationTime:P}=m,J=new Xe;return I&&(te("string"==typeof I,"internal-error",{appName:p}),J.refreshToken=I),S&&(te("string"==typeof S,"internal-error",{appName:p}),J.accessToken=S),P&&(te("number"==typeof P,"internal-error",{appName:p}),J.expirationTime=P),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return ae("not implemented")}}function _t(v,p){te("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Dt{constructor(p){var{uid:m,auth:I,stsTokenManager:S}=p,P=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new bt(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,l.Z)(function*(){const I=yield Ct(m,m.stsTokenManager.getToken(m.auth,p));return te(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function bn(v){return Dn.apply(this,arguments)}(this,p)}reload(){return function ti(v){return zt.apply(this,arguments)}(this)}_assign(p){this!==p&&(te(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Dt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,l.Z)(function*(){let S=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield Fr(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,l.Z)(function*(){const m=yield p.getIdToken();return yield Ct(p,function fi(v,p){return ji.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,S,P,J,Re,nt,mt,jt;const vn=null!==(I=m.displayName)&&void 0!==I?I:void 0,ci=null!==(S=m.email)&&void 0!==S?S:void 0,vi=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,wa=null!==(J=m.photoURL)&&void 0!==J?J:void 0,Mc=null!==(Re=m.tenantId)&&void 0!==Re?Re:void 0,Xl=null!==(nt=m._redirectEventId)&&void 0!==nt?nt:void 0,Oo=null!==(mt=m.createdAt)&&void 0!==mt?mt:void 0,zp=null!==(jt=m.lastLoginAt)&&void 0!==jt?jt:void 0,{uid:Ia,emailVerified:Fh,isAnonymous:Wp,providerData:Ea,stsTokenManager:Po}=m;te(Ia&&Po,p,"internal-error");const Kp=Xe.fromJSON(this.name,Po);te("string"==typeof Ia,p,"internal-error"),_t(vn,p.name),_t(ci,p.name),te("boolean"==typeof Fh,p,"internal-error"),te("boolean"==typeof Wp,p,"internal-error"),_t(vi,p.name),_t(wa,p.name),_t(Mc,p.name),_t(Xl,p.name),_t(Oo,p.name),_t(zp,p.name);const ed=new Dt({uid:Ia,auth:p,email:ci,emailVerified:Fh,displayName:vn,isAnonymous:Wp,photoURL:wa,phoneNumber:vi,tenantId:Mc,stsTokenManager:Kp,createdAt:Oo,lastLoginAt:zp});return Ea&&Array.isArray(Ea)&&(ed.providerData=Ea.map(yu=>Object.assign({},yu))),Xl&&(ed._redirectEventId=Xl),ed}static _fromIdTokenResponse(p,m,I=!1){return(0,l.Z)(function*(){const S=new Xe;S.updateFromServerResponse(m);const P=new Dt({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:I});return yield Fr(P),P})()}}const H=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(m,I){var S=this;return(0,l.Z)(function*(){S.storage[m]=I})()}_get(m){var I=this;return(0,l.Z)(function*(){const S=I.storage[m];return void 0===S?null:S})()}_remove(m){var I=this;return(0,l.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function $(v,p,m){return`firebase:${v}:${p}:${m}`}class z{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:S,name:P}=this.auth;this.fullUserKey=$(this.userKey,S.apiKey,P),this.fullPersistenceKey=$("persistence",S.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,l.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Dt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,l.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,l.Z)(function*(){if(!m.length)return new z(Q(H),p,I);const S=(yield Promise.all(m.map(function(){var mt=(0,l.Z)(function*(jt){if(yield jt._isAvailable())return jt});return function(jt){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let P=S[0]||Q(H);const J=$(I,p.config.apiKey,p.name);let Re=null;for(const mt of m)try{const jt=yield mt._get(J);if(jt){const vn=Dt._fromJSON(p,jt);mt!==P&&(Re=vn),P=mt;break}}catch{}const nt=S.filter(mt=>mt._shouldAllowMigration);return P._shouldAllowMigration&&nt.length?(P=nt[0],Re&&(yield P._set(J,Re.toJSON())),yield Promise.all(m.map(function(){var mt=(0,l.Z)(function*(jt){if(jt!==P)try{yield jt._remove(J)}catch{}});return function(jt){return mt.apply(this,arguments)}}())),new z(P,p,I)):new z(P,p,I)})()}}function V(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Oe(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(M(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ut(p))return"Blackberry";if(Ce(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||X(p))&&!p.includes("edge/"))return"Chrome";if(tt(p))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function M(v=(0,B.z$)()){return/firefox\//i.test(v)}function L(v=(0,B.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function X(v=(0,B.z$)()){return/crios\//i.test(v)}function Oe(v=(0,B.z$)()){return/iemobile/i.test(v)}function tt(v=(0,B.z$)()){return/android/i.test(v)}function ut(v=(0,B.z$)()){return/blackberry/i.test(v)}function Ce(v=(0,B.z$)()){return/webos/i.test(v)}function ke(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Tt(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function fn(v=(0,B.z$)()){return ke(v)||tt(v)||Ce(v)||ut(v)||/windows phone/i.test(v)||Oe(v)}function Cn(v,p=[]){let m;switch(v){case"Browser":m=V((0,B.z$)());break;case"Worker":m=`${V((0,B.z$)())}-${v}`;break;default:m=v}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${I}`}class Ts{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const I=P=>new Promise((J,Re)=>{try{J(p(P))}catch(nt){Re(nt)}});I.onAbort=m,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,l.Z)(function*(){if(m.auth.currentUser===p)return;const I=[];try{for(const S of m.queue)yield S(p),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const P of I)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class no{constructor(p,m,I){this.app=p,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new As(this),this.idTokenSubscription=new As(this),this.beforeStateQueue=new Ts(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=Q(m)),this._initializationPromise=this.queue((0,l.Z)(function*(){var S,P;if(!I._deleted&&(I.persistenceManager=yield z.create(I,p),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,l.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,l.Z)(function*(){var I;const S=yield m.assertedPersistence.getCurrentUser();let P=S,J=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Re=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,nt=P?._redirectEventId,mt=yield m.tryRedirectSignIn(p);(!Re||Re===nt)&&mt?.user&&(P=mt.user,J=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(J)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Re){P=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Re))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,l.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,l.Z)(function*(){try{yield Fr(p)}catch(I){if("auth/network-request-failed"!==I?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ft(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,l.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,l.Z)(function*(){const I=p?(0,B.m9)(p):null;return I&&te(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p,m=!1){var I=this;return(0,l.Z)(function*(){if(!I._deleted)return p&&te(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,l.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,l.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,l.Z)(function*(){yield m.assertedPersistence.setPersistence(Q(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,l.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,l.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&Q(p)||m._popupRedirectResolver;te(I,m,"argument-error"),m.redirectPersistenceManager=yield z.create(m,[Q(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,l.Z)(function*(){var I,S;return m._isInitialized&&(yield m.queue((0,l.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,l.Z)(function*(){if(p===m.currentUser)return m.queue((0,l.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,S){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),J=this._isInitialized?Promise.resolve():this._initializationPromise;return te(J,this,"internal-error"),J.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,I,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,l.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,l.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(I["X-Firebase-Client"]=S),I})()}}function pt(v){return(0,B.m9)(v)}class As{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ss(v,p,m){const I=pt(v);te(I._canInitEmulator,I,"emulator-config-failed"),te(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const S=!!m?.disableWarnings,P=Za(p),{host:J,port:Re}=function Gi(v){const p=Za(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const P=S[1];return{host:P,port:zn(I.substr(P.length+1))}}{const[P,J]=I.split(":");return{host:P,port:zn(J)}}}(p);I.config.emulator={url:`${P}//${J}${null===Re?"":`:${Re}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:J,port:Re,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function xs(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Za(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function zn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class $r{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return ae("not implemented")}_getIdTokenResponse(p){return ae("not implemented")}_linkToIdToken(p,m){return ae("not implemented")}_getReauthenticationResolver(p){return ae("not implemented")}}function ni(v,p){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:resetPassword",$t(v,p))})).apply(this,arguments)}function ic(v,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function lh(v,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:update",$t(v,p))})).apply(this,arguments)}function Ms(){return(Ms=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithPassword",$t(v,p))})).apply(this,arguments)}function bi(v,p){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:sendOobCode",$t(v,p))})).apply(this,arguments)}function qi(v,p){return On.apply(this,arguments)}function On(){return(On=(0,l.Z)(function*(v,p){return bi(v,p)})).apply(this,arguments)}function dh(v,p){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,l.Z)(function*(v,p){return bi(v,p)})).apply(this,arguments)}function ri(v,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,l.Z)(function*(v,p){return bi(v,p)})).apply(this,arguments)}function sc(v,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(v,p){return bi(v,p)})).apply(this,arguments)}function oc(){return(oc=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,p))})).apply(this,arguments)}function ac(){return(ac=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,p))})).apply(this,arguments)}class Yo extends $r{constructor(p,m,I,S=null){super("password",I),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new Yo(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Yo(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,l.Z)(function*(){switch(m.signInMethod){case"password":return function Wo(v,p){return Ms.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function jr(v,p){return oc.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Ke(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,l.Z)(function*(){switch(I.signInMethod){case"password":return ic(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Sp(v,p){return ac.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:Ke(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ns(v,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithIdp",$t(v,p))})).apply(this,arguments)}class Zi extends $r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Zi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Ke("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S}=m,P=(0,oe._T)(m,["providerId","signInMethod"]);if(!I||!S)return null;const J=new Zi(I,S);return J.idToken=P.idToken||void 0,J.accessToken=P.accessToken||void 0,J.secret=P.secret,J.nonce=P.nonce,J.pendingToken=P.pendingToken||null,J}_getIdTokenResponse(p){return Ns(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Ns(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ns(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Mp(v,p){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:sendVerificationCode",$t(v,p))})).apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,p))})).apply(this,arguments)}function Cl(){return(Cl=(0,l.Z)(function*(v,p){const m=yield Fn(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,p));if(m.temporaryProof)throw qn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Np={USER_NOT_FOUND:"user-not-found"};function Tl(){return(Tl=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Np)})).apply(this,arguments)}class so extends $r{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new so({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new so({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Rp(v,p){return Qo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function io(v,p){return Cl.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Op(v,p){return Tl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:P}=p;return I||m||S||P?new so({verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:P}):null}}class oo{constructor(p){var m,I,S,P,J,Re;const nt=(0,B.zd)((0,B.pd)(p)),mt=null!==(m=nt.apiKey)&&void 0!==m?m:null,jt=null!==(I=nt.oobCode)&&void 0!==I?I:null,vn=function Al(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=nt.mode)&&void 0!==S?S:null);te(mt&&jt&&vn,"argument-error"),this.apiKey=mt,this.operation=vn,this.code=jt,this.continueUrl=null!==(P=nt.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(J=nt.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(Re=nt.tenantId)&&void 0!==Re?Re:null}static parseLink(p){const m=function Sl(v){const p=(0,B.zd)((0,B.pd)(v)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||m||p||v}(p);try{return new oo(m)}catch{return null}}}let za=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return Yo._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const S=oo.parseLink(I);return te(S,"argument-error"),Yo._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class _r{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ao extends _r{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class us extends ao{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return te("providerId"in m&&"signInMethod"in m,"argument-error"),Zi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return te(p.idToken||p.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return us.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return us.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:P,nonce:J,providerId:Re}=p;if(!I&&!S&&!m&&!P||!Re)return null;try{return new us(Re)._credential({idToken:m,accessToken:I,nonce:J,pendingToken:P})}catch{return null}}}let xl=(()=>{class v extends ao{constructor(){super("facebook.com")}static credential(m){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Wa=(()=>{class v extends ao{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:S}=m;if(!I&&!S)return null;try{return v.credential(I,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),uc=(()=>{class v extends ao{constructor(){super("github.com")}static credential(m){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class uo extends $r{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ns(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Ns(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ns(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:S,pendingToken:P}=m;return I&&S&&P&&I===S?new uo(I,P):null}static _create(p,m){return new uo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class si extends _r{constructor(p){te(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return si.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return si.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=uo.fromJSON(p);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return uo._create(I,m)}catch{return null}}}let zi=(()=>{class v extends ao{constructor(){super("twitter.com")}static credential(m,I){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=m;if(!I||!S)return null;try{return v.credential(I,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Hr(v,p){return Os.apply(this,arguments)}function Os(){return(Os=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signUp",$t(v,p))})).apply(this,arguments)}class pi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,S=!1){return(0,l.Z)(function*(){const P=yield Dt._fromIdTokenResponse(p,I,S),J=co(I);return new pi({user:P,providerId:J,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,l.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const S=co(I);return new pi({user:p,providerId:S,_tokenResponse:I,operationType:m})})()}}function co(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function kp(v){return cc.apply(this,arguments)}function cc(){return(cc=(0,l.Z)(function*(v){var p;const m=pt(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new pi({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Hr(m,{returnSecureToken:!0}),S=yield pi._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ln extends B.ZR{constructor(p,m,I,S){var P;super(m.code,m.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,Ln.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,S){return new Ln(p,m,I,S)}}function Rl(v,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ln._fromErrorAndOperation(v,P,p,I):P})}function hh(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function gi(v,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,l.Z)(function*(v,p){const m=(0,B.m9)(v);yield Di(!0,m,p);const{providerUserInfo:I}=yield Ye(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=hh(I||[]);return m.providerData=m.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ka(v,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,l.Z)(function*(v,p,m=!1){const I=yield Ct(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return pi._forOperation(v,"link",I)})).apply(this,arguments)}function Di(v,p,m){return tn.apply(this,arguments)}function tn(){return(tn=(0,l.Z)(function*(v,p,m){yield Fr(p);const S=!1===v?"provider-already-linked":"no-such-provider";te(hh(p.providerData).has(m)===v,p.auth,S)})).apply(this,arguments)}function lc(v,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,l.Z)(function*(v,p,m=!1){const{auth:I}=v,S="reauthenticate";try{const P=yield Ct(v,Rl(I,S,p,v),m);te(P.idToken,I,"internal-error");const J=dt(P.idToken);te(J,I,"internal-error");const{sub:Re}=J;return te(v.uid===Re,I,"user-mismatch"),pi._forOperation(v,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&Ke(I,"user-mismatch"),P}})).apply(this,arguments)}function dc(v,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,l.Z)(function*(v,p,m=!1){const I="signIn",S=yield Rl(v,I,p),P=yield pi._fromIdTokenResponse(v,I,S);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Jo(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,l.Z)(function*(v,p){return dc(pt(v),p)})).apply(this,arguments)}function St(v,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,l.Z)(function*(v,p){const m=(0,B.m9)(v);return yield Di(!1,m,p.providerId),Ka(m,p)})).apply(this,arguments)}function Fp(v,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,l.Z)(function*(v,p){return lc((0,B.m9)(v),p)})).apply(this,arguments)}function Nl(v,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,l.Z)(function*(v,p){return Fn(v,"POST","/v1/accounts:signInWithCustomToken",$t(v,p))})).apply(this,arguments)}function Ps(v,p){return na.apply(this,arguments)}function na(){return(na=(0,l.Z)(function*(v,p){const m=pt(v),I=yield Nl(m,{token:p,returnSecureToken:!0}),S=yield pi._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class ho{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ae._fromServerResponse(p,m):Ke(p,"internal-error")}}class Ae extends ho{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ae(m)}}function qt(v,p,m){var I;te((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),te(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function fh(v,p,m){return fo.apply(this,arguments)}function fo(){return(fo=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v),S={requestType:"PASSWORD_RESET",email:p};m&&qt(I,S,m),yield dh(I,S)})).apply(this,arguments)}function er(v,p,m){return po.apply(this,arguments)}function po(){return(po=(0,l.Z)(function*(v,p,m){yield ni((0,B.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Ya(v,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,l.Z)(function*(v,p){yield lh((0,B.m9)(v),{oobCode:p})})).apply(this,arguments)}function Qa(v,p){return go.apply(this,arguments)}function go(){return(go=(0,l.Z)(function*(v,p){const m=(0,B.m9)(v),I=yield ni(m,{oobCode:p}),S=I.requestType;switch(te(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(I.mfaInfo,m,"internal-error");default:te(I.email,m,"internal-error")}let P=null;return I.mfaInfo&&(P=ho._fromServerResponse(pt(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function ph(v,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(v,p){const{data:m}=yield Qa((0,B.m9)(v),p);return m.email})).apply(this,arguments)}function Lp(v,p,m){return ks.apply(this,arguments)}function ks(){return(ks=(0,l.Z)(function*(v,p,m){const I=pt(v),S=yield Hr(I,{returnSecureToken:!0,email:p,password:m}),P=yield pi._fromIdTokenResponse(I,"signIn",S);return yield I._updateCurrentUser(P.user),P})).apply(this,arguments)}function tr(v,p,m){return Jo((0,B.m9)(v),za.credential(p,m))}function Ci(v,p,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v),S={requestType:"EMAIL_SIGNIN",email:p};te(m.handleCodeInApp,I,"argument-error"),m&&qt(I,S,m),yield ri(I,S)})).apply(this,arguments)}function sa(v,p){return"EMAIL_SIGNIN"===oo.parseLink(p)?.operation}function Wi(v,p,m){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v),S=za.credentialWithLink(p,m||Fe());return te(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Jo(I,S)})).apply(this,arguments)}function hc(v,p){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:createAuthUri",$t(v,p))})).apply(this,arguments)}function gh(v,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,l.Z)(function*(v,p){const I={identifier:p,continueUri:Le()?Fe():"http://localhost"},{signinMethods:S}=yield hc((0,B.m9)(v),I);return S||[]})).apply(this,arguments)}function fc(v,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,l.Z)(function*(v,p){const m=(0,B.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&qt(m.auth,S,p);const{email:P}=yield qi(m.auth,S);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function pc(v,p,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&qt(I.auth,P,m);const{email:J}=yield sc(I.auth,P);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function kl(v,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,l.Z)(function*(v,p){return Rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mh(v,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,l.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,B.m9)(v),P={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},J=yield Ct(I,kl(I.auth,P));I.displayName=J.displayName||null,I.photoURL=J.photoUrl||null;const Re=I.providerData.find(({providerId:nt})=>"password"===nt);Re&&(Re.displayName=I.displayName,Re.photoURL=I.photoURL),yield I._updateTokensIfNecessary(J)})).apply(this,arguments)}function yh(v,p){return ls((0,B.m9)(v),p,null)}function Fl(v,p){return ls((0,B.m9)(v),null,p)}function ls(v,p,m){return ds.apply(this,arguments)}function ds(){return(ds=(0,l.Z)(function*(v,p,m){const{auth:I}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const J=yield Ct(v,ic(I,P));yield v._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Pn{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class Ki extends Pn{constructor(p,m,I,S){super(p,m,I),this.username=S}}class Mn extends Pn{constructor(p,m){super(p,"facebook.com",m)}}class gc extends Ki{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class mc extends Pn{constructor(p,m){super(p,"google.com",m)}}class Vl extends Ki{constructor(p,m,I){super(p,"twitter.com",m,I)}}function yc(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ll(v){var p,m;if(!v)return null;const{providerId:I}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const J=null===(m=null===(p=dt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(J)return new Pn(P,"anonymous"!==J&&"custom"!==J?J:null)}if(!I)return null;switch(I){case"facebook.com":return new Mn(P,S);case"github.com":return new gc(P,S);case"google.com":return new mc(P,S);case"twitter.com":return new Vl(P,S,v.screenName||null);case"custom":case"anonymous":return new Pn(P,null);default:return new Pn(P,I,S)}}(m)}function Fs(v){return(0,B.m9)(v).signOut()}class ai{constructor(p,m,I){this.type=p,this.credential=m,this.auth=I}static _fromIdtoken(p,m){return new ai("enroll",p,m)}static _fromMfaPendingCredential(p){return new ai("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ai._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return ai._fromIdtoken(p.multiFactorSession.idToken)}return null}}class wc{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=pt(p),S=m.customData._serverResponse,P=(S.mfaInfo||[]).map(Re=>ho._fromServerResponse(I,Re));te(S.mfaPendingCredential,I,"internal-error");const J=ai._fromMfaPendingCredential(S.mfaPendingCredential);return new wc(J,P,function(){var Re=(0,l.Z)(function*(nt){const mt=yield nt._process(I,J);delete S.mfaInfo,delete S.mfaPendingCredential;const jt=Object.assign(Object.assign({},S),{idToken:mt.idToken,refreshToken:mt.refreshToken});switch(m.operationType){case"signIn":const vn=yield pi._fromIdTokenResponse(I,m.operationType,jt);return yield I._updateCurrentUser(vn.user),vn;case"reauthenticate":return te(m.user,I,"internal-error"),pi._forOperation(m.user,m.operationType,jt);default:Ke(I,"internal-error")}});return function(nt){return Re.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,l.Z)(function*(){return m.signInResolver(p)})()}}function $l(v,p){var m;const I=(0,B.m9)(v),S=p;return te(p.customData.operationType,I,"argument-error"),te(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),wc._fromError(I,S)}function Bn(v,p){return Rt(v,"POST","/v2/accounts/mfaEnrollment:start",$t(v,p))}class tu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>ho._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new tu(p)}getSession(){var p=this;return(0,l.Z)(function*(){return ai._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var I=this;return(0,l.Z)(function*(){const S=p,P=yield I.getSession(),J=yield Ct(I.user,S._process(I.user.auth,P,m));return yield I.user._updateTokensIfNecessary(J),I.user.reload()})()}unenroll(p){var m=this;return(0,l.Z)(function*(){const I="string"==typeof p?p:p.uid,S=yield m.user.getIdToken(),P=yield Ct(m.user,function eu(v,p){return Rt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(v,p))}(m.user.auth,{idToken:S,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:J})=>J!==I),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(J){if("auth/user-token-expired"!==J?.code)throw J}})()}}const vh=new WeakMap;function nu(v){const p=(0,B.m9)(v);return vh.has(p)||vh.set(p,tu._fromUser(p)),vh.get(p)}const Yi="__sak";class ca{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Yi,"1"),this.storage.removeItem(Yi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const nr=(()=>{class v extends ca{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ic(){const v=(0,B.z$)();return L(v)||ke(v)}()&&function Hi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),P=this.localCache[I];S!==P&&m(I,P,S)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((Re,nt,mt)=>{this.notifyListeners(Re,mt)});const S=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(S);if(m.newValue!==Re)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!I)return}const P=()=>{const Re=this.storage.getItem(S);!I&&this.localCache[S]===Re||this.notifyListeners(S,Re)},J=this.storage.getItem(S);!function xt(){return(0,B.w1)()&&10===document.documentMode}()||J===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var S=()=>super._set,P=this;return(0,l.Z)(function*(){yield S().call(P,m,I),P.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,S=this;return(0,l.Z)(function*(){const P=yield I().call(S,m);return S.localCache[m]=JSON.stringify(P),P})()}_remove(m){var I=()=>super._remove,S=this;return(0,l.Z)(function*(){yield I().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),hs=(()=>{class v extends ca{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let da=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(P=>P.isListeningto(m));if(I)return I;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,l.Z)(function*(){const S=m,{eventId:P,eventType:J,data:Re}=S.data,nt=I.handlersMap[J];if(!nt?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:J});const mt=Array.from(nt).map(function(){var vn=(0,l.Z)(function*(ci){return ci(S.origin,Re)});return function(ci){return vn.apply(this,arguments)}}()),jt=yield function Ec(v){return Promise.all(v.map(function(){var p=(0,l.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(mt);S.ports[0].postMessage({status:"done",eventId:P,eventType:J,response:jt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function wo(v="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return v+m}class Ih{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var S=this;return(0,l.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let J,Re;return new Promise((nt,mt)=>{const jt=wo("",20);P.port1.start();const vn=setTimeout(()=>{mt(new Error("unsupported_event"))},I);Re={messageChannel:P,onMessage(ci){const vi=ci;if(vi.data.eventId===jt)switch(vi.data.status){case"ack":clearTimeout(vn),J=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),nt(vi.data.response);break;default:clearTimeout(vn),clearTimeout(J),mt(new Error("invalid_response"))}}},S.handlers.add(Re),P.port1.addEventListener("message",Re.onMessage),S.target.postMessage({eventType:p,eventId:jt,data:m},[P.port2])}).finally(()=>{Re&&S.removeMessageHandler(Re)})})()}}function $n(){return window}function Gr(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function Qi(){return(Qi=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ha="firebaseLocalStorageDb",fa="firebaseLocalStorage",Io="fbase_key";class Eo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function bo(v,p){return v.transaction([fa],p?"readwrite":"readonly").objectStore(fa)}function iu(){const v=indexedDB.open(ha,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(fa,{keyPath:Io})}catch(S){m(S)}}),v.addEventListener("success",(0,l.Z)(function*(){const I=v.result;I.objectStoreNames.contains(fa)?p(I):(I.close(),yield function ql(){const v=indexedDB.deleteDatabase(ha);return new Eo(v).toPromise()}(),p(yield iu()))}))})}function pa(v,p,m){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,l.Z)(function*(v,p,m){const I=bo(v,!0).put({[Io]:p,value:m});return new Eo(I).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,l.Z)(function*(v,p){const m=bo(v,!1).get(p),I=yield new Eo(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function su(v,p){const m=bo(v,!0).delete(p);return new Eo(m).toPromise()}const To=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,l.Z)(function*(){return m.db||(m.db=yield iu()),m.db})()}_withRetries(m){var I=this;return(0,l.Z)(function*(){let S=0;for(;;)try{const P=yield I._openDb();return yield m(P)}catch(P){if(S++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,l.Z)(function*(){return Gr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,l.Z)(function*(){m.receiver=da._getInstance(function ru(){return Gr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,l.Z)(function*(S,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(S,P){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,l.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,l.Z)(function*(){var I,S;if(m.activeServiceWorker=yield function Gl(){return Qi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ih(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(I=P[0])||void 0===I?void 0:I.fulfilled)&&(null===(S=P[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,l.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function bc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const m=yield iu();return yield pa(m,Yi,"1"),yield su(m,Yi),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,l.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var S=this;return(0,l.Z)(function*(){return S._withPendingWrite((0,l.Z)(function*(){return yield S._withRetries(P=>pa(P,m,I)),S.localCache[m]=I,S.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,l.Z)(function*(){const S=yield I._withRetries(P=>function Eh(v,p){return Do.apply(this,arguments)}(P,m));return I.localCache[m]=S,S})()}_remove(m){var I=this;return(0,l.Z)(function*(){return I._withPendingWrite((0,l.Z)(function*(){return yield I._withRetries(S=>su(S,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,l.Z)(function*(){const I=yield m._withRetries(J=>{const Re=bo(J,!1).getAll();return new Eo(Re).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:J,value:Re}of I)P.add(J),JSON.stringify(m.localCache[J])!==JSON.stringify(Re)&&(m.notifyListeners(J,Re),S.push(J));for(const J of Object.keys(m.localCache))m.localCache[J]&&!P.has(J)&&(m.notifyListeners(J,null),S.push(J));return S})()}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function bh(v,p){return Rt(v,"POST","/v2/accounts/mfaSignIn:start",$t(v,p))}function Cr(){return(Cr=(0,l.Z)(function*(v){return(yield Rt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vs(v){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=p,I.onerror=S=>{const P=Ne("internal-error");P.customData=S,m(P)},I.type="text/javascript",I.charset="UTF-8",function So(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(I)})}function xo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ai=1e12;class Zl{constructor(p){this.auth=p,this.counter=Ai,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new Tn(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||Ai;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Ai))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,l.Z)(function*(){var I;return null===(I=m._widgets.get(p||Ai))||void 0===I||I.execute(),""})()}}class Tn{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;te(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vp(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dh=xo("rcb"),b0=new qe(3e4,6e4);class ly{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=$n().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return te(function Ch(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve($n().grecaptcha):new Promise((I,S)=>{const P=$n().setTimeout(()=>{S(Ne(p,"network-request-failed"))},b0.get());$n()[Dh]=()=>{$n().clearTimeout(P),delete $n()[Dh];const Re=$n().grecaptcha;if(!Re)return void S(Ne(p,"internal-error"));const nt=Re.render;Re.render=(mt,jt)=>{const vn=nt(mt,jt);return this.counter++,vn},this.hostLanguage=m,I(Re)},Vs(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Dh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),S(Ne(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=$n().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D0{load(p){return(0,l.Z)(function*(){return new Zl(p)})()}clearedOneInstance(){}}const au="recaptcha",C0={theme:"light",type:"image"};class dy{constructor(p,m=Object.assign({},C0),I){this.parameters=m,this.type=au,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pt(I),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;te(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D0:new ly,this.validateStartingState()}verify(){var p=this;return(0,l.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(P=>{const J=Re=>{!Re||(p.tokenChangeListeners.delete(J),P(Re))};p.tokenChangeListeners.add(J),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=$n()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,l.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,l.Z)(function*(){te(Le()&&!Gr(),p.auth,"internal-error"),yield function mr(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ou(v){return Cr.apply(this,arguments)}(p.auth);te(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cn{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=so._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Ji(v,p,m){return rt.apply(this,arguments)}function rt(){return(rt=(0,l.Z)(function*(v,p,m){const I=pt(v),S=yield Tr(I,p,(0,B.m9)(m));return new cn(S,P=>Jo(I,P))})).apply(this,arguments)}function Si(v,p,m){return An.apply(this,arguments)}function An(){return(An=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v);yield Di(!1,I,"phone");const S=yield Tr(I.auth,p,(0,B.m9)(m));return new cn(S,P=>St(I,P))})).apply(this,arguments)}function Xi(v,p,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v),S=yield Tr(I.auth,p,(0,B.m9)(m));return new cn(S,P=>Fp(I,P))})).apply(this,arguments)}function Tr(v,p,m){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,l.Z)(function*(v,p,m){var I;const S=yield m.verify();try{let P;if(te("string"==typeof S,v,"argument-error"),te(m.type===au,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const J=P.session;if("phoneNumber"in P)return te("enroll"===J.type,v,"internal-error"),(yield Bn(v,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{te("signin"===J.type,v,"internal-error");const Re=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return te(Re,v,"missing-multi-factor-info"),(yield bh(v,{mfaPendingCredential:J.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Mp(v,{phoneNumber:P.phoneNumber,recaptchaToken:S});return J}}finally{m._reset()}})).apply(this,arguments)}function zl(v,p){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,l.Z)(function*(v,p){yield Ka((0,B.m9)(v),p)})).apply(this,arguments)}let Th=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=pt(m)}verifyPhoneNumber(m,I){return Tr(this.auth,m,(0,B.m9)(I))}static credential(m,I){return so._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:S}=m;return I&&S?so._fromTokenResponse(I,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ps(v,p){return p?Q(p):(te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Kl extends $r{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ns(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ns(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ns(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function $s(v){return dc(v.auth,new Kl(v),v.bypassAuthState)}function st(v){const{auth:p,user:m}=v;return te(m,p,"internal-error"),lc(m,new Kl(v),v.bypassAuthState)}function Tc(v){return xi.apply(this,arguments)}function xi(){return(xi=(0,l.Z)(function*(v){const{auth:p,user:m}=v;return te(m,p,"internal-error"),Ka(m,new Kl(v),v.bypassAuthState)})).apply(this,arguments)}class uu{constructor(p,m,I,S,P=!1){this.auth=p,this.resolver=I,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,l.Z)(function*(I,S){p.pendingPromise={resolve:I,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(I,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,l.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:P,tenantId:J,error:Re,type:nt}=p;if(Re)return void m.reject(Re);const mt={auth:m.auth,requestUri:I,sessionId:S,tenantId:J||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(nt)(mt))}catch(jt){m.reject(jt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return $s;case"linkViaPopup":case"linkViaRedirect":return Tc;case"reauthViaPopup":case"reauthViaRedirect":return st;default:Ke(this.auth,"internal-error")}}resolve(p){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ga=new qe(2e3,1e4);function ur(v,p,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,l.Z)(function*(v,p,m){const I=pt(v);Ee(v,p,_r);const S=ps(I,m);return new lu(I,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function cu(v,p,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v);Ee(I.auth,p,_r);const S=ps(I.auth,m);return new lu(I.auth,"reauthViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}function Ah(v,p,m){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v);Ee(I.auth,p,_r);const S=ps(I.auth,m);return new lu(I.auth,"linkViaPopup",p,S,I).executeNotNull()})).apply(this,arguments)}let lu=(()=>{class v extends uu{constructor(m,I,S,P,J){super(m,I,P,J),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,l.Z)(function*(){const I=yield m.execute();return te(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,l.Z)(function*(){me(1===m.filter.length,"Popup operations only handle one event");const I=wo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Ne(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ga.get())};m()}}return v.currentPopupAction=null,v})();const js=new Map;class yi extends uu{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,l.Z)(function*(){let I=js.get(m.auth._key());if(!I){try{const P=(yield function du(v,p){return gs.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(P)}catch(S){I=()=>Promise.reject(S)}js.set(m.auth._key(),I)}return m.bypassAuthState||js.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,l.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const S=yield I.auth._redirectUserForId(p.eventId);if(S)return I.user=S,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function gs(){return(gs=(0,l.Z)(function*(v,p){const m=qs(p),I=Gs(v);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(m));return yield I._remove(m),S})).apply(this,arguments)}function Hs(v,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,l.Z)(function*(v,p){return Gs(v)._set(qs(p),"true")})).apply(this,arguments)}function Yl(){js.clear()}function kn(v,p){js.set(v._key(),p)}function Gs(v){return Q(v._redirectPersistence)}function qs(v){return $("pendingRedirect",v.config.apiKey,v.name)}function Vn(v,p,m){return function Rn(v,p,m){return Zs.apply(this,arguments)}(v,p,m)}function Zs(){return(Zs=(0,l.Z)(function*(v,p,m){const I=pt(v);Ee(v,p,_r);const S=ps(I,m);return yield Hs(S,I),S._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function ui(v,p,m){return function b(v,p,m){return C.apply(this,arguments)}(v,p,m)}function C(){return(C=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v);Ee(I.auth,p,_r);const S=ps(I.auth,m);yield Hs(S,I.auth);const P=yield ft(I);return S._openRedirect(I.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function x(v,p,m){return function U(v,p,m){return W.apply(this,arguments)}(v,p,m)}function W(){return(W=(0,l.Z)(function*(v,p,m){const I=(0,B.m9)(v);Ee(I.auth,p,_r);const S=ps(I.auth,m);yield Di(!1,I,p.providerId),yield Hs(S,I.auth);const P=yield ft(I);return S._openRedirect(I.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function re(v,p){return _e.apply(this,arguments)}function _e(){return(_e=(0,l.Z)(function*(v,p){return yield pt(v)._initializationPromise,ze(v,p,!1)})).apply(this,arguments)}function ze(v,p){return ot.apply(this,arguments)}function ot(){return(ot=(0,l.Z)(function*(v,p,m=!1){const I=pt(v),S=ps(I,p),J=yield new yi(I,S,m).execute();return J&&!m&&(delete J.user._redirectEventId,yield I._persistUserIfCurrent(J.user),yield I._setRedirectUser(null,p)),J})).apply(this,arguments)}function ft(v){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(v){const p=wo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class wr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ot(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zs(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!zs(p)){const S=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Ne(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rr(p))}saveEventToCache(p){this.cachedEventUids.add(rr(p)),this.lastProcessedEventTime=Date.now()}}function rr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function zs({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Sr(v){return yr.apply(this,arguments)}function yr(){return(yr=(0,l.Z)(function*(v,p={}){return Rt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sh=/^https?/;function Mi(){return(Mi=(0,l.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Sr(v);for(const m of p)try{if(hy(m))return}catch{}Ke(v,"unauthorized-domain")})).apply(this,arguments)}function hy(v){const p=Fe(),{protocol:m,hostname:I}=new URL(p);if(v.startsWith("chrome-extension://")){const J=new URL(v);return""===J.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&J.hostname===I}if(!Sh.test(m))return!1;if(qr.test(v))return I===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const Bp=new qe(3e4,6e4);function xh(){const v=$n().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let jn=null;function Ws(v){return jn=jn||function T0(v){return new Promise((p,m)=>{var I,S,P;function J(){xh(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{xh(),m(Ne(v,"network-request-failed"))},timeout:Bp.get()})}if(null!==(S=null===(I=$n().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(P=$n().gapi)||void 0===P||!P.load){const Re=xo("iframefcb");return $n()[Re]=()=>{gapi.load?J():m(Ne(v,"network-request-failed"))},Vs(`https://apis.google.com/js/api.js?onload=${Re}`).catch(nt=>m(nt))}J()}}).catch(p=>{throw jn=null,p})}(v),jn}const Mh=new qe(5e3,15e3),Rh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function py(v){const p=v.config;te(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?dn(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},S=fy.get(v.config.apiHost);S&&(I.eid=S);const P=v._getFrameworks();return P.length&&(I.fw=P.join(",")),`${m}?${(0,B.xO)(I).slice(1)}`}function Ac(){return Ac=(0,l.Z)(function*(v){const p=yield Ws(v),m=$n().gapi;return te(m,v,"internal-error"),p.open({where:document.body,url:py(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rh,dontclear:!0},I=>new Promise(function(){var S=(0,l.Z)(function*(P,J){yield I.restyle({setHideOnLeave:!1});const Re=Ne(v,"network-request-failed"),nt=$n().setTimeout(()=>{J(Re)},Mh.get());function mt(){$n().clearTimeout(nt),P(I)}I.ping(mt).then(mt,()=>{J(Re)})});return function(P,J){return S.apply(this,arguments)}}()))}),Ac.apply(this,arguments)}const gy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sc{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function va(v,p,m,I,S,P){te(v.config.authDomain,v,"auth-domain-config-required"),te(v.config.apiKey,v,"invalid-api-key");const J={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:O.SDK_VERSION,eventId:S};if(p instanceof _r){p.setDefaultLanguage(v.languageCode),J.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,mt]of Object.entries(P||{}))J[nt]=mt}if(p instanceof ao){const nt=p.getScopes().filter(mt=>""!==mt);nt.length>0&&(J.scopes=nt.join(","))}v.tenantId&&(J.tid=v.tenantId);const Re=J;for(const nt of Object.keys(Re))void 0===Re[nt]&&delete Re[nt];return`${function Hp({config:v}){return v.emulator?dn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(Re).slice(1)}`}const _a="webStorageSupport",Ri=class gu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hs,this._completeRedirectFn=ze,this._overrideRedirectResult=kn}_openPopup(p,m,I,S){var P=this;return(0,l.Z)(function*(){var J;me(null===(J=P.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const Re=va(p,m,I,Fe(),S);return function S0(v,p,m,I=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),J=Math.max((window.screen.availWidth-I)/2,0).toString();let Re="";const nt=Object.assign(Object.assign({},gy),{width:I.toString(),height:S.toString(),top:P,left:J}),mt=(0,B.z$)().toLowerCase();m&&(Re=X(mt)?"_blank":m),M(mt)&&(p=p||"http://localhost",nt.scrollbars="yes");const jt=Object.entries(nt).reduce((ci,[vi,wa])=>`${ci}${vi}=${wa},`,"");if(function hn(v=(0,B.z$)()){var p;return ke(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(mt)&&"_self"!==Re)return function pu(v,p){const m=document.createElement("a");m.href=v,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",Re),new Sc(null);const vn=window.open(p||"",Re,jt);te(vn,v,"popup-blocked");try{vn.focus()}catch{}return new Sc(vn)}(p,Re,wo())})()}_openRedirect(p,m,I,S){var P=this;return(0,l.Z)(function*(){return yield P._originValidation(p),function Hl(v){$n().location.href=v}(va(p,m,I,Fe(),S)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:P}=this.eventManagers[m];return S?Promise.resolve(S):(me(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,l.Z)(function*(){const I=yield function jp(v){return Ac.apply(this,arguments)}(p),S=new wr(p);return I.register("authEvent",P=>(te(P?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=I,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(_a,{type:_a},S=>{var P;const J=null===(P=S?.[0])||void 0===P?void 0:P[_a];void 0!==J&&m(!!J),Ke(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Up(v){return Mi.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return fn()||L()||ke()}};class Oh extends class Ql{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return ae("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Oh(p)}_finalizeEnroll(p,m,I){return function Xa(v,p){return Rt(v,"POST","/v2/accounts/mfaEnrollment:finalize",$t(v,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Ao(v,p){return Rt(v,"POST","/v2/accounts/mfaSignIn:finalize",$t(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ph=(()=>{class v{constructor(){}static assertion(m){return Oh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var mu="@firebase/auth";class Gp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,l.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Jl=(0,B.Pz)("authIdTokenMaxAge")||300;let Zp=null;const Zr=v=>function(){var p=(0,l.Z)(function*(m){const I=m&&(yield m.getIdTokenResult()),S=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(S&&S>Jl)return;const P=I?.token;Zp!==P&&(Zp=P,yield fetch(v,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function kh(v=(0,O.getApp)()){const p=(0,O._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const m=function le(v,p){const m=(0,O._getProvider)(v,"auth");if(m.isInitialized()){const S=m.getImmediate(),P=m.getOptions();if((0,B.vZ)(P,p??{}))return S;Ke(S,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:Ri,persistence:[To,nr,hs]}),I=(0,B.Pz)("authTokenSyncURL");if(I){const P=Zr(I);(function Ja(v,p,m){(0,B.m9)(v).beforeAuthStateChanged(p,m)})(m,P,()=>P(m.currentUser)),function _c(v,p,m,I){(0,B.m9)(v).onIdTokenChanged(p,m,I)}(m,J=>P(J))}const S=(0,B.q4)("auth");return S&&Ss(m,`http://${S}`),m}!function _y(v){(0,O._registerComponent)(new pe.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:P,authDomain:J}=I.options;return((Re,nt)=>{te(P&&!P.includes(":"),"invalid-api-key",{appName:Re.name}),te(!J?.includes(":"),"argument-error",{appName:Re.name});const mt={apiKey:P,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(v)},jt=new no(Re,nt,mt);return function ie(v,p){const m=p?.persistence||[],I=(Array.isArray(m)?m:[m]).map(Q);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(I,p?.popupRedirectResolver)}(jt,m),jt})(I,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new pe.wA("auth-internal",p=>{const m=pt(p.getProvider("auth").getImmediate());return new Gp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(mu,"0.21.0",function vy(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(mu,"0.21.0","esm2017")}("Browser")},2090:(ct,Te,k)=>{k.d(Te,{$s:()=>Xe,BH:()=>Ft,G6:()=>Ee,L:()=>ce,LL:()=>Qt,Pz:()=>en,Sg:()=>qe,UG:()=>be,US:()=>pe,ZB:()=>j,ZR:()=>En,aH:()=>lt,b$:()=>fe,eu:()=>te,hl:()=>Ge,jU:()=>et,m9:()=>Kt,ne:()=>Dn,pd:()=>Cs,q4:()=>Fe,r3:()=>kr,ru:()=>ve,tV:()=>ge,uI:()=>Me,vZ:()=>Ye,w1:()=>Ke,xO:()=>wn,xb:()=>fi,z$:()=>Ue,zI:()=>ae,zd:()=>pr});const ne=function(H){const $=[];let z=0;for(let V=0;V<H.length;V++){let M=H.charCodeAt(V);M<128?$[z++]=M:M<2048?($[z++]=M>>6|192,$[z++]=63&M|128):55296==(64512&M)&&V+1<H.length&&56320==(64512&H.charCodeAt(V+1))?(M=65536+((1023&M)<<10)+(1023&H.charCodeAt(++V)),$[z++]=M>>18|240,$[z++]=M>>12&63|128,$[z++]=M>>6&63|128,$[z++]=63&M|128):($[z++]=M>>12|224,$[z++]=M>>6&63|128,$[z++]=63&M|128)}return $},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let M=0;M<H.length;M+=3){const L=H[M],X=M+1<H.length,Oe=X?H[M+1]:0,tt=M+2<H.length,ut=tt?H[M+2]:0;let Tt=(15&Oe)<<2|ut>>6,hn=63&ut;tt||(hn=64,X||(Tt=64)),V.push(z[L>>2],z[(3&L)<<4|Oe>>4],z[Tt],z[hn])}return V.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(ne(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let z=0,V=0;for(;z<H.length;){const M=H[z++];if(M<128)$[V++]=String.fromCharCode(M);else if(M>191&&M<224){const L=H[z++];$[V++]=String.fromCharCode((31&M)<<6|63&L)}else if(M>239&&M<365){const tt=((7&M)<<18|(63&H[z++])<<12|(63&H[z++])<<6|63&H[z++])-65536;$[V++]=String.fromCharCode(55296+(tt>>10)),$[V++]=String.fromCharCode(56320+(1023&tt))}else{const L=H[z++],X=H[z++];$[V++]=String.fromCharCode((15&M)<<12|(63&L)<<6|63&X)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const z=$?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let M=0;M<H.length;){const L=z[H.charAt(M++)],Oe=M<H.length?z[H.charAt(M)]:0;++M;const ut=M<H.length?z[H.charAt(M)]:64;++M;const ke=M<H.length?z[H.charAt(M)]:64;if(++M,null==L||null==Oe||null==ut||null==ke)throw Error();V.push(L<<2|Oe>>4),64!==ut&&(V.push(Oe<<4&240|ut>>2),64!==ke&&V.push(ut<<6&192|ke))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ce=function(H){return function(H){const $=ne(H);return pe.encodeByteArray($,!0)}(H).replace(/\./g,"")},ge=function(H){try{return pe.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function j(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const z in $)!$.hasOwnProperty(z)||!Y(z)||(H[z]=j(H[z],$[z]));return H}function Y(H){return"__proto__"!==H}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function ve(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){const H=Ue();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ee(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((H,$)=>{try{let z=!0;const V="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(V);M.onsuccess=()=>{M.result.close(),z||self.indexedDB.deleteDatabase(V),H(!0)},M.onupgradeneeded=()=>{z=!1},M.onerror=()=>{var L;$((null===(L=M.error)||void 0===L?void 0:L.message)||"")}}catch(z){$(z)}})}function ae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&ge(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Fe=H=>{var $,z;return null===(z=null===($=ie())||void 0===$?void 0:$.emulatorHosts)||void 0===z?void 0:z[H]},lt=()=>{var H;return null===(H=ie())||void 0===H?void 0:H.config},en=H=>{var $;return null===($=ie())||void 0===$?void 0:$[`_${H}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,z)=>{this.resolve=$,this.reject=z})}wrapCallback($){return(z,V)=>{z?this.reject(z):this.resolve(V),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(z):$(z,V))}}}function qe(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=$||"demo-project",M=H.iat||0,L=H.sub||H.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const X=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:M,exp:M+3600,auth_time:M,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(X)),""].join(".")}class En extends Error{constructor($,z,V){super(z),this.code=$,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}}class Qt{constructor($,z,V){this.service=$,this.serviceName=z,this.errors=V}create($,...z){const V=z[0]||{},M=`${this.service}/${$}`,L=this.errors[$],X=L?function Jt(H,$){return H.replace($t,(z,V)=>{const M=$[V];return null!=M?String(M):`<${V}?>`})}(L,V):"Error";return new En(M,`${this.serviceName}: ${X} (${M}).`,V)}}const $t=/\{\$([^}]+)}/g;function kr(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function fi(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Ye(H,$){if(H===$)return!0;const z=Object.keys(H),V=Object.keys($);for(const M of z){if(!V.includes(M))return!1;const L=H[M],X=$[M];if(Qn(L)&&Qn(X)){if(!Ye(L,X))return!1}else if(L!==X)return!1}for(const M of V)if(!z.includes(M))return!1;return!0}function Qn(H){return null!==H&&"object"==typeof H}function wn(H){const $=[];for(const[z,V]of Object.entries(H))Array.isArray(V)?V.forEach(M=>{$.push(encodeURIComponent(z)+"="+encodeURIComponent(M))}):$.push(encodeURIComponent(z)+"="+encodeURIComponent(V));return $.length?"&"+$.join("&"):""}function pr(H){const $={};return H.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[M,L]=V.split("=");$[decodeURIComponent(M)]=decodeURIComponent(L)}}),$}function Cs(H){const $=H.indexOf("?");if(!$)return"";const z=H.indexOf("#",$);return H.substring($,z>0?z:void 0)}function Dn(H,$){const z=new yn(H,$);return z.subscribe.bind(z)}class yn{constructor($,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{$(this)}).catch(V=>{this.error(V)})}next($){this.forEachObserver(z=>{z.next($)})}error($){this.forEachObserver(z=>{z.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,z,V){let M;if(void 0===$&&void 0===z&&void 0===V)throw new Error("Missing Observer.");M=function ht(H,$){if("object"!=typeof H||null===H)return!1;for(const z of $)if(z in H&&"function"==typeof H[z])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:z,complete:V},void 0===M.next&&(M.next=Ct),void 0===M.error&&(M.error=Ct),void 0===M.complete&&(M.complete=Ct);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),L}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,$)}sendOne($,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{z(this.observers[$])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ct(){}function Xe(H,$=1e3,z=2){const V=$*Math.pow(z,H),M=Math.round(.5*V*(Math.random()-.5)*2);return Math.min(144e5,V+M)}function Kt(H){return H&&H._delegate?H._delegate:H}},934:(ct,Te,k)=>{var l=k(4650);let B=null;function O(){return B}const he=new l.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ge(){return(0,l.LFG)(j)}()},providedIn:"platform"}),n})();const G=new l.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ue(){return new j((0,l.LFG)(he))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(Qe)},providedIn:"root"}),n})();const fe=new l.OlP("appBaseHref");let Qe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+et(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+et(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(fe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ke=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+et(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+et(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(fe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(Ge(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=et,n.joinWithSlash=Me,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(l.LFG(ve))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Se(){return new Ne((0,l.LFG)(ve))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}class Ms{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ms(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,h),Rs(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Rs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rs(n,e){n.context.$implicit=e.item}let On=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class dh{constructor(){this.$implicit=null,this.ngIf=null}}function Xn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let Pp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function co(n){return"server"===n}let Rl=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new hh((0,l.LFG)(he),window)}),n})();class hh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function gr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ls extends class Fl extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){B||(B=n)}(new ls)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ll(){return ds=ds||document.querySelector("base"),ds?ds.getAttribute("href"):null}();return null==t?null:function Ki(n){Pn=Pn||document.createElement("a"),Pn.setAttribute("href",n);const e=Pn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ds=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ic(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Pn,ds=null;const Mn=new l.OlP("TRANSITION_ID"),mc=[{provide:l.ip1,useFactory:function gc(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Mn,he,l.zs3],multi:!0}];let yc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const vc=new l.OlP("EventManagerPlugins");let _c=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(vc),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ja{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let vo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),_o=(()=>{class n extends vo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ul),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ul))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Ul(n){O().remove(n)}const Fs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bl=/%COMP%/g;function eu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?eu(n,o,t):(o=o.replace(Bl,n),t.push(o))}return t}function tu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let nu=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Yi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new jl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case l.ifc.ShadowDom:return new _h(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=eu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_c),l.LFG(_o),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Yi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Fs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(la(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(la(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Fs[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Fs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,o&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,tu(r)):this.eventManager.addEventListener(e,t,tu(r))}}function la(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jl extends Yi{constructor(e,t,r,o){super(e),this.component=r;const u=eu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Bn(n){return"_ngcontent-%COMP%".replace(Bl,n)}(o+"-"+r.id),this.hostAttr=function Xa(n){return"_nghost-%COMP%".replace(Bl,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class _h extends Yi{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=eu(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const g=document.createElement("style");g.textContent=u[h],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nr=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const wh=["alt","control","meta","shift"],hs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ec={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let da=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),h="code."),wh.forEach(D=>{const A=r.indexOf(D);A>-1&&(r.splice(A,1),h+=D+".")}),h+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=h,_}static matchEventFullKeyCode(t,r){let o=hs[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),wh.forEach(h=>{h!==o&&(0,Ec[h])(t)&&(u+=h+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ha=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Gl(){ls.makeCurrent()},multi:!0},{provide:he,useFactory:function bc(){return(0,l.RDi)(document),document},deps:[]}]),Ls=new l.OlP(""),fa=[{provide:l.rWj,useClass:class Vl{addToWindow(e){l.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const o=l.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const g=function(_){h=h||_,u--,0==u&&r(h)};o.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Io=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Qi(){return new l.qLn},deps:[]},{provide:vc,useClass:nr,multi:!0,deps:[he,l.R0b,l.Lbi]},{provide:vc,useClass:da,multi:!0,deps:[he]},{provide:nu,useClass:nu,deps:[_c,_o,l.AFp]},{provide:l.FYo,useExisting:nu},{provide:vo,useExisting:_o},{provide:_o,useClass:_o,deps:[he]},{provide:_c,useClass:_c,deps:[vc,l.R0b]},{provide:class lo{},useClass:yc,deps:[]},[]];let Eo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Mn,useExisting:l.AFp},mc]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ls,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...Io,...fa],imports:[Pp,l.hGG]}),n})(),Ti=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function pa(){return new Ti((0,l.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var cn=k(8996),Ji=k(7669);function rt(...n){const e=(0,Ji.yG)(n);return(0,cn.D)(n,e)}var Si=k(7579);class An extends Si.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Us=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Tr=k(9751);const{isArray:Bs}=Array,{getPrototypeOf:zl,prototype:Wl,keys:Th}=Object;function ps(n){if(1===n.length){const e=n[0];if(Bs(e))return{args:e,keys:null};if(function Kl(n){return n&&"object"==typeof n&&zl(n)===Wl}(e)){const t=Th(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var $s=k(4671),st=k(4004);const{isArray:Tc}=Array;function uu(n){return(0,st.U)(e=>function xi(n,e){return Tc(e)?n(...e):n(e)}(n,e))}function ga(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var ur=k(5403),ma=k(9672);function cu(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:o}=ps(n);if(0===r.length)return(0,cn.D)([],e);const u=new Tr.y(function ya(n,e,t=$s.y){return r=>{Ah(e,()=>{const{length:o}=n,u=new Array(o);let h=o,g=o;for(let _=0;_<o;_++)Ah(e,()=>{const D=(0,cn.D)(n[_],e);let A=!1;D.subscribe((0,ur.x)(r,N=>{u[_]=N,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>ga(o,h):$s.y));return t?u.pipe(uu(t)):u}function Ah(n,e,t){n?(0,ma.f)(t,n,e):e()}var Ro=k(8189);function No(...n){return function lu(){return(0,Ro.J)(1)}()((0,cn.D)(n,(0,Ji.yG)(n)))}var js=k(8421);function yi(n){return new Tr.y(e=>{(0,js.Xf)(n()).subscribe(e)})}var du=k(9635),gs=k(576);function Hs(n,e){const t=(0,gs.m)(n)?n:()=>n,r=o=>o.error(t());return new Tr.y(e?o=>e.schedule(r,0,o):r)}var Ar=k(515),Yl=k(727),kn=k(4482);function Gs(){return(0,kn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ur.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qs extends Tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ur.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yl.w0.EMPTY)}return e}refCount(){return Gs()(this)}}function Vn(n,e){return(0,kn.e)((t,r)=>{let o=null,u=0,h=!1;const g=()=>h&&!o&&r.complete();t.subscribe((0,ur.x)(r,_=>{o?.unsubscribe();let D=0;const A=u++;(0,js.Xf)(n(_,A)).subscribe(o=(0,ur.x)(r,N=>r.next(e?e(_,N,A,D++):N),()=>{o=null,g()}))},()=>{h=!0,g()}))})}function Rn(n){return n<=0?()=>Ar.E:(0,kn.e)((e,t)=>{let r=0;e.subscribe((0,ur.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Zs(...n){const e=(0,Ji.yG)(n);return(0,kn.e)((t,r)=>{(e?No(n,t,e):No(n,t)).subscribe(r)})}function ui(n,e){return(0,kn.e)((t,r)=>{let o=0;t.subscribe((0,ur.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var b=k(5577);function C(n){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function x(n=U){return(0,kn.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function U(){return new Us}function W(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((o,u)=>n(o,u,r)):$s.y,Rn(1),t?C(e):x(()=>new Us))}function re(n,e){return(0,gs.m)(e)?(0,b.z)(n,e,1):(0,b.z)(n,1)}var _e=k(8505);function ze(n){return(0,kn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,ur.x)(t,void 0,void 0,h=>{u=(0,js.Xf)(n(h,ze(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function ot(n,e,t,r,o){return(u,h)=>{let g=t,_=e,D=0;u.subscribe((0,ur.x)(h,A=>{const N=D++;_=g?n(_,A,N):(g=!0,A),r&&h.next(_)},o&&(()=>{g&&h.next(_),h.complete()})))}}function ft(n,e){return(0,kn.e)(ot(n,e,arguments.length>=2,!0))}function Nt(n){return n<=0?()=>Ar.E:(0,kn.e)((e,t)=>{let r=[];e.subscribe((0,ur.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function wt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((o,u)=>n(o,u,r)):$s.y,Nt(1),t?C(e):x(()=>new Us))}function zs(n){return(0,kn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",Sr=Symbol("RouteTitle");class yr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qr(n){return new yr(n)}function Sh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],g=n[u];if(h.startsWith(":"))o[h.substring(1)]=g;else if(h!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!hy(n[o],e[o]))return!1;return!0}function hy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Bp(n){return Array.prototype.concat.apply([],n)}function xh(n){return n.length>0?n[n.length-1]:null}function jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ws(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,cn.D)(Promise.resolve(n)):rt(n)}const A0={exact:function jp(n,e,t){if(!pu(n.segments,e.segments)||!hu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!jp(n.children[r],e.children[r],t))return!1;return!0},subset:gy},Rh={exact:function py(n,e){return Mi(n,e)},subset:function Ac(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hy(n[t],e[t]))},ignored:()=>!0};function fy(n,e,t){return A0[t.paths](n.root,e.root,t.matrixParams)&&Rh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gy(n,e,t){return my(n,e,e.segments,t)}function my(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!pu(o,t)||e.hasChildren()||!hu(o,t,r))}if(n.segments.length===t.length){if(!pu(n.segments,t)||!hu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!gy(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(pu(n.segments,o)&&hu(n.segments,o,r)&&n.children[Ot])&&my(n.children[Ot],e,u,r)}}function hu(n,e,t){return e.every((r,o)=>Rh[t](n[o].parameters,r.parameters))}class fu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qr(this.queryParams)),this._queryParamMap}toString(){return Hp.serialize(this)}}class Wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _a(this)}}class Sc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qr(this.parameters)),this._parameterMap}toString(){return Gp(this)}}function pu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Nh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new va},providedIn:"root"}),n})();class va{parse(e){const t=new p(e);return new fu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gu(e.root,!0)}`,r=function _y(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ql(t)}=${Ql(o)}`).join("&"):`${Ql(t)}=${Ql(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Oh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hp=new va;function _a(n){return n.segments.map(e=>Gp(e)).join("/")}function gu(n,e){if(!n.hasChildren())return _a(n);if(e){const t=n.children[Ot]?gu(n.children[Ot],!1):"",r=[];return jn(n.children,(o,u)=>{u!==Ot&&r.push(`${u}:${gu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function yy(n,e){let t=[];return jn(n.children,(r,o)=>{o===Ot&&(t=t.concat(e(r,o)))}),jn(n.children,(r,o)=>{o!==Ot&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ot?[gu(n.children[Ot],!1)]:[`${o}:${gu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${_a(n)}/${t[0]}`:`${_a(n)}/(${t.join("//")})`}}function Ri(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ql(n){return Ri(n).replace(/%3B/gi,";")}function Ph(n){return Ri(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mu(n){return decodeURIComponent(n)}function xc(n){return mu(n.replace(/\+/g,"%20"))}function Gp(n){return`${Ph(n.path)}${function vy(n){return Object.keys(n).map(e=>`;${Ph(e)}=${Ph(n[e])}`).join("")}(n.parameters)}`}const qp=/^[^\/()?;=#]+/;function Jl(n){const e=n.match(qp);return e?e[0]:""}const Zp=/^[^=?&#]+/,kh=/^[^&#]+/;class p{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Wt(e,t)),r}parseSegment(){const e=Jl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new Sc(mu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Jl(this.remaining);o&&(r=o,this.capture(r))}e[mu(t)]=mu(r)}parseQueryParam(e){const t=function Zr(n){const e=n.match(Zp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function v(n){const e=n.match(kh);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=xc(t),u=xc(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jl(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new l.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ot);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Ot]:new Wt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function m(n){return n.segments.length>0?new Wt([],{[Ot]:n}):n}function I(n){const e={};for(const r of Object.keys(n.children)){const u=I(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function S(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Wt(n.segments.concat(e.segments),e.children)}return n}(new Wt(n.segments,e))}function P(n){return n instanceof fu}const J=!1;function jt(n,e,t,r,o){if(0===t.length)return vi(e.root,e.root,e.root,r,o);const u=function Xl(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Mc(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return jn(u.outlets,(_,D)=>{g[D]="string"==typeof _?_.split("/"):_}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new Mc(t,e,r)}(t);return u.toRoot()?vi(e.root,e.root,new Wt([],{}),r,o):function h(_){const D=function Ia(n,e,t,r){if(n.isAbsolute)return new Oo(e.root,!0,0);if(-1===r)return new Oo(t,t===e.root,0);return function Fh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new l.vHH(4005,J);o=r.segments.length}return new Oo(r,!1,o-u)}(t,r+(vn(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),A=D.processChildren?Po(D.segmentGroup,D.index,u.commands):Ea(D.segmentGroup,D.index,u.commands);return vi(e.root,D.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function vn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ci(n){return"object"==typeof n&&null!=n&&n.outlets}function vi(n,e,t,r,o){let h,u={};r&&jn(r,(_,D)=>{u[D]=Array.isArray(_)?_.map(A=>`${A}`):`${_}`}),h=n===e?t:wa(n,e,t);const g=m(I(h));return new fu(g,u,o)}function wa(n,e,t){const r={};return jn(n.children,(o,u)=>{r[u]=o===e?t:wa(o,e,t)}),new Wt(n.segments,r)}class Mc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vn(r[0]))throw new l.vHH(4003,J);const o=r.find(ci);if(o&&o!==xh(r))throw new l.vHH(4004,J)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Oo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ea(n,e,t){if(n||(n=new Wt([],{})),0===n.segments.length&&n.hasChildren())return Po(n,e,t);const r=function Kp(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],g=t[r];if(ci(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!wy(_,D,h))return u;r+=2}else{if(!wy(_,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Wt(n.segments.slice(0,r.pathIndex),{});return u.children[Ot]=new Wt(n.segments.slice(r.pathIndex),n.children),Po(u,0,o)}return r.match&&0===o.length?new Wt(n.segments,{}):r.match&&!n.hasChildren()?ed(n,e,t):r.match?Po(n,0,o):ed(n,e,t)}function Po(n,e,t){if(0===t.length)return new Wt(n.segments,{});{const r=function Wp(n){return ci(n[0])?n[0].outlets:{[Ot]:n}}(t),o={};return jn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=Ea(n.children[h],e,u))}),jn(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new Wt(n.segments,o)}}function ed(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(ci(u)){const _=yu(u.outlets);return new Wt(r,_)}if(0===o&&vn(t[0])){r.push(new Sc(n.segments[e].path,Yp(t[0]))),o++;continue}const h=ci(u)?u.outlets[Ot]:`${u}`,g=o<t.length-1?t[o+1]:null;h&&g&&vn(g)?(r.push(new Sc(h,Yp(g))),o+=2):(r.push(new Sc(h,{})),o++)}return new Wt(r,{})}function yu(n){const e={};return jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ed(new Wt([],{}),0,t))}),e}function Yp(n){const e={};return jn(n,(t,r)=>e[r]=`${t}`),e}function wy(n,e,t){return n==t.path&&Mi(e,t.parameters)}class ba{constructor(e,t){this.id=e,this.url=t}}class Lh extends ba{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rc extends ba{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qp extends ba{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class x0 extends ba{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wb extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ib extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eb extends ba{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class M0 extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iy extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ey{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Db{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class by{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Dy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=k0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return k0(e,this._root).map(t=>t.value)}}function Dy(n,e){if(n===e.value)return e;for(const t of e.children){const r=Dy(n,t);if(r)return r}return null}function k0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=k0(n,t);if(r.length)return r.unshift(e),r}return[]}class ms{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function td(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Cy extends by{constructor(e,t){super(e),this.snapshot=t,Vh(this,e)}toString(){return this.snapshot.toString()}}function Ty(n,e){const t=function F0(n,e){const h=new Nc([],{},{},"",{},Ot,e,null,n.root,-1,{});return new Sy("",new ms(h,[]))}(n,e),r=new An([new Sc("",{})]),o=new An({}),u=new An({}),h=new An({}),g=new An(""),_=new ys(r,o,h,g,u,Ot,e,t.root);return _.snapshot=t.root,new Cy(new ms(_,[]),t)}class ys{constructor(e,t,r,o,u,h,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=g,this.title=this.data?.pipe((0,st.U)(D=>D[Sr]))??rt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>qr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>qr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ay(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Jp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Nc{constructor(e,t,r,o,u,h,g,_,D,A,N,q){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=g,this.title=this.data?.[Sr],this.routeConfig=_,this._urlSegment=D,this._lastPathIndex=A,this._correctedLastPathIndex=q??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sy extends by{constructor(e,t){super(t),this.url=e,Vh(this,t)}toString(){return Xp(this._root)}}function Vh(n,e){e.value._routerState=n,e.children.forEach(t=>Vh(n,t))}function Xp(n){const e=n.children.length>0?` { ${n.children.map(Xp).join(", ")} } `:"";return`${n.value}${e}`}function Uh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mi(e.params,t.params)||n.params.next(t.params),function Up(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Oc(n,e){const t=Mi(n.params,e.params)&&function S0(n,e){return pu(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Oc(n.parent,e.parent))}function nd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Tb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return nd(n,r,o);return nd(n,r)})}(n,e,t);return new ms(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(g=>nd(n,g)),h}}const r=function Ab(n){return new ys(new An(n.url),new An(n.params),new An(n.queryParams),new An(n.fragment),new An(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>nd(n,u));return new ms(r,o)}}const eg="ngNavigationCancelingError";function tg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=P(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Bh(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Bh(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[eg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ng(n){return _u(n)&&P(n.url)}function _u(n){return n&&n[eg]}class Sb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new $h,this.attachRef=null}}let $h=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Sb,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xy=!1;let My=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=o||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,xy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,xy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,xy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,xy);this._activatedRoute=t;const o=this.location,h=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new Ry(t,g,o.injector);if(r&&function xb(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(h);this.activated=o.createComponent(D,o.length,_)}else this.activated=o.createComponent(h,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($h),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Ry{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ys?this.route:e===$h?this.childContexts:this.parent.get(e,t)}}let rg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[My],encapsulation:2}),n})();function jh(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ny(n){const e=n.children&&n.children.map(Ny),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=rg),t}function vs(n){return n.outlet||Ot}function Da(n,e){const t=n.filter(r=>vs(r)===e);return t.push(...n.filter(r=>vs(r)!==e)),t}function Ca(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class HA{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Uh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=td(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),jn(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=td(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=td(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=td(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new O0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Db(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Uh(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(g.contexts),h.attachRef=g.componentRef,h.route=g.route.value,h.outlet&&h.outlet.attach(g.componentRef,g.route.value),Uh(g.route.value),this.activateChildRoutes(e,null,h.children)}else{const g=Ca(o.snapshot),_=g?.get(l._Vd)??null;h.attachRef=null,h.route=o,h.resolver=_,h.injector=g,h.outlet&&h.outlet.activateWith(o,h.injector),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class Lb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Oy{constructor(e,t){this.component=e,this.route=t}}function GA(n,e,t){const r=n._root;return Hh(r,e?e._root:null,t,[r.value])}function Pc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function Hh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=td(e);return n.children.forEach(h=>{(function Vb(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const _=function Ub(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pu(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oc(n,e)||!Mi(n.queryParams,e.queryParams);default:return!Oc(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new Lb(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Hh(n,e,u.component?g?g.children:null:t,r,o),_&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new Oy(g.outlet.component,h))}else h&&Gh(e,g,o),o.canActivateChecks.push(new Lb(r)),Hh(n,null,u.component?g?g.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),jn(u,(h,g)=>Gh(h,t.getContext(g),o)),o}function Gh(n,e,t){const r=td(n),o=n.value;jn(r,(u,h)=>{Gh(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Oy(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function kc(n){return"function"==typeof n}function Zh(n){return n instanceof Us||"EmptyError"===n?.name}const rd=Symbol("INITIAL_VALUE");function zh(){return Vn(n=>cu(n.map(e=>e.pipe(Rn(1),Zs(rd)))).pipe((0,st.U)(e=>{for(const t of e)if(!0!==t){if(t===rd)return rd;if(!1===t||t instanceof fu)return t}return!0}),ui(e=>e!==rd),Rn(1)))}function og(n){return(0,du.z)((0,_e.b)(e=>{if(P(e))throw tg(0,e)}),(0,st.U)(e=>!0===e))}const cr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H0(n,e,t,r,o){const u=Py(n,e,t);return u.matched?function qb(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?rt(o.map(h=>{const g=Pc(h,n);return Ws(function ZA(n){return n&&kc(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(zh(),og()):rt(!0)}(r=jh(e,r),e,t).pipe((0,st.U)(h=>!0===h?u:{...cr})):rt(u)}function Py(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cr}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Sh)(t,n,e);if(!o)return{...cr};const u={};jn(o.posParams,(g,_)=>{u[_]=g.path});const h=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:h,positionalParamSegments:o.posParams??{}}}function id(n,e,t,r,o="corrected"){if(t.length>0&&function zb(n,e,t){return t.some(r=>ag(n,e,r)&&vs(r)!==Ot)}(n,t,r)){const h=new Wt(e,function Zb(n,e,t,r){const o={};o[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&vs(u)!==Ot){const h=new Wt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[vs(u)]=h}return o}(n,e,r,new Wt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function Wb(n,e,t){return t.some(r=>ag(n,e,r))}(n,t,r)){const h=new Wt(n.segments,function G0(n,e,t,r,o,u){const h={};for(const g of r)if(ag(n,t,g)&&!o[vs(g)]){const _=new Wt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[vs(g)]=_}return{...o,...h}}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new Wt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ag(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function q0(n,e,t,r){return!!(vs(n)===r||r!==Ot&&ag(e,t,n))&&("**"===n.path||Py(e,n,t).matched)}function Kb(n,e,t){return 0===e.length&&!n.children[t]}const ky=!1;class wu{constructor(e){this.segmentGroup=e||null}}class ug{constructor(e){this.urlTree=e}}function sd(n){return Hs(new wu(n))}function Fy(n){return Hs(new ug(n))}class W0{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=id(this.urlTree.root,[],[],this.config).segmentGroup,t=new Wt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,st.U)(u=>this.createUrlTree(I(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ze(u=>{if(u instanceof ug)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof wu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,st.U)(o=>this.createUrlTree(I(o),e.queryParams,e.fragment))).pipe(ze(o=>{throw o instanceof wu?this.noMatchError(o):o}))}noMatchError(e){return new l.vHH(4002,ky)}createUrlTree(e,t,r){const o=m(e);return new fu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,st.U)(u=>new Wt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,cn.D)(o).pipe(re(u=>{const h=r.children[u],g=Da(t,u);return this.expandSegmentGroup(e,g,h,u).pipe((0,st.U)(_=>({segment:_,outlet:u})))}),ft((u,h)=>(u[h.outlet]=h.segment,u),{}),wt())}expandSegment(e,t,r,o,u,h){return(0,cn.D)(r).pipe(re(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,h).pipe(ze(D=>{if(D instanceof wu)return rt(null);throw D}))),W(g=>!!g),ze((g,_)=>{if(Zh(g))return Kb(t,o,u)?rt(new Wt([],{})):sd(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,h,g){return q0(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):sd(t):sd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Fy(u):this.lineralizeSegments(r,u).pipe((0,b.z)(h=>{const g=new Wt(h,{});return this.expandSegment(e,g,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:A}=Py(t,o,u);if(!g)return sd(t);const N=this.applyRedirectCommands(_,o.redirectTo,A);return o.redirectTo.startsWith("/")?Fy(N):this.lineralizeSegments(o,N).pipe((0,b.z)(q=>this.expandSegment(e,t,r,q.concat(D),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=jh(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,st.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Wt(o,{})))):rt(new Wt(o,{}))):H0(t,r,o,e).pipe(Vn(({matched:h,consumedSegments:g,remainingSegments:_})=>h?this.getChildConfig(e=r._injector??e,r,o).pipe((0,b.z)(A=>{const N=A.injector??e,q=A.routes,{segmentGroup:se,slicedSegments:ye}=id(t,g,_,q),Be=new Wt(se.segments,se.children);if(0===ye.length&&Be.hasChildren())return this.expandChildren(N,q,Be).pipe((0,st.U)(Ut=>new Wt(g,Ut)));if(0===q.length&&0===ye.length)return rt(new Wt(g,{}));const He=vs(r)===u;return this.expandSegment(N,Be,q,ye,He?Ot:u,!0).pipe((0,st.U)(Zt=>new Wt(g.concat(Zt.segments),Zt.children)))})):sd(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gb(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?rt(!0):rt(o.map(h=>{const g=Pc(h,n);return Ws(function qh(n){return n&&kc(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(zh(),og())}(e,t,r).pipe((0,b.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,_e.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Yb(n){return Hs(Bh(ky,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return rt(r);if(o.numberOfChildren>1||!o.children[Ot])return Hs(new l.vHH(4e3,ky));o=o.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new fu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return jn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return jn(t.children,(g,_)=>{h[_]=this.createSegmentGroup(e,g,r,o)}),new Wt(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new l.vHH(4001,ky);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class Qb{}class Y0{constructor(e,t,r,o,u,h,g,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=g,this.urlSerializer=_}recognize(){const e=id(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,st.U)(t=>{if(null===t)return null;const r=new Nc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ms(r,t),u=new Sy(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Ay(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,cn.D)(Object.keys(r.children)).pipe(re(o=>{const u=r.children[o],h=Da(t,o);return this.processSegmentGroup(e,h,u,o)}),ft((o,u)=>o&&u?(o.push(...u),o):null),function wr(n,e=!1){return(0,kn.e)((t,r)=>{let o=0;t.subscribe((0,ur.x)(r,u=>{const h=n(u,o++);(h||e)&&r.next(u),!h&&r.complete()}))})}(o=>null!==o),C(null),wt(),(0,st.U)(o=>{if(null===o)return null;const u=Wh(o);return function Fc(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,cn.D)(t).pipe(re(h=>this.processSegmentAgainstRoute(h._injector??e,h,r,o,u)),W(h=>!!h),ze(h=>{if(Zh(h))return Kb(r,o,u)?rt([]):rt(null);throw h}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!q0(t,r,o,u))return rt(null);let h;if("**"===t.path){const g=o.length>0?xh(o).parameters:{},_=Kh(r)+o.length;h=rt({snapshot:new Nc(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$y(t),vs(t),t.component??t._loadedComponent??null,t,cg(r),_,lg(t),_),consumedSegments:[],remainingSegments:[]})}else h=H0(r,t,o,e).pipe((0,st.U)(({matched:g,consumedSegments:_,remainingSegments:D,parameters:A})=>{if(!g)return null;const N=Kh(r)+_.length;return{snapshot:new Nc(_,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$y(t),vs(t),t.component??t._loadedComponent??null,t,cg(r),N,lg(t),N),consumedSegments:_,remainingSegments:D}}));return h.pipe(Vn(g=>{if(null===g)return rt(null);const{snapshot:_,consumedSegments:D,remainingSegments:A}=g;e=t._injector??e;const N=t._loadedInjector??e,q=function Jb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:se,slicedSegments:ye}=id(r,D,A,q.filter(He=>void 0===He.redirectTo),this.relativeLinkResolution);if(0===ye.length&&se.hasChildren())return this.processChildren(N,q,se).pipe((0,st.U)(He=>null===He?null:[new ms(_,He)]));if(0===q.length&&0===ye.length)return rt([new ms(_,[])]);const Be=vs(t)===u;return this.processSegment(N,q,se,ye,Be?Ot:u).pipe((0,st.U)(He=>null===He?null:[new ms(_,He)]))}))}}function By(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Wh(n){const e=[],t=new Set;for(const r of n){if(!By(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Wh(r.children);e.push(new ms(r.value,o))}return e.filter(r=>!t.has(r))}function cg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kh(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function $y(n){return n.data||{}}function lg(n){return n.resolve||{}}function J0(n){return"string"==typeof n.title||null===n.title}function jy(n){return Vn(e=>{const t=n(e);return t?(0,cn.D)(t).pipe((0,st.U)(()=>e)):rt(e)})}let dg=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[Sr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(X0)},providedIn:"root"}),n})(),X0=(()=>{class n extends dg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ti))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sD{}class KA extends class ew{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Eu=new l.OlP("",{providedIn:"root",factory:()=>({})}),bu=new l.OlP("ROUTES");let Lc=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ws(t.loadComponent()).pipe((0,_e.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),zs(()=>{this.componentLoaders.delete(t)})),o=new qs(r,()=>new Si.x).pipe(Gs());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,st.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D,A=!1;Array.isArray(g)?D=g:(_=g.create(t).injector,D=Bp(_.get(bu,[],l.XFs.Self|l.XFs.Optional)));return{routes:D.map(Ny),injector:_}}),zs(()=>{this.childrenLoaders.delete(r)})),h=new qs(u,()=>new Si.x).pipe(Gs());return this.childrenLoaders.set(r,h),h}loadModuleFactoryOrRoutes(t){return Ws(t()).pipe((0,b.z)(r=>r instanceof l.YKP||Array.isArray(r)?rt(r):(0,cn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aD{}class YA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uD(n){throw n}function cD(n,e,t){return e.parse("/")}const lD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function hg(){const n=(0,l.f3M)(Nh),e=(0,l.f3M)($h),t=(0,l.f3M)(Ne),r=(0,l.f3M)(l.zs3),o=(0,l.f3M)(l.Sil),u=(0,l.f3M)(bu,{optional:!0})??[],h=(0,l.f3M)(Eu,{optional:!0})??{},g=(0,l.f3M)(X0),_=(0,l.f3M)(dg,{optional:!0}),D=(0,l.f3M)(aD,{optional:!0}),A=(0,l.f3M)(sD,{optional:!0}),N=new gn(null,n,e,t,r,o,Bp(u));return D&&(N.urlHandlingStrategy=D),A&&(N.routeReuseStrategy=A),N.titleStrategy=_??g,function rw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,N),N}let gn=(()=>{class n{constructor(t,r,o,u,h,g,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Si.x,this.errorHandler=uD,this.malformedUriErrorHandler=cD,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new YA,this.routeReuseStrategy=new KA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=h.get(Lc),this.configLoader.onLoadEndListener=q=>this.triggerEvent(new Ey(q)),this.configLoader.onLoadStartListener=q=>this.triggerEvent(new R0(q)),this.ngModule=h.get(l.h0i),this.console=h.get(l.c2e);const N=h.get(l.R0b);this.isNgZoneEnabled=N instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function $p(){return new fu(new Wt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ty(this.currentUrlTree,this.rootComponentType),this.transitions=new An({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ui(o=>0!==o.id),(0,st.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vn(o=>{let u=!1,h=!1;return rt(o).pipe((0,_e.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(g=>{const _=this.browserUrlTree.toString(),D=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return fg(g.source)&&(this.browserUrlTree=g.extractedUrl),rt(g).pipe(Vn(N=>{const q=this.transitions.getValue();return r.next(new Lh(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),q!==this.transitions.getValue()?Ar.E:Promise.resolve(N)}),function Ly(n,e,t,r){return Vn(o=>function z0(n,e,t,r,o){return new W0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,st.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_e.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function eD(n,e,t,r,o,u){return(0,b.z)(h=>function K0(n,e,t,r,o,u,h="emptyOnly",g="legacy"){return new Y0(n,e,t,r,o,h,g,u).recognize().pipe(Vn(_=>null===_?function Uy(n){return new Tr.y(e=>e.error(n))}(new Qb):rt(_)))}(n,e,t,h.urlAfterRedirects,r.serialize(h.urlAfterRedirects),r,o,u).pipe((0,st.U)(g=>({...h,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_e.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const se=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(se,N)}this.browserUrlTree=N.urlAfterRedirects}const q=new wb(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(q)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:se,source:ye,restoredState:Be,extras:He}=g,Gt=new Lh(q,this.serializeUrl(se),ye,Be);r.next(Gt);const Zt=Ty(se,this.rootComponentType).snapshot;return rt(o={...g,targetSnapshot:Zt,urlAfterRedirects:se,extras:{...He,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),Ar.E}),(0,_e.b)(g=>{const _=new Ib(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,st.U)(g=>o={...g,guards:GA(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function WA(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?rt({...t,guardsResult:!0}):function $0(n,e,t,r){return(0,cn.D)(n).pipe((0,b.z)(o=>function sg(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?rt(u.map(g=>{const _=Ca(e)??o,D=Pc(g,_);return Ws(function B0(n){return n&&kc(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(W())})).pipe(zh()):rt(!0)}(o.component,o.route,t,e,r)),W(o=>!0!==o,!0))}(h,r,o,n).pipe((0,b.z)(g=>g&&function Ta(n){return"boolean"==typeof n}(g)?function Bb(n,e,t,r){return(0,cn.D)(e).pipe(re(o=>No(function jb(n,e){return null!==n&&e&&e(new bb(n)),rt(!0)}(o.route.parent,r),function $b(n,e){return null!==n&&e&&e(new N0(n)),rt(!0)}(o.route,r),function j0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function qA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>yi(()=>rt(h.guards.map(_=>{const D=Ca(h.node)??t,A=Pc(_,D);return Ws(function U0(n){return n&&kc(n.canActivateChild)}(A)?A.canActivateChild(r,n):D.runInContext(()=>A(r,n))).pipe(W())})).pipe(zh())));return rt(u).pipe(zh())}(n,o.path,t),function Hb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const o=r.map(u=>yi(()=>{const h=Ca(e)??t,g=Pc(u,h);return Ws(function V0(n){return n&&kc(n.canActivate)}(g)?g.canActivate(e,n):h.runInContext(()=>g(e,n))).pipe(W())}));return rt(o).pipe(zh())}(n,o.route,t))),W(o=>!0!==o,!0))}(r,u,n,e):rt(g)),(0,st.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,_e.b)(g=>{if(o.guardsResult=g.guardsResult,P(g.guardsResult))throw tg(0,g.guardsResult);const _=new Eb(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),ui(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),jy(g=>{if(g.guards.canActivateChecks.length)return rt(g).pipe((0,_e.b)(_=>{const D=new M0(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(D)}),Vn(_=>{let D=!1;return rt(_).pipe(function tD(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return rt(t);let u=0;return(0,cn.D)(o).pipe(re(h=>function Q0(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!J0(o)&&(u[Sr]=o.title),function od(n,e,t,r){const o=function nD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return rt({});const u={};return(0,cn.D)(o).pipe((0,b.z)(h=>function rD(n,e,t,r){const o=Ca(e)??r,u=Pc(n,o);return Ws(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[h],e,t,r).pipe(W(),(0,_e.b)(g=>{u[h]=g}))),Nt(1),function rr(n){return(0,st.U)(()=>n)}(u),ze(h=>Zh(h)?Ar.E:Hs(h)))}(u,n,e,r).pipe((0,st.U)(h=>(n._resolvedData=h,n.data=Ay(n,t).resolve,o&&J0(o)&&(n.data[Sr]=o.title),null)))}(h.route,r,n,e)),(0,_e.b)(()=>u++),Nt(1),(0,b.z)(h=>u===o.length?rt(t):Ar.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_e.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,_e.b)(_=>{const D=new Iy(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(D)}))}),jy(g=>{const _=D=>{const A=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,_e.b)(N=>{D.component=N}),(0,st.U)(()=>{})));for(const N of D.children)A.push(..._(N));return A};return cu(_(g.targetSnapshot.root)).pipe(C(),Rn(1))}),jy(()=>this.afterPreactivation()),(0,st.U)(g=>{const _=function Cb(n,e,t){const r=nd(n,e._root,t?t._root:void 0);return new Cy(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o={...g,targetRouterState:_}}),(0,_e.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(r=>(new HA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,_e.b)({next(){u=!0},complete(){u=!0}}),zs(()=>{u||h||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ze(g=>{if(h=!0,_u(g)){ng(g)||(this.navigated=!0,this.restoreHistory(o,!0));const _=new Qp(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(_),ng(g)){const D=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fg(o.source)};this.scheduleNavigation(D,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const _=new x0(o.id,this.serializeUrl(o.extractedUrl),g,o.targetSnapshot??void 0);r.next(_);try{o.resolve(this.errorHandler(g))}catch(D){o.reject(D)}}return Ar.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Ny),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:g,preserveFragment:_}=r,D=o||this.routerState.root,A=_?this.currentUrlTree.fragment:h;let N=null;switch(g){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),jt(D,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=P(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function dD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...lD}:!1===r?{...nw}:r,P(t))return fy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return fy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Rc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){if(this.disposed)return Promise.resolve(!1);let g,_,D;h?(g=h.resolve,_=h.reject,D=h.promise):D=new Promise((q,se)=>{g=q,_=se});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(q=>Promise.reject(q))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Qp(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return hg()},providedIn:"root"}),n})();function fg(n){return"imperative"!==n}let _s=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Si.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(ys),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),Qh=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Si.x,this.subscription=t.events.subscribe(u=>{u instanceof Rc&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){return!!(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(ys),l.Y36(ve))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class iw{}let pD=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof Rc),re(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,l.MMx)(u.providers,t,`Route: ${u.path}`));const h=u._injector??t,g=u._loadedInjector??h;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(h,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,cn.D)(o).pipe((0,Ro.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const u=o.pipe((0,b.z)(h=>null===h?rt(void 0):(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,this.processRoutes(h.injector??t,h.routes))));if(r.loadComponent&&!r._loadedComponent){const h=this.loader.loadComponent(r);return(0,cn.D)([u,h]).pipe((0,Ro.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gn),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(iw),l.LFG(Lc))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Du=new l.OlP("");let ko=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Lh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Jh(n,e){return{\u0275kind:n,\u0275providers:e}}function gg(n){return[{provide:bu,multi:!0,useValue:n}]}function Hy(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(gn),o=n.get(mD);1===n.get(mg)&&r.initialNavigation(),n.get(ow,null,l.XFs.Optional)?.setUpPreloading(),n.get(Du,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const mD=new l.OlP("",{factory:()=>new Si.x}),mg=new l.OlP("",{providedIn:"root",factory:()=>1});const ow=new l.OlP("");function Ks(n){return Jh(0,[{provide:ow,useExisting:pD},{provide:iw,useExisting:n}])}const aw=new l.OlP("ROUTER_FORROOT_GUARD"),_D=[Ne,{provide:Nh,useClass:va},{provide:gn,useFactory:hg},$h,{provide:ys,useFactory:function gD(n){return n.routerState.root},deps:[gn]},Lc];function wD(){return new l.PXZ("Router",gn)}let Gy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_D,[],gg(t),{provide:aw,useFactory:Lt,deps:[[gn,new l.FiY,new l.tp0]]},{provide:Eu,useValue:r||{}},r?.useHash?{provide:ve,useClass:Ke}:{provide:ve,useClass:Qe},{provide:Du,useFactory:()=>{const n=(0,l.f3M)(gn),e=(0,l.f3M)(Rl),t=(0,l.f3M)(Eu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ko(n,e,t)}},r?.preloadingStrategy?Ks(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:wD},r?.initialNavigation?uw(r):[],[{provide:qy,useFactory:Hy},{provide:l.tb,multi:!0,useExisting:qy}]]}}static forChild(t){return{ngModule:n,providers:[gg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(aw,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[rg]}),n})();function Lt(n){return"guarded"}function uw(n){return["disabled"===n.initialNavigation?Jh(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(gn);return()=>{e.setUpLocationChangeListener()}}},{provide:mg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jh(2,[{provide:mg,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(G,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const h=e.get(gn),g=e.get(mD);(function o(u){e.get(gn).events.pipe(ui(g=>g instanceof Rc||g instanceof Qp||g instanceof x0),(0,st.U)(g=>g instanceof Rc||g instanceof Qp&&(0===g.code||1===g.code)&&null),ui(g=>null!==g),Rn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),h.afterPreactivation=()=>(u(!0),r||g.closed?rt(void 0):g),h.initialNavigation()}))}}]).\u0275providers:[]]}const qy=new l.OlP("");var DD=k(4986),In=k(2122);function Zy(){return(0,kn.e)((n,e)=>{let t,r=!1;n.subscribe((0,ur.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function CD(n,e){return n===e}var yt,Ys=k(2011),dw=(k(9568),k(3942)),we=k(5861),es=k(9681),yg=k(4859),Fo=k(1877),sn=k(2090),TD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cu={},hw=hw||{},Pt=TD||self;function ef(){}function zy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Wy="closure_uid_"+(1e9*Math.random()>>>0),fw=0;function vg(n,e,t){return n.call.apply(n.bind,arguments)}function AD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function zr(n,e,t){return(zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vg:AD).apply(null,arguments)}function _g(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Wr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var h=Array(arguments.length-2),g=2;g<arguments.length;g++)h[g-2]=arguments[g];return e.prototype[o].apply(r,h)}}function Tu(){this.s=this.s,this.o=this.o}Tu.prototype.s=!1,Tu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function ad(n){Object.prototype.hasOwnProperty.call(n,Wy)&&n[Wy]||(n[Wy]=++fw)}(this)},Tu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function wg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function gw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zy(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let h=0;h<u;h++)n[o+h]=r[h]}else n.push(r)}}function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Kr.prototype.h=function(){this.defaultPrevented=!0};var mw=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",ef,e),Pt.removeEventListener("test",ef,e)}catch{}return n}();function ud(n){return/^[\s\xa0]*$/.test(n)}var xD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function nf(n,e){return n<e?-1:n>e?1:0}function Ig(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function Aa(n){return-1!=Ig().indexOf(n)}function Au(n){return Au[" "](n),n}Au[" "]=ef;var cd,n,vw=Aa("Opera"),Sa=Aa("Trident")||Aa("MSIE"),ws=Aa("Edge"),Eg=ws||Sa,_w=Aa("Gecko")&&!(-1!=Ig().toLowerCase().indexOf("webkit")&&!Aa("Edge"))&&!(Aa("Trident")||Aa("MSIE"))&&!Aa("Edge"),Ky=-1!=Ig().toLowerCase().indexOf("webkit")&&!Aa("Edge");function Lo(){var n=Pt.document;return n?n.documentMode:void 0}e:{var bg="",rf=(n=Ig(),_w?/rv:([^\);]+)(\)|;)/.exec(n):ws?/Edge\/([\d\.]+)/.exec(n):Sa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ky?/WebKit\/(\S+)/.exec(n):vw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rf&&(bg=rf?rf[1]:""),Sa){var ww=Lo();if(null!=ww&&ww>parseFloat(bg)){cd=String(ww);break e}}cd=bg}var Iw={};var Yy=Pt.document&&Sa&&(Lo()||parseInt(cd,10))||void 0;function Vc(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_w){e:{try{Au(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Qy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vc.X.h.call(this)}}Wr(Vc,Kr);var Qy={2:"touch",3:"pen",4:"mouse"};Vc.prototype.h=function(){Vc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dg="closure_listenable_"+(1e6*Math.random()|0),MD=0;function RD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++MD,this.ba=this.ea=!1}function Cg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Jy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xy(n){const e={};for(const t in n)e[t]=n[t];return e}const ND="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ew(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<ND.length;u++)t=ND[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ev(n){this.src=n,this.g={},this.h=0}function Tg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=pw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Cg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ag(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}ev.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=Ag(n,e,r,o);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new RD(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var tv="closure_lm_"+(1e6*Math.random()|0),af={};function OD(n,e,t,r,o){if(r&&r.once)return kD(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)OD(n,e[u],t,r,o);return null}return t=Vo(t),n&&n[Dg]?n.N(e,t,tf(r)?!!r.capture:!!r,o):PD(n,e,t,!1,r,o)}function PD(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=tf(o)?!!o.capture:!!o,g=Dw(n);if(g||(n[tv]=g=new ev(n)),(t=g.add(e,t,r,h,u)).proxy)return t;if(r=function iS(){const e=sS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mw||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(LD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kD(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)kD(n,e[u],t,r,o);return null}return t=Vo(t),n&&n[Dg]?n.O(e,t,tf(r)?!!r.capture:!!r,o):PD(n,e,t,!0,r,o)}function FD(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)FD(n,e[u],t,r,o);else r=tf(r)?!!r.capture:!!r,t=Vo(t),n&&n[Dg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ag(u=n.g[e],t,r,o))&&(Cg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Dw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ag(e,t,r,o)),(t=-1<n?e[n]:null)&&bw(t))}function bw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Dg])Tg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(LD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Dw(e))?(Tg(t,n),0==t.h&&(t.src=null,e[tv]=null)):Cg(n)}}}function LD(n){return n in af?af[n]:af[n]="on"+n}function sS(n,e){if(n.ba)n=!0;else{e=new Vc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&bw(n),n=t.call(r,e)}return n}function Dw(n){return(n=n[tv])instanceof ev?n:null}var Cw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vo(n){return"function"==typeof n?n:(n[Cw]||(n[Cw]=function(e){return n.handleEvent(e)}),n[Cw])}function Ir(){Tu.call(this),this.i=new ev(this),this.P=this,this.I=null}function Yr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var o=e;Ew(e=new Kr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=uf(h,r,!0,e)&&o}if(o=uf(h=e.g=n,r,!0,e)&&o,o=uf(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=uf(h=e.g=t[u],r,!1,e)&&o}function uf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ba&&h.capture==t){var g=h.listener,_=h.ha||h.src;h.ea&&Tg(n.i,h),o=!1!==g.call(_,r)&&o}}return o&&!r.defaultPrevented}Wr(Ir,Tu),Ir.prototype[Dg]=!0,Ir.prototype.removeEventListener=function(n,e,t,r){FD(this,n,e,t,r)},Ir.prototype.M=function(){if(Ir.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Cg(t[r]);delete n.g[e],n.h--}}this.I=null},Ir.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var cf=Pt.JSON.stringify;function Tw(){var n=Rw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rv,Aw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Su,n=>n.reset());class Su{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sw(n){Pt.setTimeout(()=>{throw n},0)}function xw(n,e){rv||function Mw(){var n=Pt.Promise.resolve(void 0);rv=function(){n.then(Sg)}}(),iv||(rv(),iv=!0),Rw.add(n,e)}var iv=!1,Rw=new class nv{constructor(){this.h=this.g=null}add(e,t){const r=Aw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Sg(){for(var n;n=Tw();){try{n.h.call(n.g)}catch(t){Sw(t)}var e=Aw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}iv=!1}function xa(n,e){Ir.call(this),this.h=n||1,this.g=e||Pt,this.j=zr(this.lb,this),this.l=Date.now()}function lf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function xu(n,e,t){if("function"==typeof n)t&&(n=zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function xg(n){n.g=xu(()=>{n.g=null,n.i&&(n.i=!1,xg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Wr(xa,Ir),(yt=xa.prototype).ca=!1,yt.R=null,yt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Yr(this,"tick"),this.ca&&(lf(this),this.start()))}},yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){xa.X.M.call(this),lf(this),delete this.g};class Mg extends Tu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xg(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dd(n){Tu.call(this),this.h=n,this.g={}}Wr(dd,Tu);var sv=[];function Rg(n,e,t,r){Array.isArray(t)||(t&&(sv[0]=t.toString()),t=sv);for(var o=0;o<t.length;o++){var u=OD(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ng(n){Jy(n.g,function(e,t){this.g.hasOwnProperty(t)&&bw(e)},n),n.g={}}function df(){this.g=!0}function hf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Nw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return cf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}dd.prototype.M=function(){dd.X.M.call(this),Ng(this)},dd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},df.prototype.Aa=function(){this.g=!1},df.prototype.info=function(){};var Uc={},av=null;function ff(){return av=av||new Ir}function Ow(n){Kr.call(this,Uc.Pa,n)}function Qr(n){const e=ff();Yr(e,new Ow(e))}function uv(n,e){Kr.call(this,Uc.STAT_EVENT,n),this.stat=e}function _i(n){const e=ff();Yr(e,new uv(e,n))}function BD(n,e){Kr.call(this,Uc.Qa,n),this.size=e}function pf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}Uc.Pa="serverreachability",Wr(Ow,Kr),Uc.STAT_EVENT="statevent",Wr(uv,Kr),Uc.Qa="timingevent",Wr(BD,Kr);var hd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},cv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function lv(){}function kw(){}lv.prototype.h=null;var hv,fd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function dv(){Kr.call(this,"d")}function Og(){Kr.call(this,"c")}function Pg(){}function pd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new dd(this),this.O=$D,this.T=new xa(n=Eg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new fv}function fv(){this.i=null,this.g="",this.h=!1}Wr(dv,Kr),Wr(Og,Kr),Wr(Pg,lv),Pg.prototype.g=function(){return new XMLHttpRequest},Pg.prototype.i=function(){return{}},hv=new Pg;var $D=45e3,Is={},gd={};function pv(n,e,t){n.K=1,n.v=$c(Uo(e)),n.s=t,n.P=!0,Fw(n,null)}function Fw(n,e){n.F=Date.now(),gf(n),n.A=Uo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Bw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new fv,n.g=zg(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Mg(zr(n.La,n,n.g),n.N)),Rg(n.S,n.g,"readystatechange",n.ib),e=n.H?Xy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Qr(),function ov(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var A=D[0];D=D[1];var N=A.split("_");h=2<=N.length&&"type"==N[1]?h+(A+"=")+D+"&":h+(A+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function jD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function gv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=HD(n,t),o==gd){4==e&&(n.o=4,_i(14),r=!1),hf(n.j,n.m,null,"[Incomplete Response]");break}if(o==Is){n.o=4,_i(15),hf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}hf(n.j,n.m,o,null),yd(n,o)}jD(n)&&o!=gd&&o!=Is&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Tv(e),e.K=!0,_i(11))):(hf(n.j,n.m,t,"[Invalid Chunked Response]"),Bc(n),mf(n))}function HD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gd:(t=Number(e.substring(t,r)),isNaN(t)?Is:(r+=1)+t>e.length?gd:(e=e.substr(r,t),n.C=r+t,e))}function gf(n){n.V=Date.now()+n.O,Lw(n,n.O)}function Lw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=pf(zr(n.gb,n),e)}function md(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function mf(n){0==n.l.G||n.I||Ww(n.l,n)}function Bc(n){md(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,lf(n.T),Ng(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function yd(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||yv(t.h,n)))if(!n.J&&yv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Id(t),Df(t)}Cv(t),_i(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=pf(zr(t.cb,t),6e3));if(1>=jw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bo(t,11)}else if((n.J||t.g==n)&&Id(t),!ud(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const A=D[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=D[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const q=D[5];null!=q&&"number"==typeof q&&0<q&&(t.J=r=1.5*q,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const se=n.g;if(se){const ye=se.g?se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var u=r.h;u.g||-1==ye.indexOf("spdy")&&-1==ye.indexOf("quic")&&-1==ye.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(vv(u,u.h),u.h=null))}if(r.D){const Be=se.g?se.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.za=Be,mn(r.F,r.D,Be))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((r=t).sa=Kw(r,r.H?r.ka:null,r.V),h.J){Hw(r.h,h);var g=h,_=r.J;_&&g.setTimeout(_),g.B&&(md(g),gf(g)),r.g=h}else Dv(r);0<t.i.length&&Cf(t)}else"stop"!=D[0]&&"close"!=D[0]||Bo(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Bo(t,7):Gg(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Qr()}catch{}}function GD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kg(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function mv(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(yt=pd.prototype).setTimeout=function(n){this.O=n},yt.ib=function(n){n=n.target;const e=this.L;e&&3==Oi(n)?e.l():this.La(n)},yt.La=function(n){try{if(n==this.g)e:{const A=Oi(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Eg||this.g&&(this.h.h||this.g.fa()||Wc(this.g)))){this.I||4!=A||7==e||Qr(),md(this);var t=this.g.aa();this.Y=t;t:if(jD(this)){var r=Wc(this.g);n="";var o=r.length,u=4==Oi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Bc(this),mf(this);var h="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function VD(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ud(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,_i(12),Bc(this),mf(this);break e}hf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yd(this,t)}this.P?(gv(this,A,h),Eg&&this.i&&3==A&&(Rg(this.S,this.T,"tick",this.hb),this.T.start())):(hf(this.j,this.m,h,null),yd(this,h)),4==A&&Bc(this),this.i&&!this.I&&(4==A?Ww(this.l,this):(this.i=!1,gf(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),Bc(this),mf(this)}}}catch{}},yt.hb=function(){if(this.g){var n=Oi(this.g),e=this.g.fa();this.C<e.length&&(md(this),gv(this,n,e),this.i&&4!=n&&gf(this))}},yt.cancel=function(){this.I=!0,Bc(this)},yt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function UD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qr(),_i(17)),Bc(this),this.o=2,mf(this)):Lw(this,this.V-n)};var Fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Mu){this.h=void 0!==e?e:n.h,yf(this,n.j),this.s=n.s,this.g=n.g,vf(this,n.m),this.l=n.l,e=n.i;var t=new wf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lg(this,t),this.o=n.o}else n&&(t=String(n).match(Fg))?(this.h=!!e,yf(this,t[1]||"",!0),this.s=Ru(t[2]||""),this.g=Ru(t[3]||"",!0),vf(this,t[4]),this.l=Ru(t[5]||"",!0),Lg(this,t[6]||"",!0),this.o=Ru(t[7]||"")):(this.h=!!e,this.i=new wf(null,this.h))}function Uo(n){return new Mu(n)}function yf(n,e,t){n.j=t?Ru(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function vf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Lg(n,e,t){e instanceof wf?(n.i=e,function KD(n,e){e&&!n.j&&(jc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Uw(this,r),Bw(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ma(e,zD)),n.i=new wf(e,n.h))}function mn(n,e,t){n.i.set(e,t)}function $c(n){return mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ru(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ma(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ma(e,Vg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ma(e,Vg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ma(t,"/"==t.charAt(0)?ZD:Vw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ma(t,_f)),n.join("")};var Vg=/[#\/\?@]/g,Vw=/[#\?:]/g,ZD=/[#\?]/g,zD=/[#\?@]/g,_f=/#/g;function wf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function jc(n){n.g||(n.g=new Map,n.h=0,n.i&&function oS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Uw(n,e){jc(n),e=vd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function WD(n,e){return jc(n),e=vd(n,e),n.g.has(e)}function Bw(n,e,t){Uw(n,e),0<t.length&&(n.i=null,n.g.set(vd(n,e),wg(t)),n.h+=t.length)}function vd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ug(n){this.l=n||YD,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ga&&Pt.g.Ga()&&Pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=wf.prototype).add=function(n,e){jc(this),this.i=null,n=vd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){jc(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},yt.oa=function(){jc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},yt.W=function(n){jc(this);let e=[];if("string"==typeof n)WD(this,n)&&(e=e.concat(this.g.get(vd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return jc(this),this.i=null,WD(this,n=vd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),h=this.W(r);for(r=0;r<h.length;r++){var o=u;""!==h[r]&&(o+="="+encodeURIComponent(String(h[r]))),n.push(o)}}return this.i=n.join("&")};var YD=10;function Bg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jw(n){return n.h?1:n.g?n.g.size:0}function yv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vv(n,e){n.g?n.g.add(e):n.h=e}function Hw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Gw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return wg(n.i)}function _v(){}function $g(){this.g=new _v}function Hc(n,e,t){const r=t||"";try{GD(n,function(o,u){let h=o;tf(o)&&(h=cf(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Nu(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function If(n){this.l=n.ac||null,this.j=n.jb||!1}function jg(n,e){Ir.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ef,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ug.prototype.cancel=function(){if(this.i=Gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},_v.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},_v.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},Wr(If,lv),If.prototype.g=function(){return new jg(this.l,this.j)},If.prototype.i=function(n){return function(){return n}}({}),Wr(jg,Ir);var Ef=0;function qw(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ni(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ra(n)}function Ra(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=jg.prototype).open=function(n,e){if(this.readyState!=Ef)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ra(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ni(this)),this.readyState=Ef},yt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qw(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},yt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ni(this):Ra(this),3==this.readyState&&qw(this)}},yt.Va=function(n){this.g&&(this.response=this.responseText=n,Ni(this))},yt.Ua=function(n){this.g&&(this.response=n,Ni(this))},yt.ga=function(){this.g&&Ni(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var li=Pt.JSON.parse;function Nn(n){Ir.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bf,this.K=this.L=!1}Wr(Nn,Ir);var bf="",Es=/^https?$/i,wv=["POST","PUT"];function Gc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qc(n),Na(n)}function qc(n){n.D||(n.D=!0,Yr(n,"complete"),Yr(n,"error"))}function Zc(n){if(n.h&&typeof hw<"u"&&(!n.C[1]||4!=Oi(n)||2!=n.aa()))if(n.v&&4==Oi(n))xu(n.Ha,0,n);else if(Yr(n,"readystatechange"),4==Oi(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Fg)[1]||null;if(!o&&Pt.self&&Pt.self.location){var u=Pt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Es.test(o?o.toLowerCase():"")}t=r}if(t)Yr(n,"complete"),Yr(n,"success");else{n.m=6;try{var h=2<Oi(n)?n.g.statusText:""}catch{h=""}n.j=h+" ["+n.aa()+"]",qc(n)}}finally{Na(n)}}}function Na(n,e){if(n.g){zc(n);const t=n.g,r=n.C[0]?ef:null;n.g=null,n.C=null,e||Yr(n,"ready");try{t.onreadystatechange=r}catch{}}}function zc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function Oi(n){return n.g?n.g.readyState:0}function Wc(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case bf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Kc(n){let e="";return Jy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Hg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Kc(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mn(n,e,t))}function wd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Iv(n){this.Ca=0,this.i=[],this.j=new df,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=wd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=wd("baseRetryDelayMs",5e3,n),this.bb=wd("retryDelaySeedMs",1e4,n),this.$a=wd("forwardChannelMaxRetries",2,n),this.ta=wd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Ug(n&&n.concurrentRequestLimit),this.Fa=new $g,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Gg(n){if(Ev(n),3==n.G){var e=n.U++,t=Uo(n.F);mn(t,"SID",n.I),mn(t,"RID",e),mn(t,"TYPE","terminate"),Tf(n,t),(e=new pd(n,n.j,e,void 0)).K=2,e.v=$c(Uo(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=zg(e.l,null),e.g.da(e.v)),e.F=Date.now(),gf(e)}Zg(n)}function Df(n){n.g&&(Tv(n),n.g.cancel(),n.g=null)}function Ev(n){Df(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Id(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function Cf(n){Bg(n.h)||n.m||(n.m=!0,xw(n.Ja,n),n.C=0)}function bv(n,e){var t;t=e?e.m:n.U++;const r=Uo(n.F);mn(r,"SID",n.I),mn(r,"RID",t),mn(r,"AID",n.T),Tf(n,r),n.o&&n.s&&Hg(r,n.o,n.s),t=new pd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=zw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),vv(n.h,t),pv(t,r,e)}function Tf(n,e){n.ia&&Jy(n.ia,function(t,r){mn(e,r,t)}),n.l&&GD({},function(t,r){mn(e,r,t)})}function zw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?zr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=o[_].h;const A=o[_].g;if(D-=u,0>D)u=Math.max(0,o[_].h-100),g=!1;else try{Hc(A,h,"req"+D+"_")}catch{r&&r(A)}}if(g){r=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Dv(n){n.g||n.u||(n.Z=1,xw(n.Ia,n),n.A=0)}function Cv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=pf(zr(n.Ia,n),Af(n,n.A)),n.A++,0))}function Tv(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function qg(n){n.g=new pd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Uo(n.sa);mn(e,"RID","rpc"),mn(e,"SID",n.I),mn(e,"CI",n.L?"0":"1"),mn(e,"AID",n.T),mn(e,"TYPE","xmlhttp"),Tf(n,e),n.o&&n.s&&Hg(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=$c(Uo(e)),t.s=null,t.P=!0,Fw(t,n)}function Id(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function Ww(n,e){var t=null;if(n.g==e){Id(n),Tv(n),n.g=null;var r=2}else{if(!yv(n.h,e))return;t=e.D,Hw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Yr(r=ff(),new BD(r,t)),Cf(n)}else Dv(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function Zw(n,e){return!(jw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=pf(zr(n.Ja,n,e),Af(n,n.C)),n.C++,0)))}(n,e)||2==r&&Cv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Bo(n,5);break;case 4:Bo(n,10);break;case 3:Bo(n,6);break;default:Bo(n,2)}}function Af(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=zr(n.kb,n);t||(t=new Mu("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||yf(t,"https"),$c(t)),function aS(n,e){const t=new df;if(Pt.Image){const r=new Image;r.onload=_g(Nu,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_g(Nu,t,r,"TestLoadImage: error",!1,e),r.onabort=_g(Nu,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_g(Nu,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _i(2);n.G=0,n.l&&n.l.va(e),Zg(n),Ev(n)}function Zg(n){if(n.G=0,n.la=[],n.l){const e=Gw(n.h);(0!=e.length||0!=n.i.length)&&(gw(n.la,e),gw(n.la,n.i),n.h.i.length=0,wg(n.i),n.i.length=0),n.l.ua()}}function Kw(n,e,t){var r=t instanceof Mu?Uo(t):new Mu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),vf(r,r.m);else{var o=Pt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Mu(null,void 0);r&&yf(u,r),e&&(u.g=e),o&&vf(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&mn(r,t,e),mn(r,"VER",n.ma),Tf(n,r),r}function zg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nn(t&&n.Da&&!n.ra?new If({jb:!0}):n.ra)).Ka(n.H),e}function Wg(){}function Sf(){if(Sa&&!(10<=Number(Yy)))throw Error("Environmental error: no available transport.")}function Pi(n,e){Ir.call(this),this.g=new Iv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!ud(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ud(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yc(this)}function Kg(n){dv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Av(){Og.call(this),this.status=1}function Yc(n){this.g=n}(yt=Nn.prototype).Ka=function(n){this.L=n},yt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hv.g(),this.C=function Pw(n){return n.h||(n.h=n.i())}(this.u?this.u:hv),this.g.onreadystatechange=zr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Gc(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Pt.FormData&&n instanceof Pt.FormData,!(0<=pw(wv,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,h]of t)this.g.setRequestHeader(u,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zc(this),0<this.B&&((this.K=function _d(n){return Sa&&function rS(){return function yw(n){var e=Iw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xD(String(cd)).split("."),t=xD("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=nf(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||nf(0==o[2].length,0==u[2].length)||nf(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zr(this.qa,this)):this.A=xu(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Gc(this,u)}},yt.qa=function(){typeof hw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yr(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yr(this,"complete"),Yr(this,"abort"),Na(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Na(this,!0)),Nn.X.M.call(this)},yt.Ha=function(){this.s||(this.F||this.v||this.l?Zc(this):this.fb())},yt.fb=function(){Zc(this)},yt.aa=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},yt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},yt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),li(e)}},yt.Ea=function(){return this.m},yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=Iv.prototype).ma=8,yt.G=1,yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new pd(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Xy(u),Ew(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zw(this,o,e),mn(t=Uo(this.F),"RID",n),mn(t,"CVER",22),this.D&&mn(t,"X-HTTP-Session-Id",this.D),Tf(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Kc(u)))+"&"+e:this.o&&Hg(t,this.o,u)),vv(this.h,o),this.Ya&&mn(t,"TYPE","init"),this.O?(mn(t,"$req",e),mn(t,"SID","null"),o.Z=!0,pv(o,t,null)):pv(o,t,e),this.G=2}}else 3==this.G&&(n?bv(this,n):0==this.i.length||Bg(this.h)||bv(this))},yt.Ia=function(){if(this.u=null,qg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=pf(zr(this.eb,this),n)}},yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_i(10),Df(this),qg(this))},yt.cb=function(){null!=this.v&&(this.v=null,Df(this),Cv(this),_i(19))},yt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),_i(2)):(this.j.info("Failed to ping google.com"),_i(1))},(yt=Wg.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Ra=function(){},Sf.prototype.g=function(n,e){return new Pi(n,e)},Wr(Pi,Ir),Pi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;_i(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Kw(n,null,n.V),Cf(n)},Pi.prototype.close=function(){Gg(this.g)},Pi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=cf(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Cf(e)},Pi.prototype.M=function(){this.g.l=null,delete this.j,Gg(this.g),delete this.g,Pi.X.M.call(this)},Wr(Kg,dv),Wr(Av,Og),Wr(Yc,Wg),Yc.prototype.xa=function(){Yr(this.g,"a")},Yc.prototype.wa=function(n){Yr(this.g,new Kg(n))},Yc.prototype.va=function(n){Yr(this.g,new Av)},Yc.prototype.ua=function(){Yr(this.g,"b")},Sf.prototype.createWebChannel=Sf.prototype.g,Pi.prototype.send=Pi.prototype.u,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,hd.NO_ERROR=0,hd.TIMEOUT=8,hd.HTTP_ERROR=6,cv.COMPLETE="complete",kw.EventType=fd,fd.OPEN="a",fd.CLOSE="b",fd.ERROR="c",fd.MESSAGE="d",Ir.prototype.listen=Ir.prototype.N,Nn.prototype.listenOnce=Nn.prototype.O,Nn.prototype.getLastError=Nn.prototype.Oa,Nn.prototype.getLastErrorCode=Nn.prototype.Ea,Nn.prototype.getStatus=Nn.prototype.aa,Nn.prototype.getResponseJson=Nn.prototype.Sa,Nn.prototype.getResponseText=Nn.prototype.fa,Nn.prototype.send=Nn.prototype.da,Nn.prototype.setWithCredentials=Nn.prototype.Ka;var Sv=Cu.createWebChannelTransport=function(){return new Sf},Yw=Cu.getStatEventTarget=function(){return ff()},xv=Cu.ErrorCode=hd,Qw=Cu.EventType=cv,Jw=Cu.Event=Uc,Mv=Cu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xw=Cu.FetchXmlHttpFactory=If,Yg=Cu.WebChannel=kw,QD=Cu.XhrIo=Nn;const eI="@firebase/firestore";class xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");let Oa="9.15.0";const Pa=new Fo.Yd("@firebase/firestore");function Qg(){return Pa.logLevel}function Ve(n,...e){if(Pa.logLevel<=Fo.in.DEBUG){const t=e.map(Jg);Pa.debug(`Firestore (${Oa}): ${n}`,...t)}}function lr(n,...e){if(Pa.logLevel<=Fo.in.ERROR){const t=e.map(Jg);Pa.error(`Firestore (${Oa}): ${n}`,...t)}}function Ou(n,...e){if(Pa.logLevel<=Fo.in.WARN){const t=e.map(Jg);Pa.warn(`Firestore (${Oa}): ${n}`,...t)}}function Jg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function gt(n,e){n||it()}function We(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends sn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xr.UNAUTHENTICATED))}shutdown(){}}class eC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nI{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let h=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Xt,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=h;e.enqueueRetryable((0,we.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Xt)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt("string"==typeof r.accessToken),new Rv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new xr(e)}}class tC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(gt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rI{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new tC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ed{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.A;return this.A=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt("string"==typeof t.token),this.A=t.token,new Nv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ov{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=nC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function Qc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function rC(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Hn(0,0))}static max(){return new vt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ki{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ki.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends ki{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new on(t)}static emptyPath(){return new on([])}}const iC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends ki{construct(e,t,r){return new _n(e,t,r)}static isValidIdentifier(e){return iC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _n(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===g?(h=!h,o++):"."!==g||h?(r+=g,o++):(u(),o++)}if(u(),h)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(on.fromString(e))}static fromName(e){return new je(on.fromString(e).popFirst(5))}static empty(){return new je(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new on(e.slice()))}}class Fi{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Xg(n){return n.fields.find(e=>2===e.kind)}function Pu(n){return n.fields.filter(e=>2!==e.kind)}Fi.UNKNOWN_ID=-1;class em{constructor(e,t){this.fieldPath=e,this.kind=t}}class xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xf(0,ts.min())}}function tm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new ts(o,je.empty(),e)}function bd(n){return new ts(n.readTime,n.key,-1)}class ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ts(vt.min(),je.empty(),-1)}static max(){return new ts(vt.max(),je.empty(),-1)}}function nm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const iI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ka(n){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,we.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==iI)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Dd.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let o=0,u=0,h=!1;e.forEach(g=>{++o,g.next(()=>{++u,h&&u===o&&t()},_=>r(_))}),h=!0,u===o&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(o=>o?ue.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,o)=>{const u=e.length,h=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(A=>{h[D]=A,++g,g===u&&r(h)},A=>o(A))}})}static doWhile(e,t){return new ue((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Mf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Xt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ku(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=rm(r.target.error);this.P.reject(new ku(e,o))}}static open(e,t,r,o){try{return new Mf(t,e.transaction(o,r))}catch(u){throw new ku(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sI(t)}}class bs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===bs.D((0,sn.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Fu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,sn.hl)())return!1;if(bs.N())return!0;const e=(0,sn.z$)(),t=bs.D(e),r=0<t&&t<10,o=bs.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const g=h.target.error;o("VersionError"===g.name?new Pe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Pe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new ku(e,g))},u.onupgradeneeded=h=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,we.Z)(function*(){const h="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=Mf.open(u.db,e,h?"readonly":"readwrite",r),D=o(_).next(A=>(_.V(),A)).catch(A=>(_.abort(A),ue.reject(A))).toPromise();return D.catch(()=>{}),yield _.v,D}catch(_){const D=_,A="FirebaseError"!==D.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",D.message,"Retrying:",A),u.close(),!A)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kv{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Fu(this.q.delete())}}class ku extends Pe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fa(n){return"IndexedDbTransactionError"===n.name}class sI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fu(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Fu(this.store.add(e))}get(e){return Fu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Fu(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Fu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(h,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ue((u,h)=>{o.onerror=g=>{h(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,h,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ue((r,o)=>{t.onerror=u=>{const h=rm(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(g=>{g?h.continue():r()}):r()}})}H(e,t){const r=[];return new ue((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const g=h.target.result;if(!g)return void o();const _=new kv(g),D=t(g.primaryKey,g.value,_);if(D instanceof ue){const A=D.catch(N=>(_.done(),ue.reject(N)));r.push(A)}_.isDone?o():null===_.G?g.continue():g.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fu(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=rm(r.target.error);t(o)}})}let Fv=!1;function rm(n){const e=bs.D((0,sn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fv||(Fv=!0,setTimeout(()=>{throw r},0)),r}}return n}class oI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Fa(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ka(r)}yield t.nt(6e4)}))}}class aI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ue.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return Ve("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,o).next(g=>{o-=g,r.add(h)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(o,u)).next(g=>(Ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>h.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const h=bd(u);nm(h,r)>0&&(r=h)}),new ts(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Li=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class aC{constructor(e,t,r,o,u,h,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}function uI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rf(n){return null==n}function Nf(n){return 0===n&&1/n==-1/0}function lI(n){return"number"==typeof n&&Number.isInteger(n)&&!Nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Mr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mr.EMPTY_BYTE_STRING=new Mr("");const cC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vu(n){if(gt(!!n),"string"==typeof n){let e=0;const t=cC.exec(n);if(gt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xc(n){return"string"==typeof n?Mr.fromBase64String(n):Mr.fromUint8Array(n)}function Lv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dI(n){const e=n.mapValue.fields.__previous_value__;return Lv(e)?dI(e):e}function Of(n){const e=Vu(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}const Uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pf={nullValue:"NULL_VALUE"};function Bu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lv(n)?4:lC(n)?9007199254740991:10:it()}function Qs(n,e){if(n===e)return!0;const t=Bu(n);if(t!==Bu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Of(n).isEqual(Of(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Vu(r.timestampValue),h=Vu(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Xc(n.bytesValue).isEqual(Xc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return dr(r.geoPointValue.latitude)===dr(o.geoPointValue.latitude)&&dr(r.geoPointValue.longitude)===dr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return dr(r.integerValue)===dr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=dr(r.doubleValue),h=dr(o.doubleValue);return u===h?Nf(u)===Nf(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Qc(n.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(uI(u)!==uI(h))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===h[g]||!Qs(u[g],h[g])))return!1;return!0}(n,e);default:return it()}var o}function Cd(n,e){return void 0!==(n.values||[]).find(t=>Qs(t,e))}function La(n,e){if(n===e)return 0;const t=Bu(n),r=Bu(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=dr(o.integerValue||o.doubleValue),g=dr(u.integerValue||u.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(n,e);case 3:return Vv(n.timestampValue,e.timestampValue);case 4:return Vv(Of(n),Of(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Xc(o),g=Xc(u);return h.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),g=u.split("/");for(let _=0;_<h.length&&_<g.length;_++){const D=kt(h[_],g[_]);if(0!==D)return D}return kt(h.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=kt(dr(o.latitude),dr(u.latitude));return 0!==h?h:kt(dr(o.longitude),dr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],g=u.values||[];for(let _=0;_<h.length&&_<g.length;++_){const D=La(h[_],g[_]);if(D)return D}return kt(h.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Uu.mapValue&&u===Uu.mapValue)return 0;if(o===Uu.mapValue)return 1;if(u===Uu.mapValue)return-1;const h=o.fields||{},g=Object.keys(h),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let A=0;A<g.length&&A<D.length;++A){const N=kt(g[A],D[A]);if(0!==N)return N;const q=La(h[g[A]],_[D[A]]);if(0!==q)return q}return kt(g.length,D.length)}(n.mapValue,e.mapValue);default:throw it()}}function Vv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=Vu(n),r=Vu(e),o=kt(t.seconds,r.seconds);return 0!==o?o:kt(t.nanos,r.nanos)}function el(n){return im(n)}function im(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Vu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xc(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=im(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const g of o)h?h=!1:u+=",",u+=`${g}:${im(r.fields[g])}`;return u+"}"}(n.mapValue):it();var e}function $u(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sm(n){return!!n&&"integerValue"in n}function Td(n){return!!n&&"arrayValue"in n}function ju(n){return!!n&&"nullValue"in n}function hI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function om(n){return!!n&&"mapValue"in n}function $o(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$o(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$o(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uv(n){return"nullValue"in n?Pf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$u(Lu.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function cS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$u(Lu.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uu:it()}function Bv(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $v(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class tl{constructor(e,t){this.position=e,this.inclusive=t}}function Et(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(h.referenceValue),t.key):La(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function fI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qs(n.position[t],e.position[t]))return!1;return!0}class pI{}class nn extends pI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new mI(e,t,r):"array-contains"===t?new hC(e,r):"in"===t?new _I(e,r):"not-in"===t?new fC(e,r):"array-contains-any"===t?new Ff(e,r):new nn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new yI(e,r):new vI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(La(t,this.value)):null!==t&&Bu(this.value)===Bu(t)&&this.matchesComparison(La(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class an extends pI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new an(e,t)}matches(e){return Ad(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ad(n){return"and"===n.op}function Sd(n){return"or"===n.op}function kf(n){return ir(n)&&Ad(n)}function ir(n){for(const e of n.filters)if(e instanceof an)return!1;return!0}function dC(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+el(n.value);{const e=n.filters.map(t=>dC(t)).join(",");return`${n.op}(${e})`}}function jv(n,e){return n instanceof nn?(t=n,(r=e)instanceof nn&&t.op===r.op&&t.field.isEqual(r.field)&&Qs(t.value,r.value)):n instanceof an?function(t,r){return r instanceof an&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,h)=>o&&jv(u,r.filters[h]),!0)}(n,e):void it();var t,r}function Hv(n,e){const t=n.filters.concat(e);return an.create(t,n.op)}function gI(n){return n instanceof nn?`${(e=n).field.canonicalString()} ${e.op} ${el(e.value)}`:n instanceof an?function(e){return e.op.toString()+" {"+e.getFilters().map(gI).join(" ,")+"}"}(n):"Filter";var e}class mI extends nn{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class yI extends nn{constructor(e,t){super(e,"in",t),this.keys=Gv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vI extends nn{constructor(e,t){super(e,"not-in",t),this.keys=Gv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class hC extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Td(t)&&Cd(t.arrayValue,this.value)}}class _I extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cd(this.value.arrayValue,t)}}class fC extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cd(this.value.arrayValue,t)}}class Ff extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Td(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cd(this.value.arrayValue,r))}}class xd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class hr{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nl(this.root,e,this.comparator,!0)}}class nl{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Vr.RED,this.left=o??Vr.EMPTY,this.right=u??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Vr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Vr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qv(this.data.getIterator())}getIteratorFrom(e){return new qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Md(n){return n.hasNext()?n.getNext():void 0}class Jr{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new Jr([])}unionWith(e){let t=new Sn(_n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Jr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(t)}setAll(e){let t=_n.emptyPath(),r={},o=[];e.forEach((h,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=g.popLast()}h?r[g.lastSegment()]=$o(h):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];om(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Jc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new vr($o(this.value))}}function wI(n){const e=[];return Jc(n.fields,(t,r)=>{const o=new _n([t]);if(om(r)){const u=wI(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Jr(e)}class Gn{constructor(e,t,r,o,u,h,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Gn(e,0,vt.min(),vt.min(),vt.min(),vr.empty(),0)}static newFoundDocument(e,t,r,o){return new Gn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new Gn(e,2,t,vt.min(),vt.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,vt.min(),vt.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gC{constructor(e,t=null,r=[],o=[],u=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=g,this.ft=null}}function am(n,e=null,t=[],r=[],o=null,u=null,h=null){return new gC(n,e,t,r,o,u,h)}function Hu(n){const e=We(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>el(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>el(r)).join(",")),e.ft=t}return e.ft}function Rd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fI(n.startAt,e.startAt)&&fI(n.endAt,e.endAt)}function um(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Lf(n,e){return n.filters.filter(t=>t instanceof nn&&t.field.isEqual(e))}function II(n,e,t){let r=Pf,o=!0;for(const u of Lf(n,e)){let h=Pf,g=!0;switch(u.op){case"<":case"<=":h=Uv(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,g=!1;break;case"!=":case"not-in":h=Pf}Bv({value:r,inclusive:o},{value:h,inclusive:g})<0&&(r=h,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];Bv({value:r,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function EI(n,e,t){let r=Uu,o=!0;for(const u of Lf(n,e)){let h=Uu,g=!0;switch(u.op){case">=":case">":h=cS(u.value),g=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,g=!1;break;case"!=":case"not-in":h=Uu}$v({value:r,inclusive:o},{value:h,inclusive:g})>0&&(r=h,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];$v({value:r,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class Gu{constructor(e,t=null,r=[],o=[],u=null,h="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=g,this.endAt=_,this.dt=null,this._t=null}}function mC(n,e,t,r,o,u,h,g){return new Gu(n,e,t,r,o,u,h,g)}function Vf(n){return new Gu(n)}function yC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function cm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rl(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Zv(n){return null!==n.collectionGroup}function il(n){const e=We(n);if(null===e.dt){e.dt=[];const t=rl(e),r=cm(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new xd(t)),e.dt.push(new xd(_n.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new xd(_n.keyField(),u))}}}return e.dt}function di(n){const e=We(n);if(!e._t)if("F"===e.limitType)e._t=am(e.path,e.collectionGroup,il(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of il(e))t.push(new xd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new tl(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new tl(e.startAt.position,e.startAt.inclusive):null;e._t=am(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function sl(n,e){e.getFirstInequalityField(),rl(n);const t=n.filters.concat([e]);return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lm(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Rd(di(n),di(e))&&n.limitType===e.limitType}function bI(n){return`${Hu(di(n))}|lt:${n.limitType}`}function zv(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>gI(r)).join(", ")}]`),Rf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>el(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>el(r)).join(",")),`Target(${t})`}(di(n))}; limitType=${n.limitType})`}function Wv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of il(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const g=Et(o,u,h);return o.inclusive?g<=0:g<0}(t.startAt,il(t),r)||t.endAt&&!function(o,u,h){const g=Et(o,u,h);return o.inclusive?g>=0:g>0}(t.endAt,il(t),r)));var t,r}function Kv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DI(n){return(e,t)=>{let r=!1;for(const o of il(n)){const u=vC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function vC(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,h){const g=u.data.field(o),_=h.data.field(o);return null!==g&&null!==_?La(g,_):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function Nd(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function CI(n){return{integerValue:""+n}}function Yv(n,e){return lI(e)?CI(e):Nd(n,e)}class dm{constructor(){this._=void 0}}function TI(n,e,t){return n instanceof Od?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Va?AI(n,e):n instanceof qu?Jv(n,e):function(r,o){const u=Qv(r,o),h=SI(u)+SI(r.gt);return sm(u)&&sm(r.gt)?CI(h):Nd(r.yt,h)}(n,e)}function _C(n,e,t){return n instanceof Va?AI(n,e):n instanceof qu?Jv(n,e):t}function Qv(n,e){return n instanceof Pd?sm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Od extends dm{}class Va extends dm{constructor(e){super(),this.elements=e}}function AI(n,e){const t=xI(e);for(const r of n.elements)t.some(o=>Qs(o,r))||t.push(r);return{arrayValue:{values:t}}}class qu extends dm{constructor(e){super(),this.elements=e}}function Jv(n,e){let t=xI(e);for(const r of n.elements)t=t.filter(o=>!Qs(o,r));return{arrayValue:{values:t}}}class Pd extends dm{constructor(e,t){super(),this.yt=e,this.gt=t}}function SI(n){return dr(n.integerValue||n.doubleValue)}function xI(n){return Td(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ol{constructor(e,t){this.field=e,this.transform=t}}class MI{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fm{}function RI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new kd(n.key,Kn.none()):new al(n.key,n.data,Kn.none());{const t=n.data,r=vr.empty();let o=new Sn(_n.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);null===h&&u.length>1&&(u=u.popLast(),h=t.field(u)),null===h?r.delete(u):r.set(u,h),o=o.add(u)}return new jo(n.key,r,new Jr(o.toArray()),Kn.none())}}function IC(n,e,t){n instanceof al?function(r,o,u){const h=r.value.clone(),g=PI(r.fieldTransforms,o,u.transformResults);h.setAll(g),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof jo?function(r,o,u){if(!hm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=PI(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(OI(r)),g.setAll(h),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bf(n,e,t,r){return n instanceof al?function(o,u,h,g){if(!hm(o.precondition,u))return h;const _=o.value.clone(),D=Xv(o.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof jo?function(o,u,h,g){if(!hm(o.precondition,u))return h;const _=Xv(o.fieldTransforms,g,u),D=u.data;return D.setAll(OI(o)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===h?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(h=t,hm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h);var u,h}function EC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Qv(r.transform,o||null);null!=u&&(null===t&&(t=vr.empty()),t.set(r.field,u))}return t||null}function NI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Qc(t,r,(o,u)=>function wC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Va&&r instanceof Va||t instanceof qu&&r instanceof qu?Qc(t.elements,r.elements,Qs):t instanceof Pd&&r instanceof Pd?Qs(t.gt,r.gt):t instanceof Od&&r instanceof Od);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class al extends fm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class jo extends fm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function OI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PI(n,e,t){const r=new Map;gt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,g=e.data.field(u.field);r.set(u.field,_C(h,g,t[o]))}return r}function Xv(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,TI(u,h,e))}return r}class kd extends fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e_ extends fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bC{constructor(e){this.count=e}}var fr,rn;function t_(n){switch(n){default:return it();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function pm(n){if(void 0===n)return lr("GRPC error has no .code"),de.UNKNOWN;switch(n){case fr.OK:return de.OK;case fr.CANCELLED:return de.CANCELLED;case fr.UNKNOWN:return de.UNKNOWN;case fr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case fr.INTERNAL:return de.INTERNAL;case fr.UNAVAILABLE:return de.UNAVAILABLE;case fr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case fr.NOT_FOUND:return de.NOT_FOUND;case fr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case fr.ABORTED:return de.ABORTED;case fr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case fr.DATA_LOSS:return de.DATA_LOSS;default:return it()}}(rn=fr||(fr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class Zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Jc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}const DC=new hr(je.comparator);function hi(){return DC}const kI=new hr(je.comparator);function Fd(...n){let e=kI;for(const t of n)e=e.insert(t.key,t);return e}function ul(n){let e=kI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Js(){return gm()}function FI(){return gm()}function gm(){return new Zu(n=>n.toString(),(n,e)=>n.isEqual(e))}const LI=new hr(je.comparator),n_=new Sn(je.comparator);function Ht(...n){let e=n_;for(const t of n)e=e.add(t);return e}const r_=new Sn(kt);function mm(){return r_}class Ld{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ld(vt.min(),o,mm(),hi(),Ht())}}class cl{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cl(r,t,Ht(),Ht(),Ht())}}class $f{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class i_{constructor(e,t){this.targetId=e,this.Et=t}}class s_{constructor(e,t,r=Mr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class o_{constructor(){this.At=0,this.Rt=UI(),this.bt=Mr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ht(),t=Ht(),r=Ht();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new cl(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=UI()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class CC{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=hi(),this.qt=VI(),this.Ut=new Sn(kt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(um(u))if(0===r){const h=new je(u.path);this.Qt(t,h,Gn.newNoDocument(h,vt.min()))}else gt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,h)=>{const g=this.Yt(h);if(g){if(u.current&&um(g.target)){const _=new je(g.target.path);null!==this.Lt.get(_)||this.te(h,_)||this.Qt(h,_,Gn.newNoDocument(_,e))}u.St&&(t.set(h,u.Ct()),u.xt())}});let r=Ht();this.qt.forEach((u,h)=>{let g=!0;h.forEachWhile(_=>{const D=this.Yt(_);return!D||2===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Lt.forEach((u,h)=>h.setReadTime(e));const o=new Ld(e,t,this.Ut,this.Lt,r);return this.Lt=hi(),this.qt=VI(),this.Ut=new Sn(kt),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new o_,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Sn(kt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new o_),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function VI(){return new hr(je.comparator)}function UI(){return new hr(je.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},BI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lS={and:"AND",or:"OR"};class $I{constructor(e,t){this.databaseId=e,this.wt=t}}function Vd(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jI(n,e){return n.wt?e.toBase64():e.toUint8Array()}function dS(n,e){return Vd(n,e.toTimestamp())}function Er(n){return gt(!!n),vt.fromTimestamp(function(e){const t=Vu(e);return new Hn(t.seconds,t.nanos)}(n))}function a_(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function HI(n){const e=on.fromString(n);return gt(QI(e)),e}function jf(n,e){return a_(n.databaseId,e.path)}function Ho(n,e){const t=HI(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(qI(t))}function u_(n,e){return a_(n.databaseId,e)}function GI(n){const e=HI(n);return 4===e.length?on.emptyPath():qI(e)}function Hf(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qI(n){return gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ZI(n,e,t){return{name:jf(n,e),fields:t.value.mapValue.fields}}function zI(n,e,t){const r=Ho(n,e.name),o=Er(e.updateTime),u=e.createTime?Er(e.createTime):vt.min(),h=new vr({mapValue:{fields:e.fields}}),g=Gn.newFoundDocument(r,o,u,h);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Ua(n,e){let t;if(e instanceof al)t={update:ZI(n,e.key,e.value)};else if(e instanceof kd)t={delete:jf(n,e.key)};else if(e instanceof jo)t={update:ZI(n,e.key,e.data),updateMask:Gf(e.fieldMask)};else{if(!(e instanceof e_))return it();t={verify:jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Od)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Va)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Pd)return{fieldPath:u.field.canonicalString(),increment:h.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:dS(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function ym(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Kn.updateTime(Er(o.updateTime)):void 0!==o.exists?Kn.exists(o.exists):Kn.none():Kn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let g=null;"setToServerValue"in h?(gt("REQUEST_TIME"===h.setToServerValue),g=new Od):"appendMissingElements"in h?g=new Va(h.appendMissingElements.values||[]):"removeAllFromArray"in h?g=new qu(h.removeAllFromArray.values||[]):"increment"in h?g=new Pd(u,h.increment):it();const _=_n.fromServerFormat(h.fieldPath);return new ol(_,g)}(n,o)):[];var o;if(e.update){const o=Ho(n,e.update.name),u=new vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Jr((e.updateMask.fieldPaths||[]).map(D=>_n.fromServerFormat(D)));return new jo(o,u,h,t,r)}return new al(o,u,t,r)}if(e.delete){const o=Ho(n,e.delete);return new kd(o,t)}if(e.verify){const o=Ho(n,e.verify);return new e_(o,t)}return it()}function c_(n,e){return{documents:[u_(n,e.path)]}}function vm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=u_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=u_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0!==_.length)return YI(an.create(_,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:Ud((A=D).field),direction:hS(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(D=e.limit,n.wt||Rf(D)?D:{value:D});var D,g,_;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function l_(n){let e=GI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){gt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=KI(A);return N instanceof an&&kf(N)?N.getFilters():[N]}(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(A=>{return new xd(Bd((N=A).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(A){let N;return N="object"==typeof A?A.value:A,Rf(N)?null:N}(t.limit));let _=null;var A;t.startAt&&(_=new tl((A=t.startAt).values||[],!!A.before));let D=null;return t.endAt&&(D=function(A){return new tl(A.values||[],!A.before)}(t.endAt)),mC(e,o,h,u,g,"F",_,D)}function KI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bd(e.unaryFilter.field);return nn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Bd(e.unaryFilter.field);return nn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Bd(e.unaryFilter.field);return nn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Bd(e.unaryFilter.field);return nn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?nn.create(Bd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return an.create(e.compositeFilter.filters.map(t=>KI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function hS(n){return TC[n]}function MC(n){return BI[n]}function RC(n){return lS[n]}function Ud(n){return{fieldPath:n.canonicalString()}}function Bd(n){return _n.fromServerFormat(n.fieldPath)}function YI(n){return n instanceof nn?function(e){if("=="===e.op){if(hI(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NAN"}};if(ju(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hI(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NAN"}};if(ju(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ud(e.field),op:MC(e.op),value:e.value}}}(n):n instanceof an?function(e){const t=e.getFilters().map(r=>YI(r));return 1===t.length?t[0]:{compositeFilter:{op:RC(e.op),filters:t}}}(n):it()}function Gf(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JI(e)),e=Go(n.get(t),e);return JI(e)}function Go(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function JI(n){return n+"\x01\x01"}function Ds(n){const e=n.length;if(gt(e>=2),2===e)return gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&it(),n.charAt(h+1)){case"\x01":const g=n.substring(u,h);let _;0===o.length?_=g:(o+=g,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:it()}u=h+2}return new on(r)}const $d=["userId","batchId"];function _m(n,e){return[n,Xr(e)]}function XI(n,e,t){return[n,Xr(e),t]}const NC={},wm=["prefixPath","collectionGroup","readTime","documentId"],Im=["prefixPath","collectionGroup","documentId"],OC=["collectionGroup","readTime","prefixPath","documentId"],PC=["canonicalId","targetId"],eE=["targetId","path"],tE=["path","targetId"],d_=["collectionId","parent"],nE=["indexId","uid"],kC=["uid","sequenceNumber"],FC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fS=["indexId","uid","orderedDocumentKey"],h_=["userId","collectionPath","documentId"],f_=["userId","collectionPath","largestBatchId"],rE=["userId","collectionGroup","largestBatchId"],Em=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p_=[...Em,"documentOverlays"],iE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sE=iE,LC=[...sE,"indexConfiguration","indexState","indexEntries"];class g_ extends Pv{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Rr(n,e){const t=We(n);return bs.M(t.se,e)}class qf{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&IC(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=FI();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let g=this.applyToLocalView(h,u.mutatedFields);g=t.has(o.key)?null:g;const _=RI(h,g);null!==_&&r.set(o.key,_),h.isValidDocument()||h.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&Qc(this.mutations,e.mutations,(t,r)=>NI(t,r))&&Qc(this.baseMutations,e.baseMutations,(t,r)=>NI(t,r))}}class bm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){gt(e.mutations.length===r.length);let o=LI;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new bm(e,t,r,o)}}class m_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ba{constructor(e,t,r,o,u=vt.min(),h=vt.min(),g=Mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g}withSequenceNumber(e){return new Ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class y_{constructor(e){this.ie=e}}function v_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jf(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Vd(o,u.version.toTimestamp()),createTime:Vd(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ll(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:ll(e.version)}}var o,u;return r}function Zf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ll(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zu(n){const e=new Hn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function dl(n,e){const t=(e.baseMutations||[]).map(u=>ym(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>ym(n.ie,u)),o=Hn.fromMillis(e.localWriteTimeMs);return new qf(e.batchId,o,t,r)}function Nr(n){const e=zu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zu(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(gt(1===(o=n.query).documents.length),r=di(Vf(GI(o.documents[0])))):r=di(l_(n.query)),new Ba(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Mr.fromBase64String(n.resumeToken))}function hl(n,e){const t=ll(e.snapshotVersion),r=ll(e.lastLimboFreeSnapshotVersion);let o;o=um(e.target)?c_(n.ie,e.target):vm(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function __(n){const e=l_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lm(e,e.limit,"L"):e}function w_(n,e){return new m_(e.largestBatchId,ym(n.ie,e.overlayMutation))}function UC(n,e){const t=e.path.lastSegment();return[n,Xr(e.path.popLast()),t]}function BC(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ll(r.readTime),documentKey:Xr(r.documentKey.path),largestBatchId:r.largestBatchId}}class oE{getBundleMetadata(e,t){return I_(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:zu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return I_(e).put({bundleId:(r=t).id,createTime:ll(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jd(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:__(o.bundledQuery),readTime:zu(o.readTime)};var o})}saveNamedQuery(e,t){return jd(e).put({name:(r=t).name,readTime:ll(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function I_(n){return Rr(n,"bundles")}function jd(n){return Rr(n,"namedQueries")}class Dm{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Dm(e,t.uid||"")}getOverlay(e,t){return fl(e).get(UC(this.userId,t)).next(r=>r?w_(this.yt,r):null)}getOverlays(e,t){const r=Js();return ue.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const g=new m_(t,h);o.push(this.oe(e,g))}),ue.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Xr(h.getCollectionPath())));const u=[];return o.forEach(h=>{const g=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(fl(e).Y("collectionPathOverlayIndex",g))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Js(),u=Xr(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return fl(e).W("collectionPathOverlayIndex",h).next(g=>{for(const _ of g){const D=w_(this.yt,_);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Js();let h;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fl(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,D,A)=>{const N=w_(this.yt,D);u.size()<o||N.largestBatchId===h?(u.set(N.getKey(),N),h=N.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return fl(e).put(function(r,o,u){const[h,g,_]=UC(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ua(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function fl(n){return Rr(n,"documentOverlays")}class pl{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Nf(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Xc(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?lC(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):it()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),je.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function aE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uE(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=aE(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}pl.Ie=new pl;class $C{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=uE(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=uE(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class jC{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class E_{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Hd{constructor(){this.$e=new $C,this.Be=new jC(this.$e),this.Le=new E_(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Wu{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wu(this.indexId,this.documentKey,this.arrayValue,r)}}function Xs(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Cm(n.arrayValue,e.arrayValue),0!==t?t:(t=Cm(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function Cm(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){gt(e.collectionGroup===this.collectionId);const t=Xg(e);if(void 0!==t&&!this.We(t))return!1;const r=Pu(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const h=r[o];if(!this.ze(this.Qe,h)||!this.He(this.Ke[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Ke.length||!this.He(this.Ke[u++],h))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function b_(n){var e,t;if(gt(n instanceof nn||n instanceof an),n instanceof nn){if(n instanceof _I){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>nn.create(n.field,"==",u)))||[];return an.create(o,"or")}return n}const r=n.filters.map(o=>b_(o));return an.create(r,n.op)}function HC(n){if(0===n.getFilters().length)return[];const e=Am(b_(n));return gt(cE(e)),Tm(e)||Ku(e)?[e]:e.getFilters()}function Tm(n){return n instanceof nn}function Ku(n){return n instanceof an&&kf(n)}function cE(n){return Tm(n)||Ku(n)||function(e){if(e instanceof an&&Sd(e)){for(const t of e.getFilters())if(!Tm(t)&&!Ku(t))return!1;return!0}return!1}(n)}function Am(n){if(gt(n instanceof nn||n instanceof an),n instanceof nn)return n;if(1===n.filters.length)return Am(n.filters[0]);const e=n.filters.map(r=>Am(r));let t=an.create(e,n.op);return t=Sm(t),cE(t)?t:(gt(t instanceof an),gt(Ad(t)),gt(t.filters.length>1),t.filters.reduce((r,o)=>zf(r,o)))}function zf(n,e){let t;return gt(n instanceof nn||n instanceof an),gt(e instanceof nn||e instanceof an),t=n instanceof nn?e instanceof nn?an.create([n,e],"and"):GC(n,e):e instanceof nn?GC(e,n):function(r,o){if(gt(r.filters.length>0&&o.filters.length>0),Ad(r)&&Ad(o))return Hv(r,o.getFilters());const u=Sd(r)?r:o,h=Sd(r)?o:r,g=u.filters.map(_=>zf(_,h));return an.create(g,"or")}(n,e),Sm(t)}function GC(n,e){if(Ad(e))return Hv(e,n.getFilters());{const t=e.filters.map(r=>zf(n,r));return an.create(t,"or")}}function Sm(n){if(gt(n instanceof nn||n instanceof an),n instanceof nn)return n;const e=n.getFilters();if(1===e.length)return Sm(e[0]);if(ir(n))return n;const t=e.map(o=>Sm(o)),r=[];return t.forEach(o=>{o instanceof nn?r.push(o):o instanceof an&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:an.create(r,n.op)}class gS{constructor(){this.Je=new D_}addToCollectionParentIndex(e,t){return this.Je.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(ts.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class D_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Sn(on.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Sn(on.comparator)).toArray()}}const xm=new Uint8Array(0);class qC{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new D_,this.Xe=new Zu(r=>Hu(r),(r,o)=>Rd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:Xr(o)};return C_(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[rC(t),""],!1,!0);return C_(e).W(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Ds(h.parent))}return r})}addFieldIndex(e,t){const r=Mm(e),o={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var h;delete o.indexId;const u=r.add(o);if(t.indexState){const h=qd(e);return u.next(g=>{h.put(BC(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Mm(e),o=qd(e),u=Gd(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Gd(e);let o=!0;const u=new Map;return ue.forEach(this.Ze(t),h=>this.tn(e,h).next(g=>{o&&(o=!!g),u.set(h,g)})).next(()=>{if(o){let h=Ht();const g=[];return ue.forEach(u,(_,D)=>{var A;Ve("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ut=>`${Ut.fieldPath}:${Ut.kind}`).join(",")}`} to execute ${Hu(t)}`);const N=function(Ut,Bt){const Vt=Xg(Bt);if(void 0===Vt)return null;for(const Yt of Lf(Ut,Vt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(D,_),q=function(Ut,Bt){const Vt=new Map;for(const Yt of Pu(Bt))for(const ei of Lf(Ut,Yt.fieldPath))switch(ei.op){case"==":case"in":Vt.set(Yt.fieldPath.canonicalString(),ei.value);break;case"not-in":case"!=":return Vt.set(Yt.fieldPath.canonicalString(),ei.value),Array.from(Vt.values())}return null}(D,_),se=function(Ut,Bt){const Vt=[];let Yt=!0;for(const ei of Pu(Bt)){const E0=0===ei.kind?II(Ut,ei.fieldPath,Ut.startAt):EI(Ut,ei.fieldPath,Ut.startAt);Vt.push(E0.value),Yt&&(Yt=E0.inclusive)}return new tl(Vt,Yt)}(D,_),ye=function(Ut,Bt){const Vt=[];let Yt=!0;for(const ei of Pu(Bt)){const E0=0===ei.kind?EI(Ut,ei.fieldPath,Ut.endAt):II(Ut,ei.fieldPath,Ut.endAt);Vt.push(E0.value),Yt&&(Yt=E0.inclusive)}return new tl(Vt,Yt)}(D,_),Be=this.en(_,D,se),He=this.en(_,D,ye),Gt=this.nn(_,D,q),Zt=this.sn(_.indexId,N,Be,se.inclusive,He,ye.inclusive,Gt);return ue.forEach(Zt,Ut=>r.J(Ut,t.limit).next(Bt=>{Bt.forEach(Vt=>{const Yt=je.fromSegments(Vt.documentKey);h.has(Yt)||(h=h.add(Yt),g.push(Yt))})}))}).next(()=>g)}return ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:HC(an.create(e.filters,"and")).map(r=>am(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,h,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),A=[];for(let N=0;N<_;++N){const q=t?this.rn(t[N/D]):xm,se=this.on(e,q,r[N%D],o),ye=this.un(e,q,u[N%D],h),Be=g.map(He=>this.on(e,q,He,!0));A.push(...this.createRange(se,ye,Be))}return A}on(e,t,r,o){const u=new Wu(e,je.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new Wu(e,je.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new pS(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let h=null;for(const g of u)r.je(g)&&(!h||g.fields.length>h.fields.length)&&(h=g);return h})}getIndexType(e,t){let r=2;const o=this.Ze(t);return ue.forEach(o,u=>this.tn(e,u).next(h=>{h?0!==r&&h.fields.length<function(g){let _=new Sn(_n.comparator),D=!1;for(const A of g.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:_=_.add(N.field));for(const A of g.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new Hd;for(const o of Pu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.qe(o.kind);pl.Ie.ue(u,h)}return r.Fe()}rn(e){const t=new Hd;return pl.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Hd;return pl.Ie.ue($u(this.databaseId,t),r.qe(function(o){const u=Pu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new Hd);let u=0;for(const h of Pu(e)){const g=r[u++];for(const _ of o)if(this.hn(t,h.fieldPath)&&Td(g))o=this.ln(o,h,g);else{const D=_.qe(h.kind);pl.Ie.ue(g,D)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const g of o){const _=new Hd;_.seed(g.Fe()),pl.Ie.ue(h,_.qe(t.kind)),u.push(_)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof nn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Mm(e),o=qd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const h=[];return ue.forEach(u,g=>o.get([g.indexId,this.uid]).next(_=>{h.push(function(D,A){const N=A?new xf(A.sequenceNumber,new ts(zu(A.readTime),new je(Ds(A.documentKey)),A.largestBatchId)):xf.empty(),q=D.fields.map(([se,ye])=>new em(_n.fromServerFormat(se),ye));return new Fi(D.indexId,D.collectionGroup,q,N)}(g,_))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Mm(e),u=qd(e);return this.dn(e).next(h=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ue.forEach(g,_=>u.put(BC(_.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?ue.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ue.forEach(g,_=>this._n(e,o,_).next(D=>{const A=this.wn(u,_);return D.isEqual(A)?ue.resolve():this.mn(e,u,_,D,A)}))))})}gn(e,t,r,o){return Gd(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return Gd(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=Gd(e);let u=new Sn(Xs);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(h,g)=>{u=u.add(new Wu(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}wn(e,t){let r=new Sn(Xs);const o=this.cn(t,e);if(null==o)return r;const u=Xg(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Td(h))for(const g of h.arrayValue.values||[])r=r.add(new Wu(t.indexId,e.key,this.rn(g),o))}else r=r.add(new Wu(t.indexId,e.key,xm,o));return r}mn(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(g,_,D,A,N){const q=g.getIterator(),se=_.getIterator();let ye=Md(q),Be=Md(se);for(;ye||Be;){let He=!1,Gt=!1;if(ye&&Be){const Zt=D(ye,Be);Zt<0?Gt=!0:Zt>0&&(He=!0)}else null!=ye?Gt=!0:He=!0;He?(A(Be),Be=Md(se)):Gt?(N(ye),ye=Md(q)):(ye=Md(q),Be=Md(se))}}(o,u,Xs,g=>{h.push(this.gn(e,t,r,g))},g=>{h.push(this.yn(e,t,r,g))}),ue.waitFor(h)}dn(e){let t=1;return qd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,g)=>Xs(h,g)).filter((h,g,_)=>!g||0!==Xs(h,_[g-1]));const o=[];o.push(e);for(const h of r){const g=Xs(h,e),_=Xs(h,t);if(0===g)o[0]=e.Ue();else if(g>0&&_<0)o.push(h),o.push(h.Ue());else if(_>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2){if(this.pn(o[h],o[h+1]))return[];u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,xm,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,xm,[]]))}return u}pn(e,t){return Xs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(T_)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||it())).next(T_)}}function C_(n){return Rr(n,"collectionParents")}function Gd(n){return Rr(n,"indexEntries")}function Mm(n){return Rr(n,"indexConfiguration")}function qd(n){return Rr(n,"indexState")}function T_(n){gt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;nm(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ts(e.readTime,e.documentKey,t)}const lE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function A_(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:h},(A,N,q)=>(g++,q.delete()));u.push(_.next(()=>{gt(1===g)}));const D=[];for(const A of t.mutations){const N=XI(e,A.key.path,t.batchId);u.push(o.delete(N)),D.push(A.key)}return ue.waitFor(u).next(()=>D)}function Rm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class Wf{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){gt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Wf(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).Z({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=gl(e),h=$a(e);return h.add({}).next(g=>{gt("number"==typeof g);const _=new qf(g,t,r,o),D=function(q,se,ye){const Be=ye.baseMutations.map(Gt=>Ua(q.ie,Gt)),He=ye.mutations.map(Gt=>Ua(q.ie,Gt));return{userId:se,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:Be,mutations:He}}(this.yt,this.userId,_),A=[];let N=new Sn((q,se)=>kt(q.canonicalString(),se.canonicalString()));for(const q of o){const se=XI(this.userId,q.key.path,g);N=N.add(q.key.path.popLast()),A.push(h.put(D)),A.push(u.put(se,NC))}return N.forEach(q=>{A.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),ue.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return $a(e).get(t).next(r=>r?(gt(r.userId===this.userId),dl(this.yt,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $a(e).Z({index:"userMutationsIndex",range:o},(h,g,_)=>{g.userId===this.userId&&(gt(g.batchId>=r),u=dl(this.yt,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $a(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).W("userMutationsIndex",t).next(r=>r.map(o=>dl(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_m(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return gl(e).Z({range:o},(h,g,_)=>{const[D,A,N]=h,q=Ds(A);if(D===this.userId&&t.path.isEqual(q))return $a(e).get(N).next(se=>{if(!se)throw it();gt(se.userId===this.userId),u.push(dl(this.yt,se))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(kt);const o=[];return t.forEach(u=>{const h=_m(this.userId,u.path),g=IDBKeyRange.lowerBound(h),_=gl(e).Z({range:g},(D,A,N)=>{const[q,se,ye]=D,Be=Ds(se);q===this.userId&&u.path.isEqual(Be)?r=r.add(ye):N.done()});o.push(_)}),ue.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=_m(this.userId,r),h=IDBKeyRange.lowerBound(u);let g=new Sn(kt);return gl(e).Z({range:h},(_,D,A)=>{const[N,q,se]=_,ye=Ds(q);N===this.userId&&r.isPrefixOf(ye)?ye.length===o&&(g=g.add(se)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push($a(e).get(u).next(h=>{if(null===h)throw it();gt(h.userId===this.userId),r.push(dl(this.yt,h))}))}),ue.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return A_(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return gl(e).Z({range:r},(u,h,g)=>{if(u[0]===this.userId){const _=Ds(u[1]);o.push(_)}else g.done()}).next(()=>{gt(0===o.length)})})}containsKey(e,t){return S_(e,this.userId,t)}Rn(e){return dE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function S_(n,e,t){const r=_m(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return gl(n).Z({range:u,X:!0},(g,_,D)=>{const[A,N,q]=g;A===e&&N===o&&(h=!0),D.done()}).next(()=>h)}function $a(n){return Rr(n,"mutations")}function gl(n){return Rr(n,"documentMutations")}function dE(n){return Rr(n,"mutationQueues")}class ml{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ml(0)}static vn(){return new ml(-1)}}class mS{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new ml(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return yl(e).Z((h,g)=>{const _=Nr(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(u)).next(()=>o)}forEachTarget(e,t){return yl(e).Z((r,o)=>{const u=Nr(o);t(u)})}Vn(e){return ZC(e).get("targetGlobalKey").next(t=>(gt(null!==t),t))}Sn(e,t){return ZC(e).put("targetGlobalKey",t)}Dn(e,t){return yl(e).put(hl(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Hu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return yl(e).Z({range:o,index:"queryTargetsIndex"},(h,g,_)=>{const D=Nr(g);Rd(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=vl(e);return t.forEach(h=>{const g=Xr(h.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,h))}),ue.waitFor(o)}removeMatchingKeys(e,t,r){const o=vl(e);return ue.forEach(t,u=>{const h=Xr(u.path);return ue.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=vl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=vl(e);let u=Ht();return o.Z({range:r,X:!0},(h,g,_)=>{const D=Ds(h[1]),A=new je(D);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Xr(t.path),o=IDBKeyRange.bound([r],[rC(r)],!1,!0);let u=0;return vl(e).Z({index:"documentTargetsIndex",X:!0,range:o},([h,g],_,D)=>{0!==h&&(u++,D.done())}).next(()=>u>0)}ne(e,t){return yl(e).get(t).next(r=>r?Nr(r):null)}}function yl(n){return Rr(n,"targets")}function ZC(n){return Rr(n,"targetGlobal")}function vl(n){return Rr(n,"targetDocuments")}function zC([n,e],[t,r]){const o=kt(n,t);return 0===o?kt(e,r):o}class yS{constructor(e){this.xn=e,this.buffer=new Sn(zC),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fa(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ka(r)}yield t.Fn(3e5)}))}}class _S{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Li.at);const r=new yS(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(lE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lE):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,h,g,_,D;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),Qg()<=Fo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-A}ms\n\tDetermined least recently used ${o} in `+(g-h)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(D-_)+`ms\nTotal Duration: ${D-A}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class wS{constructor(e,t){this.db=e,this.garbageCollector=new _S(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return x_(e,r)}removeReference(e,t,r){return x_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return x_(e,t)}Gn(e,t){return function(r,o){let u=!1;return dE(r).tt(h=>S_(r,h,o).next(g=>(g&&(u=!0),ue.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(h,g)=>{if(g<=t){const _=this.Gn(e,h).next(D=>{if(!D)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,vt.min()),vl(e).delete([0,Xr(h.path)])))});o.push(_)}}).next(()=>ue.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return x_(e,t)}Kn(e,t){const r=vl(e);let o,u=Li.at;return r.Z({index:"documentTargetsIndex"},([h,g],{path:_,sequenceNumber:D})=>{0===h?(u!==Li.at&&t(new je(Ds(o)),u),u=D,o=_):u=Li.at}).next(()=>{u!==Li.at&&t(new je(Ds(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function x_(n,e){return vl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xr(e.path),sequenceNumber:r}));var r}class Kf{constructor(){this.changes=new Zu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IS{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yu(e).put(r)}removeEntry(e,t,r){return Yu(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Zf(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return Yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Om(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return Yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Om(t))},(o,u)=>{r={document:this.jn(t,u),size:Rm(u)}}).next(()=>r)}getEntries(e,t){let r=hi();return this.zn(e,t,(o,u)=>{const h=this.jn(o,u);r=r.insert(o,h)}).next(()=>r)}Hn(e,t){let r=hi(),o=new hr(je.comparator);return this.zn(e,t,(u,h)=>{const g=this.jn(u,h);r=r.insert(u,g),o=o.insert(u,Rm(h))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let o=new Sn(N_);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(Om(o.first()),Om(o.last())),h=o.getIterator();let g=h.getNext();return Yu(e).Z({index:"documentKeyIndex",range:u},(_,D,A)=>{const N=je.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&N_(g,N)<0;)r(g,null),g=h.getNext();g&&g.isEqual(N)&&(r(g,D),g=h.hasNext()?h.getNext():null),g?A.j(Om(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Zf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yu(e).W(IDBKeyRange.bound(o,u,!0)).next(h=>{let g=hi();for(const _ of h){const D=this.jn(je.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(D.key,D)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=hi();const h=Pm(t,r),g=Pm(t,ts.max());return Yu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,g,!0)},(_,D,A)=>{const N=this.jn(je.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new Nm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return R_(e).get("remoteDocumentGlobalKey").next(t=>(gt(!!t),t))}Qn(e,t){return R_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function VC(n,e){let t;if(e.document)t=zI(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=zu(e.noDocument.readTime);t=Gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=je.fromSegments(e.unknownDocument.path),o=zu(e.unknownDocument.version);t=Gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Hn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Gn.newInvalidDocument(e)}}function M_(n){return new IS(n)}class Nm extends Kf{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Zu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Sn((u,h)=>kt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),h.isValidDocument()){const _=v_(this.Yn.yt,h);o=o.add(u.path.popLast()),r+=Rm(_)-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=v_(this.Yn.yt,h.convertToNoDocument(vt.min()));t.push(this.Yn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,h)=>{this.Xn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function R_(n){return Rr(n,"remoteDocumentGlobal")}function Yu(n){return Rr(n,"remoteDocumentsV14")}function Om(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pm(n,e){const t=e.documentKey.path.toArray();return[n,Zf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function N_(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=kt(t[u],r[u]),o)return o;return o=kt(t.length,r.length),o||(o=kt(t[t.length-2],r[r.length-2]),o||kt(t[t.length-1],r[r.length-1]))}class WC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class O_{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Bf(r.mutation,o,Jr.empty(),Hn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const o=Js();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let h=Fd();return u.forEach((g,_)=>{h=h.insert(g,_.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Js();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,g)=>{t.set(h,g)})})}computeViews(e,t,r,o){let u=hi();const h=gm(),g=gm();return t.forEach((_,D)=>{const A=r.get(D.key);o.has(D.key)&&(void 0===A||A.mutation instanceof jo)?u=u.insert(D.key,D):void 0!==A&&(h.set(D.key,A.mutation.getFieldMask()),Bf(A.mutation,D,A.mutation.getFieldMask(),Hn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,A)=>h.set(D,A)),t.forEach((D,A)=>{var N;return g.set(D,new WC(A,null!==(N=h.get(D))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=gm();let o=new hr((h,g)=>h-g),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const g of h)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let A=r.get(_)||Jr.empty();A=g.applyToLocalView(D,A),r.set(_,A);const N=(o.get(g.batchId)||Ht()).add(_);o=o.insert(g.batchId,N)})}).next(()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,A=_.value,N=FI();A.forEach(q=>{if(!u.has(q)){const se=RI(t.get(q),r.get(q));null!==se&&N.set(q,se),u=u.add(q)}}),h.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ue.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ue.resolve(Js());let g=-1,_=u;return h.next(D=>ue.forEach(D,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?ue.resolve():this.remoteDocumentCache.getEntry(e,A).next(q=>{_=_.insert(A,q)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,Ht())).next(A=>({batchId:g,changes:ul(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let o=Fd();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Fd();return this.indexManager.getCollectionParents(e,o).next(h=>ue.forEach(h,g=>{const _=(D=t,A=g.child(o),new Gu(A,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,A;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,_)=>{const D=_.getKey();null===o.get(D)&&(o=o.insert(D,Gn.newInvalidDocument(D)))});let h=Fd();return o.forEach((g,_)=>{const D=u.get(g);void 0!==D&&Bf(D.mutation,_,Jr.empty(),Hn.now()),Wv(t,_)&&(h=h.insert(g,_))}),h})}}class ES{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:__(r.bundledQuery),readTime:Er(r.readTime)}),ue.resolve();var r}}class bS{constructor(){this.overlays=new hr(je.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Js();return ue.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const o=Js(),u=t.length+1,h=new je(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new hr((D,A)=>D-A);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let A=u.get(D.largestBatchId);null===A&&(A=Js(),u=u.insert(D.largestBatchId,A)),A.set(D.getKey(),D)}}const g=Js(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,A)=>g.set(D,A)),!(g.size()>=o)););return ue.resolve(g)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const h=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new m_(t,r));let u=this.es.get(t);void 0===u&&(u=Ht(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class P_{constructor(){this.ns=new Sn(Ur.ss),this.rs=new Sn(Ur.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ur(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new je(new on([])),r=new Ur(t,e),o=new Ur(t,e+1),u=[];return this.rs.forEachInRange([r,o],h=>{this.cs(h),u.push(h.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new je(new on([])),r=new Ur(t,e),o=new Ur(t,e+1);let u=Ht();return this.rs.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Ur(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return je.comparator(e.key,t.key)||kt(e._s,t._s)}static os(e,t){return kt(e._s,t._s)||je.comparator(e.key,t.key)}}class km{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Sn(Ur.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const h=new qf(u,t,r,o);this.mutationQueue.push(h);for(const g of o)this.gs=this.gs.add(new Ur(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(h)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),o=new Ur(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],h=>{const g=this.ys(h._s);u.push(g)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(kt);return t.forEach(o=>{const u=new Ur(o,0),h=new Ur(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,h],g=>{r=r.add(g._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const h=new Ur(new je(u),0);let g=new Sn(kt);return this.gs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(g=g.add(_._s)),!0)},h),ue.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){gt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,o=>{const u=new Ur(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ur(t,0),o=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KC{constructor(e){this.Es=e,this.docs=new hr(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=hi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Gn.newInvalidDocument(o))}),ue.resolve(r)}getAllFromCollection(e,t,r){let o=hi();const u=new je(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:g,value:{document:_}}=h.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||nm(bd(_),r)<=0||(o=o.insert(_.key,_.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,t,r,o){it()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DS(this)}getSize(e){return ue.resolve(this.size)}}class DS extends Kf{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class CS{constructor(e){this.persistence=e,this.Rs=new Zu(t=>Hu(t),Rd),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new P_,this.targetCount=0,this.vs=ml.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ml(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((h,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(h),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ue.waitFor(u).next(()=>o)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class YC{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Li(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new CS(this),this.indexManager=new gS,this.remoteDocumentCache=new KC(r=>this.referenceDelegate.xs(r)),this.yt=new y_(t),this.Ns=new ES(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new km(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new QC(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class QC extends Pv{constructor(e){super(),this.currentSequenceNumber=e}}class Fm{constructor(e){this.persistence=e,this.Fs=new P_,this.$s=null}static Bs(e){return new Fm(e)}get Ls(){if(this.$s)return this.$s;throw it()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const o=je.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class JC{constructor(e){this.yt=e}$(e,t,r,o){const u=new Mf("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0}),g.createObjectStore("documentMutations"),XC(e),function(g){g.createObjectStore("remoteDocuments")}(e));let h=ue.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),XC(e)),h=h.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(g,_){return _.store("mutations").W().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0});const A=_.store("mutations"),N=D.map(q=>A.put(q));return ue.waitFor(N)})}(e,u))),h=h.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Us(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(h=h.next(()=>this.Gs(u))),r<8&&o>=8&&(h=h.next(()=>this.Qs(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.js(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:h_});_.createIndex("collectionPathOverlayIndex",f_,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",rE,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:wm});_.createIndex("documentKeyIndex",Im),_.createIndex("collectionGroupIndex",OC)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>this.zs(e,u))),r<15&&o>=15&&(h=h.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:nE}).createIndex("sequenceNumberIndex",kC,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:FC}).createIndex("documentKeyIndex",fS,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Rm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ue.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",h).next(g=>ue.forEach(g,_=>{gt(_.userId===u.userId);const D=dl(this.yt,_);return A_(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((h,g)=>{const _=new on(h),D=[0,Xr(_)];u.push(t.get(D).next(A=>A?ue.resolve():t.put({targetId:0,path:Xr(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:d_});const r=t.store("collectionParents"),o=new D_,u=h=>{if(o.add(h)){const g=h.lastSegment(),_=h.popLast();return r.put({collectionId:g,parent:Xr(_)})}};return t.store("remoteDocuments").Z({X:!0},(h,g)=>{const _=new on(h);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,g,_],D)=>{const A=Ds(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Nr(o),h=hl(this.yt,u);return t.put(h)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,h)=>{const g=t.store("remoteDocumentsV14"),_=(D=h,D.document?new je(on.fromString(D.document.name).popFirst(5)):D.noDocument?je.fromSegments(D.noDocument.path):D.unknownDocument?je.fromSegments(D.unknownDocument.path):it()).path.toArray();var D;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(g.put(A))}).next(()=>ue.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=M_(this.yt),u=new YC(Fm.Bs,this.yt.ie);return r.W().next(h=>{const g=new Map;return h.forEach(_=>{var D;let A=null!==(D=g.get(_.userId))&&void 0!==D?D:Ht();dl(this.yt,_).keys().forEach(N=>A=A.add(N)),g.set(_.userId,A)}),ue.forEach(g,(_,D)=>{const A=new xr(D),N=Dm.re(this.yt,A),q=u.getIndexManager(A),se=Wf.re(A,this.yt,q,u.referenceDelegate);return new O_(o,se,N,q).recalculateAndSaveOverlaysForDocumentKeys(new g_(t,Li.at),_).next()})})}}function XC(n){n.createObjectStore("targetDocuments",{keyPath:eE}).createIndex("documentTargetsIndex",tE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PC,{unique:!0}),n.createObjectStore("targetGlobal")}const k_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lm{constructor(e,t,r,o,u,h,g,_,D,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=h,this.document=g,this.Js=D,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=q=>Promise.resolve(),!Lm.C())throw new Pe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wS(this,o),this.ii=t+"main",this.yt=new y_(_),this.ri=new bs(this.ii,this.Xs,new JC(this.yt)),this.Cs=new mS(this.referenceDelegate,this.yt),this.remoteDocumentCache=M_(this.yt),this.Ns=new oE,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,k_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Li(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>F_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Fa(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zd(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return F_(e).delete(this.clientId)}yi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Rr(r,"clientMetadata");return o.W().next(u=>{const h=e.Ii(u,18e5),g=u.filter(_=>-1===h.indexOf(_));return ue.forEach(g,_=>o.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Zd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,k_);return!1}}return!(!this.networkEnabled||!this.inForeground)||F_(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new g_(t,Li.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>F_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Wf.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qC(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Dm.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(h=this.Xs)?LC:14===h?sE:13===h?iE:12===h?p_:11===h?Em:void it();var h;let g;return this.ri.runTransaction(e,o,u,_=>(g=new g_(_,this.Ss?this.Ss.next():Li.at),"readwrite-primary"===t?this.fi(g).next(D=>!!D||this.di(g)).next(D=>{if(!D)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Pe(de.FAILED_PRECONDITION,iI);return r(g)}).next(D=>this.wi(g).next(()=>D)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return Zd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(de.FAILED_PRECONDITION,k_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zd(e).put("owner",t)}static C(){return bs.C()}_i(e){const t=Zd(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,sn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zd(n){return Rr(n,"owner")}function F_(n){return Rr(n,"clientMetadata")}function ns(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class L_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Ht(),o=Ht();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new L_(e,t.fromCache,r,o)}}class Vm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(yC(t))return ue.resolve(null);let r=di(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=lm(t,null,"F"),r=di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const h=Ht(...u);return this.Ni.getDocuments(e,h).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.Fi(t,g);return this.$i(t,D,h,_.readTime)?this.ki(e,lm(t,null,"F")):this.Bi(e,D,t,_)}))})))}Oi(e,t,r,o){return yC(t)||o.isEqual(vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const h=this.Fi(t,u);return this.$i(t,h,r,o)?this.Mi(e,t):(Qg()<=Fo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zv(t)),this.Bi(e,h,t,tm(o,-1)))})}Fi(e,t){let r=new Sn(DI(e));return t.forEach((o,u)=>{Wv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Qg()<=Fo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",zv(t)),this.Ni.getDocumentsMatchingQuery(e,t,ts.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class eT{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new hr(kt),this.Ui=new Zu(u=>Hu(u),Rd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function rs(n,e,t,r){return new eT(n,e,t,r)}function hE(n,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,we.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],g=[];let _=Ht();for(const D of o){h.push(D.batchId);for(const A of D.mutations)_=_.add(A.key)}for(const D of u){g.push(D.batchId);for(const A of D.mutations)_=_.add(A.key)}return t.localDocuments.getDocuments(r,_).next(D=>({ji:D,removedBatchIds:h,addedBatchIds:g}))})})}),Yf.apply(this,arguments)}function tT(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,g,_,D){const A=_.batch,N=A.keys();let q=ue.resolve();return N.forEach(se=>{q=q.next(()=>D.getEntry(g,se)).next(ye=>{const Be=_.docVersions.get(se);gt(null!==Be),ye.version.compareTo(Be)<0&&(A.applyToRemoteDocument(ye,_),ye.isValidDocument()&&(ye.setReadTime(_.commitVersion),D.addEntry(ye)))})}),q.next(()=>h.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let g=Ht();for(let _=0;_<h.mutationResults.length;++_)h.mutationResults[_].transformResults.length>0&&(g=g.add(h.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function fE(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function V_(n,e){const t=We(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const g=[];e.targetChanges.forEach((A,N)=>{const q=o.get(N);if(!q)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let se=q.withSequenceNumber(u.currentSequenceNumber);var ye,Be,He;e.targetMismatches.has(N)?se=se.withResumeToken(Mr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):A.resumeToken.approximateByteSize()>0&&(se=se.withResumeToken(A.resumeToken,r)),o=o.insert(N,se),Be=se,He=A,(0===(ye=q).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-ye.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,se))});let _=hi(),D=Ht();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(U_(u,h,e.documentUpdates).next(A=>{_=A.Wi,D=A.zi})),!r.isEqual(vt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return ue.waitFor(g).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.qi=o,u))}function U_(n,e,t){let r=Ht(),o=Ht();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let h=hi();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(vt.min())?(e.removeEntry(g,_.readTime),h=h.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),h=h.insert(g,_)):Ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{Wi:h,zi:o}})}function pE(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zd(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ue.resolve(o)):t.Cs.allocateTargetId(r).next(h=>(o=new Ba(e,h,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function _l(n,e,t){return Um.apply(this,arguments)}function Um(){return Um=(0,we.Z)(function*(n,e,t){const r=We(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Fa(h))throw h;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),Um.apply(this,arguments)}function Bm(n,e,t){const r=We(n);let o=vt.min(),u=Ht();return r.persistence.runTransaction("Execute query","readonly",h=>function(g,_,D){const A=We(g),N=A.Ui.get(D);return void 0!==N?ue.resolve(A.qi.get(N)):A.Cs.getTargetData(_,D)}(r,h,di(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(h,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(h,e,t?o:vt.min(),t?u:Ht())).next(g=>($m(r,Kv(e),g),{documents:g,Hi:u})))}function B_(n,e){const t=We(n),r=We(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(h=>h?h.target:null))}function gE(n,e){const t=We(n),r=t.Ki.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,tm(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>($m(t,e,o),o))}function $m(n,e,t){let r=n.Ki.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function jm(){return jm=(0,we.Z)(function*(n,e,t,r){const o=We(n);let u=Ht(),h=hi();for(const D of t){const A=e.Ji(D.metadata.name);D.document&&(u=u.add(A));const N=e.Yi(D);N.setReadTime(e.Xi(D.metadata.readTime)),h=h.insert(A,N)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),_=yield zd(o,(D=r,di(Vf(on.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>U_(D,g,h).next(A=>(g.apply(D),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>o.Cs.addMatchingKeys(D,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,A.Wi,A.zi)).next(()=>A.Wi)))}),jm.apply(this,arguments)}function $_(n,e){return eo.apply(this,arguments)}function eo(){return eo=(0,we.Z)(function*(n,e,t=Ht()){const r=yield zd(n,di(__(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Er(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(Mr.EMPTY_BYTE_STRING,h);return o.qi=o.qi.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),eo.apply(this,arguments)}function mE(n,e){return`firestore_clients_${n}_${e}`}function nT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function j_(n,e){return`firestore_targets_${n}_${e}`}class Hm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new Pe(o.error.code,o.error.message))),h?new Hm(e,t,o.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new Qf(e,r.state,o):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=mm();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=lI(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new Gm(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qm{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qm(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yE{constructor(){this.activeTargetIds=mm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zm{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new hr(kt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=mE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new yE),this.lr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(mE(e.persistenceKey,o));if(u){const h=Gm.Zi(o,u);h&&(e.ur=e.ur.insert(h.clientId,h))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(j_(this.persistenceKey,e));if(r){const o=Qf.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(j_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let h=Li.at;if(null!=u)try{const g=JSON.parse(u);gt("number"==typeof g),h=g}catch(g){lr("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue);o!==Li.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new Hm(this.currentUser,e,t,r),u=nT(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=nT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=j_(this.persistenceKey,e),u=new Qf(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Gm.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return Hm.Zi(new xr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Qf.Zi(o,t)}yr(e){return qm.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),h=[],g=[];return u.forEach(_=>{o.has(_)||h.push(_)}),o.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(h,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=mm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class vE{constructor(){this.Lr=new yE,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new yE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _E{Ur(e){}shutdown(){}}class rT{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const H_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wE{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class IE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const h=this.ho(e,t);Ve("RestConnection","Sending: ",h,r);const g={};return this.lo(g,o,u),this.fo(e,h,g,r).then(_=>(Ve("RestConnection","Received: ",_),_),_=>{throw Ou("RestConnection",`${e} failed with error: `,_,"url: ",h,"request:",r),_})}_o(e,t,r,o,u,h){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${H_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,h)=>{const g=new QD;g.setWithCredentials(!0),g.listenOnce(Qw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case xv.NO_ERROR:const D=g.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(D)),u(D);break;case xv.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),h(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case xv.HTTP_ERROR:const A=g.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const q=N?.error;if(q&&q.status&&q.message){const se=function(ye){const Be=ye.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Be)>=0?Be:de.UNKNOWN}(q.status);h(new Pe(se,q.message))}else h(new Pe(de.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);g.send(t,"POST",_,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Sv(),h=Yw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Xw({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=o.join("");Ve("Connection","Creating WebChannel: "+_,g);const D=u.createWebChannel(_,g);let A=!1,N=!1;const q=new wE({Hr:ye=>{N?Ve("Connection","Not sending because WebChannel is closed:",ye):(A||(Ve("Connection","Opening WebChannel transport."),D.open(),A=!0),Ve("Connection","WebChannel sending:",ye),D.send(ye))},Jr:()=>D.close()}),se=(ye,Be,He)=>{ye.listen(Be,Gt=>{try{He(Gt)}catch(Zt){setTimeout(()=>{throw Zt},0)}})};return se(D,Yg.EventType.OPEN,()=>{N||Ve("Connection","WebChannel transport opened.")}),se(D,Yg.EventType.CLOSE,()=>{N||(N=!0,Ve("Connection","WebChannel transport closed"),q.io())}),se(D,Yg.EventType.ERROR,ye=>{N||(N=!0,Ou("Connection","WebChannel transport errored:",ye),q.io(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),se(D,Yg.EventType.MESSAGE,ye=>{var Be;if(!N){const He=ye.data[0];gt(!!He);const Gt=He,Zt=Gt.error||(null===(Be=Gt[0])||void 0===Be?void 0:Be.error);if(Zt){Ve("Connection","WebChannel received error:",Zt);const Ut=Zt.status;let Bt=function(Yt){const ei=fr[Yt];if(void 0!==ei)return pm(ei)}(Ut),Vt=Zt.message;void 0===Bt&&(Bt=de.INTERNAL,Vt="Unknown error status: "+Ut+" with message "+Zt.message),N=!0,q.io(new Pe(Bt,Vt)),D.close()}else Ve("Connection","WebChannel received:",He),q.ro(He)}}),se(h,Jw.STAT_EVENT,ye=>{ye.stat===Mv.PROXY?Ve("Connection","Detected buffering proxy"):ye.stat===Mv.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.so()},0),q}}function G_(){return typeof window<"u"?window:null}function Jf(){return typeof document<"u"?document:null}function Wd(n){return new $I(n,!0)}class Kd{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Xf{constructor(e,t,r,o,u,h,g,_){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Kd(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,we.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,we.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EE extends Xf{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function SC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:it(),o=e.targetChange.targetIds||[],u=function(_,D){return _.wt?(gt(void 0===D||"string"==typeof D),Mr.fromBase64String(D||"")):(gt(void 0===D||D instanceof Uint8Array),Mr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&function(_){const D=void 0===_.code?de.UNKNOWN:pm(_.code);return new Pe(D,_.message||"")}(h);t=new s_(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Ho(n,r.document.name),u=Er(r.document.updateTime),h=r.document.createTime?Er(r.document.createTime):vt.min(),g=new vr({mapValue:{fields:r.document.fields}}),_=Gn.newFoundDocument(o,u,h,g);t=new $f(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=Ho(n,r.document),u=r.readTime?Er(r.readTime):vt.min(),h=Gn.newNoDocument(o,u);t=new $f([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Ho(n,r.document);t=new $f([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new bC(r.count||0);t=new i_(r.targetId,u)}}var _;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Er(u.readTime):vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Hf(this.yt),t.addTarget=function(o,u){let h;const g=u.target;return h=um(g)?{documents:c_(o,g)}:{query:vm(o,g)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=jI(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(h.readTime=Vd(o,u.snapshotVersion.toTimestamp())),h}(this.yt,e);const r=function xC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Hf(this.yt),t.removeTarget=e,this.Bo(t)}}class iT extends Xf{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function WI(n,e){return n&&n.length>0?(gt(void 0!==e),n.map(t=>function(r,o){let u=Er(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Er(o)),new MI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.Zo(r,t)}return gt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Hf(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ua(this.yt,r))};this.Bo(t)}}class bE extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(de.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection._o(e,t,r,u,h,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Pe(de.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class sT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(lr(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class TS{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(g=>{r.enqueueAndForget((0,we.Z)(function*(){var _;ja(h)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,we.Z)(function*(D){const A=We(D);A._u.add(4),yield Yd(A),A.gu.set("Unknown"),A._u.delete(4),yield zm(A)}),function(D){return _.apply(this,arguments)})(h))}))}),this.gu=new sT(r,o)}}function zm(n){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,we.Z)(function*(n){if(ja(n))for(const e of n.wu)yield e(!0)}),Wm.apply(this,arguments)}function Yd(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,we.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Z_.apply(this,arguments)}function Km(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),AE(t)?TE(t):rp(t).ko()&&CE(t,e))}function Ym(n,e){const t=We(n),r=rp(t);t.du.delete(e),r.ko()&&oT(t,e),0===t.du.size&&(r.ko()?r.Fo():ja(t)&&t.gu.set("Unknown"))}function CE(n,e){n.yu.Ot(e.targetId),rp(n).zo(e)}function oT(n,e){n.yu.Ot(e),rp(n).Ho(e)}function TE(n){n.yu=new CC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),rp(n).start(),n.gu.uu()}function AE(n){return ja(n)&&!rp(n).No()&&n.du.size>0}function ja(n){return 0===We(n)._u.size}function ep(n){n.yu=void 0}function aT(n){return z_.apply(this,arguments)}function z_(){return z_=(0,we.Z)(function*(n){n.du.forEach((e,t)=>{CE(n,e)})}),z_.apply(this,arguments)}function SE(n,e){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,we.Z)(function*(n,e){ep(n),AE(n)?(n.gu.hu(e),TE(n)):n.gu.set("Unknown")}),Ha.apply(this,arguments)}function xE(n,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,we.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof s_&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,u){const h=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,h),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qd(n,r)}else if(e instanceof $f?n.yu.Kt(e):e instanceof i_?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(vt.min()))try{const r=yield fE(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.yu.Zt(u);return h.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=o.du.get(_);D&&o.du.set(_,D.withResumeToken(g.resumeToken,u))}}),h.targetMismatches.forEach(g=>{const _=o.du.get(g);if(!_)return;o.du.set(g,_.withResumeToken(Mr.EMPTY_BYTE_STRING,_.snapshotVersion)),oT(o,g);const D=new Ba(_.target,g,1,_.sequenceNumber);CE(o,D)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield Qd(n,r)}var r}),tp.apply(this,arguments)}function Qd(n,e,t){return W_.apply(this,arguments)}function W_(){return W_=(0,we.Z)(function*(n,e,t){if(!Fa(e))throw e;n._u.add(1),yield Yd(n),n.gu.set("Offline"),t||(t=()=>fE(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield zm(n)}))}),W_.apply(this,arguments)}function Qm(n,e){return e().catch(t=>Qd(n,t,e))}function Ju(n){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,we.Z)(function*(n){const e=We(n),t=Ga(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;AS(e);)try{const o=yield pE(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,SS(e,o)}catch(o){yield Qd(e,o)}uT(e)&&cT(e)}),Jd.apply(this,arguments)}function AS(n){return ja(n)&&n.fu.length<10}function SS(n,e){n.fu.push(e);const t=Ga(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function uT(n){return ja(n)&&!Ga(n).No()&&n.fu.length>0}function cT(n){Ga(n).start()}function ME(n){return K_.apply(this,arguments)}function K_(){return K_=(0,we.Z)(function*(n){Ga(n).eu()}),K_.apply(this,arguments)}function lT(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,we.Z)(function*(n){const e=Ga(n);for(const t of n.fu)e.Xo(t.mutations)}),Y_.apply(this,arguments)}function dT(n,e,t){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,we.Z)(function*(n,e,t){const r=n.fu.shift(),o=bm.from(r,e,t);yield Qm(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Ju(n)}),Jm.apply(this,arguments)}function RE(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,we.Z)(function*(n,e){var t;e&&Ga(n).Yo&&(yield(t=(0,we.Z)(function*(r,o){if(t_(u=o.code)&&u!==de.ABORTED){const h=r.fu.shift();Ga(r).Mo(),yield Qm(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Ju(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),uT(n)&&cT(n)}),Xm.apply(this,arguments)}function NE(n,e){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,we.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=ja(t);t._u.add(3),yield Yd(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield zm(t)}),Q_.apply(this,arguments)}function ey(n,e){return np.apply(this,arguments)}function np(){return np=(0,we.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield zm(t)):e||(t._u.add(2),yield Yd(t),t.gu.set("Unknown"))}),np.apply(this,arguments)}function rp(n){return n.pu||(n.pu=function(e,t,r){const o=We(e);return o.su(),new EE(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:aT.bind(null,n),Zr:SE.bind(null,n),Wo:xE.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.pu.Mo(),AE(n)?TE(n):n.gu.set("Unknown")):(yield n.pu.stop(),ep(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Ga(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.su(),new iT(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:ME.bind(null,n),Zr:RE.bind(null,n),tu:lT.bind(null,n),Zo:dT.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Mo(),yield Ju(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class ip{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,g=new ip(e,t,h,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xd(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Fa(n))return new Pe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class eh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Fd(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new eh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new eh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class hT{constructor(){this.Tu=new hr(je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):it():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class sp{constructor(e,t,r,o,u,h,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,o,u){const h=[];return t.forEach(g=>{h.push({type:0,doc:g})}),new sp(e,t,eh.emptySet(t),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class fT{constructor(){this.Au=void 0,this.listeners=[]}}class pT{constructor(){this.queries=new Zu(e=>bI(e),Uf),this.onlineState="Unknown",this.Ru=new Set}}function J_(n,e){return OE.apply(this,arguments)}function OE(){return OE=(0,we.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new fT),o)try{u.Au=yield t.onListen(r)}catch(h){const g=Xd(h,`Initialization of query '${zv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&X_(t)}),OE.apply(this,arguments)}function PE(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,we.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),kE.apply(this,arguments)}function xS(n,e){const t=We(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const g of h.listeners)g.Pu(o)&&(r=!0);h.Au=o}}r&&X_(t)}function MS(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function X_(n){n.Ru.forEach(e=>{e.next()})}class FE{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new sp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=sp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class RS{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class gT{constructor(e){this.yt=e}Ji(e){return Ho(this.yt,e)}Yi(e){return e.metadata.exists?zI(this.yt,e.document,!1):Gn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Er(e)}}class NS{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mT(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=on.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new gT(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const h of o.metadata.queries){const g=(t.get(h)||Ht()).add(u);t.set(h,g)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function Qu(n,e,t,r){return jm.apply(this,arguments)}(e.localStore,new gT(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield $_(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function mT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yT{constructor(e){this.key=e}}class i{constructor(e){this.key=e}}class s{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ht(),this.mutatedKeys=Ht(),this.Gu=DI(e),this.Qu=new eh(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new hT,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const q=o.get(A),se=Wv(this.query,N)?N:null,ye=!!q&&this.mutatedKeys.has(q.key),Be=!!se&&(se.hasLocalMutations||this.mutatedKeys.has(se.key)&&se.hasCommittedMutations);let He=!1;q&&se?q.data.isEqual(se.data)?ye!==Be&&(r.track({type:3,doc:se}),He=!0):this.Hu(q,se)||(r.track({type:2,doc:se}),He=!0,(_&&this.Gu(se,_)>0||D&&this.Gu(se,D)<0)&&(g=!0)):!q&&se?(r.track({type:0,doc:se}),He=!0):q&&!se&&(r.track({type:1,doc:q}),He=!0,(_||D)&&(g=!0)),He&&(se?(h=h.add(se),u=Be?u.add(A):u.delete(A)):(h=h.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const A="F"===this.query.limitType?h.last():h.first();h=h.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:h,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,A)=>function(N,q){const se=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return se(N)-se(q)}(D.type,A.type)||this.Gu(D.doc,A.doc)),this.Ju(r);const h=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.Uu;return this.Uu=g,0!==u.length||_?{snapshot:new sp(this.query,e.Qu,o,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new hT,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ht(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new i(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new yT(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Ht();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return sp.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class a{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class c{constructor(e){this.key=e,this.nc=!1}}class d{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new Zu(g=>bI(g),Uf),this.rc=new Map,this.oc=new Set,this.uc=new hr(je.comparator),this.cc=new Map,this.ac=new P_,this.hc={},this.lc=new Map,this.fc=ml.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function f(n,e){return y.apply(this,arguments)}function y(){return y=(0,we.Z)(function*(n,e){const t=TT(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const h=yield zd(t.localStore,di(e));t.isPrimaryClient&&Km(t.remoteStore,h);const g=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield w(t,e,r,"current"===g,h.resumeToken)}return o}),y.apply(this,arguments)}function w(n,e,t,r,o){return E.apply(this,arguments)}function E(){return E=(0,we.Z)(function*(n,e,t,r,o){n._c=(N,q,se)=>{return(ye=(0,we.Z)(function*(Be,He,Gt,Zt){let Ut=He.view.Wu(Gt);Ut.$i&&(Ut=yield Bm(Be.localStore,He.query,!1).then(({documents:Yt})=>He.view.Wu(Yt,Ut)));const Bt=Zt&&Zt.targetChanges.get(He.targetId),Vt=He.view.applyChanges(Ut,Be.isPrimaryClient,Bt);return up(Be,He.targetId,Vt.Xu),Vt.snapshot}),function(Be,He,Gt,Zt){return ye.apply(this,arguments)})(n,N,q,se);var ye};const u=yield Bm(n.localStore,e,!0),h=new s(e,u.Hi),g=h.Wu(u.documents),_=cl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),D=h.applyChanges(g,n.isPrimaryClient,_);up(n,t,D.Xu);const A=new a(e,t,h);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),E.apply(this,arguments)}function T(n,e){return R.apply(this,arguments)}function R(){return R=(0,we.Z)(function*(n,e){const t=We(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!Uf(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _l(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ym(t.remoteStore,r.targetId),Xu(t,r.targetId)}).catch(ka))):(Xu(t,r.targetId),yield _l(t.localStore,r.targetId,!0))}),R.apply(this,arguments)}function Z(){return Z=(0,we.Z)(function*(n,e,t){const r=AT(n);try{const o=yield function(u,h){const g=We(u),_=Hn.now(),D=h.reduce((q,se)=>q.add(se.key),Ht());let A,N;return g.persistence.runTransaction("Locally write mutations","readwrite",q=>{let se=hi(),ye=Ht();return g.Gi.getEntries(q,D).next(Be=>{se=Be,se.forEach((He,Gt)=>{Gt.isValidDocument()||(ye=ye.add(He))})}).next(()=>g.localDocuments.getOverlayedDocuments(q,se)).next(Be=>{A=Be;const He=[];for(const Gt of h){const Zt=EC(Gt,A.get(Gt.key).overlayedDocument);null!=Zt&&He.push(new jo(Gt.key,Zt,wI(Zt.value.mapValue),Kn.exists(!0)))}return g.mutationQueue.addMutationBatch(q,_,He,h)}).next(Be=>{N=Be;const He=Be.applyToLocalDocumentSet(A,ye);return g.documentOverlayCache.saveOverlays(q,Be.batchId,He)})}).then(()=>({batchId:N.batchId,changes:ul(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,g){let _=u.hc[u.currentUser.toKey()];_||(_=new hr(kt)),_=_.insert(h,g),u.hc[u.currentUser.toKey()]=_}(r,o.batchId,t),yield to(r,o.changes),yield Ju(r.remoteStore)}catch(o){const u=Xd(o,"Failed to persist write");t.reject(u)}}),Z.apply(this,arguments)}function ee(n,e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,we.Z)(function*(n,e){const t=We(n);try{const r=yield V_(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.cc.get(u);h&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.nc=!0:o.modifiedDocuments.size>0?gt(h.nc):o.removedDocuments.size>0&&(gt(h.nc),h.nc=!1))}),yield to(t,r,e)}catch(r){yield ka(r)}}),Ie.apply(this,arguments)}function $e(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,h)=>{const g=h.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,h){const g=We(u);g.onlineState=h;let _=!1;g.queries.forEach((D,A)=>{for(const N of A.listeners)N.bu(h)&&(_=!0)}),_&&X_(g)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ze(n,e,t){return at.apply(this,arguments)}function at(){return at=(0,we.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let h=new hr(je.comparator);h=h.insert(u,Gn.newNoDocument(u,vt.min()));const g=Ht().add(u),_=new Ld(vt.min(),new Map,new Sn(kt),h,g);yield ee(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),cp(r)}else yield _l(r.localStore,e,!1).then(()=>Xu(r,e,t)).catch(ka)}),at.apply(this,arguments)}function It(n,e){return xe.apply(this,arguments)}function xe(){return xe=(0,we.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield tT(t.localStore,e);ap(t,r,null),op(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield to(t,o)}catch(o){yield ka(o)}}),xe.apply(this,arguments)}function At(n,e,t){return ln.apply(this,arguments)}function ln(){return ln=(0,we.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,h){const g=We(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,h).next(A=>(gt(null!==A),D=A.keys(),g.mutationQueue.removeMutationBatch(_,A))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,h)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);ap(r,e,t),op(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield to(r,o)}catch(o){yield ka(o)}}),ln.apply(this,arguments)}function qa(){return qa=(0,we.Z)(function*(n,e){const t=We(n);ja(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=We(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>h.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Xd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),qa.apply(this,arguments)}function op(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function ap(n,e,t){const r=We(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Xu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||ty(n,r)})}function ty(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Ym(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),cp(n))}function up(n,e,t){for(const r of t)r instanceof yT?(n.ac.addReference(r.key,e),e0(n,r)):r instanceof i?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||ty(n,r.key)):it()}function e0(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),cp(n))}function cp(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new je(on.fromString(e)),r=n.fc.next();n.cc.set(r,new c(t)),n.uc=n.uc.insert(t,r),Km(n.remoteStore,new Ba(di(Vf(t.path)),r,2,Li.at))}}function to(n,e,t){return lp.apply(this,arguments)}function lp(){return lp=(0,we.Z)(function*(n,e,t){const r=We(n),o=[],u=[],h=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{h.push(r._c(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){o.push(D);const A=L_.Ci(_.targetId,D);u.push(A)}}))}),yield Promise.all(h),r.sc.Wo(o),yield(g=(0,we.Z)(function*(_,D){const A=We(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ue.forEach(D,q=>ue.forEach(q.Si,se=>A.persistence.referenceDelegate.addReference(N,q.targetId,se)).next(()=>ue.forEach(q.Di,se=>A.persistence.referenceDelegate.removeReference(N,q.targetId,se)))))}catch(N){if(!Fa(N))throw N;Ve("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const q=N.targetId;if(!N.fromCache){const se=A.qi.get(q),Be=se.withLastLimboFreeSnapshotVersion(se.snapshotVersion);A.qi=A.qi.insert(q,Be)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),lp.apply(this,arguments)}function xM(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,we.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield hE(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(h=>{h.forEach(g=>{g.reject(new Pe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield to(t,r.ji)}var o}),vT.apply(this,arguments)}function MM(n,e){const t=We(n),r=t.cc.get(e);if(r&&r.nc)return Ht().add(r.key);{let o=Ht();const u=t.rc.get(e);if(!u)return o;for(const h of u){const g=t.ic.get(h);o=o.unionWith(g.view.ju)}return o}}function RM(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,we.Z)(function*(n,e){const t=We(n),r=yield Bm(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&up(t,e.targetId,o.Xu),o}),_T.apply(this,arguments)}function NM(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,we.Z)(function*(n,e){const t=We(n);return gE(t.localStore,e).then(r=>to(t,r))}),wT.apply(this,arguments)}function OM(n,e,t,r){return IT.apply(this,arguments)}function IT(){return IT=(0,we.Z)(function*(n,e,t,r){const o=We(n),u=yield function(h,g){const _=We(h),D=We(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>D.Tn(A,g).next(N=>N?_.localDocuments.getDocuments(A,N):ue.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield Ju(o.remoteStore):"acknowledged"===t||"rejected"===t?(ap(o,e,r||null),op(o,e),g=e,We(We(o.localStore).mutationQueue).An(g)):it(),yield to(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),IT.apply(this,arguments)}function ET(){return ET=(0,we.Z)(function*(n,e){const t=We(n);if(TT(t),AT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield OS(t,r.toArray());t.dc=!0,yield ey(t.remoteStore,!0);for(const u of o)Km(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Xu(t,h),_l(t.localStore,h,!0))),Ym(t.remoteStore,h)}),yield o,yield OS(t,r),function(u){const h=We(u);h.cc.forEach((g,_)=>{Ym(h.remoteStore,_)}),h.ac.fs(),h.cc=new Map,h.uc=new hr(je.comparator)}(t),t.dc=!1,yield ey(t.remoteStore,!1)}}),ET.apply(this,arguments)}function OS(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,we.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const h of e){let g;const _=r.rc.get(h);if(_&&0!==_.length){g=yield zd(r.localStore,di(_[0]));for(const D of _){const A=r.ic.get(D),N=yield RM(r,A);N.snapshot&&u.push(N.snapshot)}}else{const D=yield B_(r.localStore,h);g=yield zd(r.localStore,D),yield w(r,PS(D),h,!1,g.resumeToken)}o.push(g)}return r.sc.Wo(u),o}),bT.apply(this,arguments)}function PS(n){return mC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kM(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function FM(n,e,t,r){return DT.apply(this,arguments)}function DT(){return DT=(0,we.Z)(function*(n,e,t,r){const o=We(n);if(o.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield gE(o.localStore,Kv(u[0])),g=Ld.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Mr.EMPTY_BYTE_STRING);yield to(o,h,g);break}case"rejected":yield _l(o.localStore,e,!0),Xu(o,e,r);break;default:it()}}),DT.apply(this,arguments)}function LM(n,e,t){return CT.apply(this,arguments)}function CT(){return CT=(0,we.Z)(function*(n,e,t){const r=TT(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield B_(r.localStore,o),h=yield zd(r.localStore,u);yield w(r,PS(u),h.targetId,!1,h.resumeToken),Km(r.remoteStore,h)}for(const o of t)r.rc.has(o)&&(yield _l(r.localStore,o,!1).then(()=>{Ym(r.remoteStore,o),Xu(r,o)}).catch(ka))}}),CT.apply(this,arguments)}function TT(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ee.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ze.bind(null,e),e.sc.Wo=xS.bind(null,e.eventManager),e.sc.wc=MS.bind(null,e.eventManager),e}function AT(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=It.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=At.bind(null,e),e}class kS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.yt=Wd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return rs(this.persistence,new Vm,e.initialUser,this.yt)}yc(e){return new YC(Fm.Bs,this.yt)}gc(e){return new vE}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FS extends kS{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield AT(r.Ac.syncEngine),yield Ju(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return rs(this.persistence,new Vm,e.initialUser,this.yt)}Tc(e,t){return new vS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new aI(t,this.persistence);return new oI(e.asyncQueue,r)}yc(e){const t=ns(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new Lm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,G_(),Jf(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new vE}}class UM extends FS{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof Zm&&(r.sharedClientState.syncEngine={Fr:OM.bind(null,o),$r:FM.bind(null,o),Br:LM.bind(null,o),vi:kM.bind(null,o),Mr:NM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,we.Z)(function*(h){yield function PM(n,e){return ET.apply(this,arguments)}(r.Ac.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}gc(e){const t=G_();if(!Zm.C(t))throw new Pe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ns(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ST{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>$e(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=xM.bind(null,r.syncEngine),yield ey(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pT}createDatastore(e){const t=Wd(e.databaseInfo.databaseId),r=new IE(e.databaseInfo);return new bE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>$e(this.syncEngine,g,0),h=rT.C()?new rT:new _E,new TS(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,g,_,D){const A=new d(r,o,u,h,g,_);return D&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=We(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Yd(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xT(n,e,t){if(!t)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LS(n,e,t,r){if(!0===e&&!0===r)throw new Pe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VS(n){if(!je.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function US(n){if(je.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LE(n);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BS(n,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const $S=new Map;class jS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class t0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new XD;switch(t.type){case"gapi":return new rI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$S.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),$S.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class ec extends wi{constructor(e,t,r){super(e,t,Vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new je(e))}withConverter(e){return new ec(this.firestore,e,this._path)}}function GS(n,e,...t){if(n=(0,sn.m9)(n),xT("collection","path",e),n instanceof t0){const r=on.fromString(e,...t);return US(r),new ec(n,null,r)}{if(!(n instanceof sr||n instanceof ec))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return US(r),new ec(n.firestore,null,r)}}function VE(n,e,...t){if(n=(0,sn.m9)(n),1===arguments.length&&(e=Ov.R()),xT("doc","path",e),n instanceof t0){const r=on.fromString(e,...t);return VS(r),new sr(n,null,new je(r))}{if(!(n instanceof sr||n instanceof ec))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return VS(r),new sr(n.firestore,n instanceof ec?n.converter:null,new je(r))}}function qS(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),(n instanceof sr||n instanceof ec)&&(e instanceof sr||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function MT(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),n instanceof wi&&e instanceof wi&&n.firestore===e.firestore&&Uf(n._query,e._query)&&n.converter===e.converter}function ZS(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class UE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $M{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Xt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new RS(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,we.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(u,h){const g=We(u),_=Hf(g.yt)+"/documents",D={documents:h.map(se=>jf(g.yt,se))},A=yield g._o("BatchGetDocuments",_,D,h.length),N=new Map;A.forEach(se=>{const ye=function AC(n,e){return"found"in e?function(t,r){gt(!!r.found);const o=Ho(t,r.found.name),u=Er(r.found.updateTime),h=r.found.createTime?Er(r.found.createTime):vt.min(),g=new vr({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(o,u,h,g)}(n,e):"missing"in e?function(t,r){gt(!!r.missing),gt(!!r.readTime);const o=Ho(t,r.missing),u=Er(r.readTime);return Gn.newNoDocument(o,u)}(n,e):it()}(g.yt,se);N.set(ye.key.toString(),ye)});const q=[];return h.forEach(se=>{const ye=N.get(se.toString());gt(!!ye),q.push(ye)}),q}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new e_(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(o,u){const h=We(o),g=Hf(h.yt)+"/documents",_={writes:u.map(D=>Ua(h.yt,D))};yield h.ao("Commit",g,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Kn.exists(!1):Kn.updateTime(t):Kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Pe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(t)}return Kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Kd(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,we.Z)(function*(){const t=new GM(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Rf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!t_(t)}return!1}}class ZM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=xr.UNAUTHENTICATED,this.clientId=Ov.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,we.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Ve("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Xd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function zS(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(u){r.isEqual(u)||(yield hE(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),RT.apply(this,arguments)}function WS(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OT(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>NE(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>NE(e.remoteStore,u)),n.onlineComponents=e}),NT.apply(this,arguments)}function OT(n){return PT.apply(this,arguments)}function PT(){return PT=(0,we.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield zS(n,new kS)),n.offlineComponents}),PT.apply(this,arguments)}function BE(n){return kT.apply(this,arguments)}function kT(){return kT=(0,we.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield WS(n,new ST)),n.onlineComponents}),kT.apply(this,arguments)}function KS(n){return OT(n).then(e=>e.persistence)}function $E(n){return OT(n).then(e=>e.localStore)}function FT(n){return BE(n).then(e=>e.remoteStore)}function LT(n){return BE(n).then(e=>e.syncEngine)}function ny(n){return VT.apply(this,arguments)}function VT(){return VT=(0,we.Z)(function*(n){const e=yield BE(n),t=e.eventManager;return t.onListen=f.bind(null,e.syncEngine),t.onUnlisten=T.bind(null,e.syncEngine),t}),VT.apply(this,arguments)}function QS(n,e,t={}){const r=new Xt;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,h,g,_){const D=new UE({next:N=>{u.enqueueAndForget(()=>PE(o,A));const q=N.docs.has(h);!q&&N.fromCache?_.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&N.fromCache&&g&&"server"===g.source?_.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),A=new FE(Vf(h.path),D,{includeMetadataChanges:!0,Nu:!0});return J_(o,A)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}function JS(n,e,t={}){const r=new Xt;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,h,g,_){const D=new UE({next:N=>{u.enqueueAndForget(()=>PE(o,A)),N.fromCache&&"server"===g.source?_.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),A=new FE(h,D,{includeMetadataChanges:!0,Nu:!0});return J_(o,A)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}class eR{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Kd(this,"async_queue_retry"),this.Wc=()=>{const t=Jf();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Jf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Jf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Xt;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Fa(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=ip.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&it()}verifyOperationInProgress(){}Xc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function UT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class tR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends t0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new eR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XS(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||XS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new aC(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new ZM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function e1(n,e,t){const r=new Xt;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield zS(n,t),yield WS(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(h=u).name?h.code===de.FAILED_PRECONDITION||h.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw u;Ou("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var h})).then(()=>r.promise)}function t1(n){if(n._initialized||n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(Mr.fromBase64String(e))}catch(t){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tc(Mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dp{constructor(e){this._methodName=e}}class jE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const dR=/^__.*__$/;class hR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new al(e,this.data,t,this.fieldTransforms)}}class n1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function r1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class HE{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new HE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return ZE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(r1(this.sa)&&dR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class fR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Wd(e)}da(e,t,r,o=!1){return new HE({sa:e,methodName:t,fa:r,path:_n.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=Wd(n._databaseId);return new fR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GE(n,e,t,r,o,u={}){const h=n.da(u.merge||u.mergeFields?2:0,e,t,o);HT("Data must be an object, but it was:",h,r);const g=o1(r,h);let _,D;if(u.merge)_=new Jr(h.fieldMask),D=h.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const q=GT(e,N,t);if(!h.contains(q))throw new Pe(de.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);u1(A,q)||A.push(q)}_=new Jr(A),D=h.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,D=h.fieldTransforms;return new hR(new vr(g),_,D)}class n0 extends dp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n0}}function i1(n,e,t){return new HE({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class BT extends dp{_toFieldTransform(e){return new ol(e.path,new Od)}isEqual(e){return e instanceof BT}}class pR extends dp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=i1(this,e,!0),r=this._a.map(u=>fp(u,t)),o=new Va(r);return new ol(e.path,o)}isEqual(e){return this===e}}class gR extends dp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=i1(this,e,!0),r=this._a.map(u=>fp(u,t)),o=new qu(r);return new ol(e.path,o)}isEqual(e){return this===e}}class mR extends dp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Pd(e.yt,Yv(e.yt,this.wa));return new ol(e.path,t)}isEqual(e){return this===e}}function $T(n,e,t,r){const o=n.da(1,e,t);HT("Data must be an object, but it was:",o,r);const u=[],h=vr.empty();Jc(r,(_,D)=>{const A=qE(e,_,t);D=(0,sn.m9)(D);const N=o.ca(A);if(D instanceof n0)u.push(A);else{const q=fp(D,N);null!=q&&(u.push(A),h.set(A,q))}});const g=new Jr(u);return new n1(h,g,o.fieldTransforms)}function jT(n,e,t,r,o,u){const h=n.da(1,e,t),g=[GT(e,r,t)],_=[o];if(u.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<u.length;q+=2)g.push(GT(e,u[q])),_.push(u[q+1]);const D=[],A=vr.empty();for(let q=g.length-1;q>=0;--q)if(!u1(D,g[q])){const se=g[q];let ye=_[q];ye=(0,sn.m9)(ye);const Be=h.ca(se);if(ye instanceof n0)D.push(se);else{const He=fp(ye,Be);null!=He&&(D.push(se),A.set(se,He))}}const N=new Jr(D);return new n1(A,N,h.fieldTransforms)}function s1(n,e,t,r=!1){return fp(t,n.da(r?4:3,e))}function fp(n,e){if(a1(n=(0,sn.m9)(n)))return HT("Unsupported field value:",e,n),o1(n,e);if(n instanceof dp)return function(t,r){if(!r1(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let g=fp(h,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,sn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yv(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Hn.fromDate(t);return{timestampValue:Vd(r.yt,o)}}if(t instanceof Hn){const o=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vd(r.yt,o)}}if(t instanceof jE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tc)return{bytesValue:jI(r.yt,t._byteString)};if(t instanceof sr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:a_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${LE(t)}`)}(n,e)}function o1(n,e){const t={};return cI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jc(n,(r,o)=>{const u=fp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function a1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof jE||n instanceof tc||n instanceof sr||n instanceof dp)}function HT(n,e,t){if(!a1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=LE(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function GT(n,e,t){if((e=(0,sn.m9)(e))instanceof wl)return e._internalPath;if("string"==typeof e)return qE(n,e);throw ZE("Field path arguments must be of type string or ",n,!1,void 0,t)}const yR=new RegExp("[~\\*/\\[\\]]");function qE(n,e,t){if(e.search(yR)>=0)throw ZE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wl(...e.split("."))._internalPath}catch{throw ZE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZE(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||h)&&(_+=" (found",u&&(_+=` in field ${r}`),h&&(_+=` in document ${o}`),_+=")"),new Pe(de.INVALID_ARGUMENT,g+n+_)}function u1(n,e){return n.some(t=>t.isEqual(e))}class r0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vR extends r0{data(){return super.data()}}function zE(n,e){return"string"==typeof e?qE(n,e):e instanceof wl?e._internalPath:e._delegate._internalPath}function c1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qT{}class s0 extends qT{}function th(n,e,...t){let r=[];e instanceof qT&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof ry).length,h=o.filter(g=>g instanceof o0).length;if(u>1||u>0&&h>0)throw new Pe(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class o0 extends s0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new o0(e,t,r)}_apply(e){const t=this._parse(e);return f1(e._query,t),new wi(e.firestore,e.converter,sl(e._query,t))}_parse(e){const t=hp(e.firestore);return function(o,u,h,g,_,D,A){let N;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){h1(A,D);const q=[];for(const se of A)q.push(d1(g,o,se));N={arrayValue:{values:q}}}else N=d1(g,o,A)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||h1(A,D),N=s1(h,"where",A,"in"===D||"not-in"===D);return nn.create(_,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ry extends qT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ry(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:an.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const h=o.getFlattenedFilters();for(const g of h)f1(u,g),u=sl(u,g)}(e._query,t),new wi(e.firestore,e.converter,sl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ZT extends s0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ZT(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new xd(o,u);return function(g,_){if(null===cm(g)){const D=rl(g);null!==D&&p1(0,D,_.field)}}(r,h),h}(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Gu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class WE extends s0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new WE(e,t,r)}_apply(e){return new wi(e.firestore,e.converter,lm(e._query,this._limit,this._limitType))}}class KE extends s0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new KE(e,t,r)}_apply(e){const t=l1(e,this.type,this._docOrFields,this._inclusive);return new wi(e.firestore,e.converter,(o=t,new Gu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class YE extends s0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YE(e,t,r)}_apply(e){const t=l1(e,this.type,this._docOrFields,this._inclusive);return new wi(e.firestore,e.converter,(o=t,new Gu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function l1(n,e,t,r){if(t[0]=(0,sn.m9)(t[0]),t[0]instanceof r0)return function(o,u,h,g,_){if(!g)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const A of il(o))if(A.field.isKeyField())D.push($u(u,g.key));else{const N=g.data.field(A.field);if(Lv(N))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const q=A.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}D.push(N)}return new tl(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=hp(n.firestore);return function(u,h,g,_,D,A){const N=u.explicitOrderBy;if(D.length>N.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let se=0;se<D.length;se++){const ye=D[se];if(N[se].field.isKeyField()){if("string"!=typeof ye)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ye}`);if(!Zv(u)&&-1!==ye.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ye}' contains a slash.`);const Be=u.path.child(on.fromString(ye));if(!je.isDocumentKey(Be))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const He=new je(Be);q.push($u(h,He))}else{const Be=s1(g,_,ye);q.push(Be)}}return new tl(q,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function d1(n,e,t){if("string"==typeof(t=(0,sn.m9)(t))){if(""===t)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&-1!==t.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!je.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $u(n,new je(r))}if(t instanceof sr)return $u(n,t._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LE(t)}.`)}function h1(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function f1(n,e){if(e.isInequality()){const r=rl(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=cm(n);null!==u&&p1(0,o,u)}const t=function(r,o){for(const u of r)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function p1(n,e,t){if(!t.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zT{convertValue(e,t="none"){switch(Bu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Jc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new jE(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Of(e));default:return null}}convertTimestamp(e){const t=Vu(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);gt(QI(r));const o=new Lu(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function QE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class AR extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Il extends r0{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends Il{data(e={}){return super.data(e)}}class nh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new pp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new pp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const g=new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new pp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==h.type&&(_=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),D=u.indexOf(h.doc.key)),{type:SR(h.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function m1(n,e){return n instanceof Il&&e instanceof Il?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nh&&e instanceof nh&&n._firestore===e._firestore&&MT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class rh extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function y1(n,e,t){n=un(n,sr);const r=un(n.firestore,or),o=QE(n.converter,e,t);return iy(r,[GE(hp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Kn.none())])}function v1(n,e,t,...r){n=un(n,sr);const o=un(n.firestore,or),u=hp(o);let h;return h="string"==typeof(e=(0,sn.m9)(e))||e instanceof wl?jT(u,"updateDoc",n._key,e,t,r):$T(u,"updateDoc",n._key,e),iy(o,[h.toMutation(n._key,Kn.exists(!0))])}function _1(n,...e){var t,r,o;n=(0,sn.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||UT(e[h])||(u=e[h],h++);const g={includeMetadataChanges:u.includeMetadataChanges};if(UT(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let _,D,A;if(n instanceof sr)D=un(n.firestore,or),A=Vf(n._key.path),_={next:N=>{e[h]&&e[h](WT(D,n,N))},error:e[h+1],complete:e[h+2]};else{const N=un(n,wi);D=un(N.firestore,or),A=N._query;const q=new rh(D);_={next:se=>{e[h]&&e[h](new nh(D,q,N,se))},error:e[h+1],complete:e[h+2]},c1(n._query)}return function(N,q,se,ye){const Be=new UE(ye),He=new FE(q,Be,se);return N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return J_(yield ny(N),He)})),()=>{Be.bc(),N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return PE(yield ny(N),He)}))}}(Or(D),A,g,_)}function iy(n,e){return function(t,r){const o=new Xt;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function F(n,e,t){return Z.apply(this,arguments)}(yield LT(t),r,o)})),o.promise}(Or(n),e)}function WT(n,e,t){const r=t.docs.get(e._key),o=new rh(n);return new Il(n,o,e._key,r,new pp(t.hasPendingWrites,t.fromCache),e.converter)}const VR={maxAttempts:5};class w1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hp(e)}set(e,t,r){this._verifyNotCommitted();const o=ih(e,this._firestore),u=QE(o.converter,t,r),h=GE(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Kn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ih(e,this._firestore);let h;return h="string"==typeof(t=(0,sn.m9)(t))||t instanceof wl?jT(this._dataReader,"WriteBatch.update",u._key,t,r,o):$T(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new kd(t._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(n,e){if((n=(0,sn.m9)(n)).firestore!==e)throw new Pe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class UR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hp(e)}get(e){const t=ih(e,this._firestore),r=new AR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const u=o[0];if(u.isFoundDocument())return new r0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new r0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=ih(e,this._firestore),u=QE(o.converter,t,r),h=GE(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=ih(e,this._firestore);let h;return h="string"==typeof(t=(0,sn.m9)(t))||t instanceof wl?jT(this._dataReader,"Transaction.update",u._key,t,r,o):$T(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),r=new rh(this._firestore);return super.get(e).then(o=>new Il(this._firestore,r,t._key,o._document,new pp(!1,!1),t.converter))}}function KT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function E1(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function b1(){if(!function uC(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Oa=es.SDK_VERSION,(0,es._registerComponent)(new yg.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),h=new or(new nI(t.getProvider("auth-internal")),new Ed(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(g.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(eI,"3.8.0",n),(0,es.registerVersion)(eI,"3.8.0","esm2017")}();class u0{constructor(e){this._delegate=e}static fromBase64String(e){return b1(),new u0(tc.fromBase64String(e))}static fromUint8Array(e){return E1(),new u0(tc.fromUint8Array(e))}toBase64(){return b1(),this._delegate.toBase64()}toUint8Array(){return E1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YT(n){return function WR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class KR{enableIndexedDbPersistence(e,t){return function rR(n,e){t1(n=un(n,or));const t=Or(n),r=n._freezeSettings(),o=new ST;return e1(t,o,new FS(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function iR(n){t1(n=un(n,or));const e=Or(n),t=n._freezeSettings(),r=new ST;return e1(e,r,new UM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sR(n){if(n._initialized&&!n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xt;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!bs.C())return Promise.resolve();const o=r+"main";yield bs.delete(o)}),function(r){return t.apply(this,arguments)})(ns(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class D1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ou("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HS(n,e,t,r={}){var o;const u=(n=un(n,t0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ou("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,g;if("string"==typeof r.mockUserToken)h=r.mockUserToken,g=xr.MOCK_USER;else{h=(0,sn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new xr(_)}n._authCredentials=new eC(new Rv(h,g))}}(this._delegate,e,t,r)}enableNetwork(){return function aR(n){return function zM(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield KS(n),t=yield FT(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o._u.delete(0),zm(o)}(t)}))}(Or(n=un(n,or)))}(this._delegate)}disableNetwork(){return function uR(n){return function WM(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield KS(n),t=yield FT(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const u=We(o);u._u.add(0),yield Yd(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Or(n=un(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function oR(n){return function(e){const t=new Xt;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Yn(n,e){return qa.apply(this,arguments)}(yield LT(e),t)})),t.promise}(Or(n=un(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function LR(n,e){return function QM(n,e){const t=new UE(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield ny(n),o=t,We(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield ny(n),o=t,void We(r).Ru.delete(o);var r,o}))}}(Or(n=un(n,or)),UT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sy(this,GS(this._delegate,e))}catch(t){throw is(t,"collection()","Firestore.collection()")}}doc(e){try{return new qo(this,VE(this._delegate,e))}catch(t){throw is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,function BM(n,e){if(n=un(n,t0),xT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wi(n,null,(t=e,new Gu(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BR(n,e,t){n=un(n,or);const r=Object.assign(Object.assign({},VR),t);return function(o){if(o.maxAttempts<1)throw new Pe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,h){const g=new Xt;return o.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const _=yield function YS(n){return BE(n).then(e=>e.datastore)}(o);new qM(o.asyncQueue,_,h,u,g).run()})),g.promise}(Or(n),o=>e(new UR(n,o)),r)}(this._delegate,t=>e(new C1(this,t)))}batch(){return Or(this._delegate),new T1(new w1(this._delegate,e=>iy(this._delegate,e)))}loadBundle(e){return function cR(n,e){const t=Or(n=un(n,or)),r=new tR;return function JM(n,e,t,r){const o=function(u,h){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return ZS(_,D);if(_ instanceof ArrayBuffer)return ZS(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new $M(_,h);var _}(t,Wd(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function VM(n,e,t){const r=We(n);var o;(o=(0,we.Z)(function*(u,h,g){try{const _=yield h.getMetadata();if(yield function(q,se){const ye=We(q),Be=Er(se.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",He=>ye.Ns.getBundleMetadata(He,se.id)).then(He=>!!He&&He.createTime.compareTo(Be)>=0)}(u.localStore,_))return yield h.close(),g._completeWith({taskState:"Success",documentsLoaded:(q=_).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);g._updateProgress(mT(_));const D=new NS(_,u.localStore,h.yt);let A=yield h.mc();for(;A;){const q=yield D.Fu(A);q&&g._updateProgress(q),A=yield h.mc()}const N=yield D.complete();return yield to(u,N.Lu,void 0),yield function(q,se){const ye=We(q);return ye.persistence.runTransaction("Save bundle","readwrite",Be=>ye.Ns.saveBundleMetadata(Be,se))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Bu)}catch(_){return Ou("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var q}),function(u,h,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield LT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function lR(n,e){return function XM(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield $E(n),e)}))}(Or(n=un(n,or)),e).then(t=>t?new wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ss(this,t):null)}}class JE extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new u0(new tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return qo.forKey(t,this.firestore,null)}}class C1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JE(e)}get(e){const t=mp(e);return this._delegate.get(t).then(r=>new c0(this._firestore,new Il(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=mp(e);return r?(KT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}}class T1{constructor(e){this._delegate=e}set(e,t,r){const o=mp(e);return r?(KT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new gp(e,new JE(e),t),o.set(t,u)),u}}gp.INSTANCES=new WeakMap;class qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qo(t,new sr(t._delegate,r,new je(e)))}static forKey(e,t,r){return new qo(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sy(this.firestore,GS(this._delegate,e))}catch(t){throw is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,sn.m9)(e))instanceof sr&&qS(this._delegate,e)}set(e,t){t=KT("DocumentReference.set",t);try{return t?y1(this._delegate,e,t):y1(this._delegate,e)}catch(r){throw is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?v1(this._delegate,e):v1(this._delegate,e,t,...r)}catch(o){throw is(o,"updateDoc()","DocumentReference.update()")}}delete(){return function kR(n){return iy(un(n.firestore,or),[new kd(n._key,Kn.none())])}(this._delegate)}onSnapshot(...e){const t=A1(e),r=S1(e,o=>new c0(this.firestore,new Il(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return _1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function MR(n){n=un(n,sr);const e=un(n.firestore,or),t=Or(e),r=new rh(e);return function KM(n,e){const t=new Xt;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,h){try{const g=yield function(_,D){const A=We(_);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,D))}(o,u);g.isFoundDocument()?h.resolve(g):g.isNoDocument()?h.resolve(null):h.reject(new Pe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Xd(g,`Failed to get document '${u} from cache`);h.reject(_)}}),function(o,u,h){return r.apply(this,arguments)})(yield $E(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Il(e,r,n._key,o,new pp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function RR(n){n=un(n,sr);const e=un(n.firestore,or);return QS(Or(e),n._key,{source:"server"}).then(t=>WT(e,n,t))}(this._delegate):function xR(n){n=un(n,sr);const e=un(n.firestore,or);return QS(Or(e),n._key).then(t=>WT(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new Il(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function is(n,e,t){return n.message=n.message.replace(e,t),n}function A1(n){for(const e of n)if("object"==typeof e&&!YT(e))return e;return{}}function S1(n,e){var t,r;let o;return o=YT(n[0])?n[0]:YT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return m1(this._delegate,e._delegate)}}class l0 extends c0{data(e){const t=this._delegate.data(e);return function JD(n,e){n||it()}(void 0!==t),t}}class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JE(e)}where(e,t,r){try{return new ss(this.firestore,th(this._delegate,function _R(n,e,t){const r=e,o=zE("where",n);return o0._create(o,r,t)}(e,t,r)))}catch(o){throw is(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ss(this.firestore,th(this._delegate,function wR(n,e="asc"){const t=e,r=zE("orderBy",n);return ZT._create(r,t)}(e,t)))}catch(r){throw is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ss(this.firestore,th(this._delegate,function IR(n){return BS("limit",n),WE._create("limit",n,"F")}(e)))}catch(t){throw is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ss(this.firestore,th(this._delegate,function ER(n){return BS("limitToLast",n),WE._create("limitToLast",n,"L")}(e)))}catch(t){throw is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ss(this.firestore,th(this._delegate,function bR(...n){return KE._create("startAt",n,!0)}(...e)))}catch(t){throw is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ss(this.firestore,th(this._delegate,function DR(...n){return KE._create("startAfter",n,!1)}(...e)))}catch(t){throw is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ss(this.firestore,th(this._delegate,function CR(...n){return YE._create("endBefore",n,!1)}(...e)))}catch(t){throw is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ss(this.firestore,th(this._delegate,function TR(...n){return YE._create("endAt",n,!0)}(...e)))}catch(t){throw is(t,"endAt()","Query.endAt()")}}isEqual(e){return MT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function OR(n){n=un(n,wi);const e=un(n.firestore,or),t=Or(e),r=new rh(e);return function YM(n,e){const t=new Xt;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,h){try{const g=yield Bm(o,u,!0),_=new s(u,g.Hi),D=_.Wu(g.documents),A=_.applyChanges(D,!1);h.resolve(A.snapshot)}catch(g){const _=Xd(g,`Failed to execute query '${u} against cache`);h.reject(_)}}),function(o,u,h){return r.apply(this,arguments)})(yield $E(n),e,t);var r})),t.promise}(t,n._query).then(o=>new nh(e,r,n,o))}(this._delegate):"server"===e?.source?function PR(n){n=un(n,wi);const e=un(n.firestore,or),t=Or(e),r=new rh(e);return JS(t,n._query,{source:"server"}).then(o=>new nh(e,r,n,o))}(this._delegate):function NR(n){n=un(n,wi);const e=un(n.firestore,or),t=Or(e),r=new rh(e);return c1(n._query),JS(t,n._query).then(o=>new nh(e,r,n,o))}(this._delegate),t.then(r=>new QT(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=A1(e),r=S1(e,o=>new QT(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return _1(this._delegate,t,r)}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}class QR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new QR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l0(this._firestore,r))})}isEqual(e){return m1(this._delegate,e._delegate)}}class sy extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qo(this.firestore,e):null}doc(e){try{return new qo(this.firestore,void 0===e?VE(this._delegate):VE(this._delegate,e))}catch(t){throw is(t,"doc()","CollectionReference.doc()")}}add(e){return function FR(n,e){const t=un(n.firestore,or),r=VE(n),o=QE(n.converter,e);return iy(t,[GE(hp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new qo(this.firestore,t))}isEqual(e){return qS(this._delegate,e._delegate)}withConverter(e){return new sy(this.firestore,this._delegate.withConverter(e?gp.getInstance(this.firestore,e):null))}}function mp(n){return un(n,sr)}class JT{constructor(...e){this._delegate=new wl(...e)}static documentId(){return new JT(_n.keyField().canonicalString())}isEqual(e){return(e=(0,sn.m9)(e))instanceof wl&&this._delegate._internalPath.isEqual(e._internalPath)}}class yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jR(){return new BT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yp(e)}static delete(){const e=function $R(){return new n0("deleteField")}();return e._methodName="FieldValue.delete",new yp(e)}static arrayUnion(...e){const t=function HR(...n){return new pR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yp(t)}static arrayRemove(...e){const t=function GR(...n){return new gR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yp(t)}static increment(e){const t=function qR(n){return new mR("increment",n)}(e);return t._methodName="FieldValue.increment",new yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const JR={Firestore:D1,GeoPoint:jE,Timestamp:Hn,Blob:u0,Transaction:C1,WriteBatch:T1,DocumentReference:qo,DocumentSnapshot:c0,Query:ss,QueryDocumentSnapshot:l0,QuerySnapshot:QT,CollectionReference:sy,FieldPath:JT,FieldValue:yp,setLogLevel:function YR(n){!function tI(n){Pa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function eN(n){(function XR(n,e){n.INTERNAL.registerComponent(new yg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},JR)))})(n,(e,t)=>new D1(e,t,new KR)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(dw.Z);var tN=k(6451),XE=k(5363),nN=k(6063);class rN extends Si.x{constructor(e=1/0,t=1/0,r=nN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=h;_+=2)g=_;g&&r.splice(0,g+1)}}}var iN=k(3099);function x1(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,iN.B)({connector:()=>new rN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function M1(n,e){return(0,gs.m)(e)?Vn(()=>n,e):Vn(()=>n)}var XT=k(9468),vp=k(259);class d0{constructor(e){return e}}class R1{constructor(){return(0,vp.C6)()}}const eA=new l.OlP("angularfire2._apps"),oN={provide:d0,useFactory:function sN(n){return n&&1===n.length?n[0]:new d0((0,vp.Mq)())},deps:[[new l.FiY,eA]]},aN={provide:R1,deps:[[new l.FiY,eA]]};function uN(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new d0(r)}}let cN=(()=>{class n{constructor(t){(0,vp.KN)("angularfire",In.q4.full,"core"),(0,vp.KN)("angularfire",In.q4.full,"app"),(0,vp.KN)("angular",l.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[oN,aN]}),n})();function lN(n,...e){return{ngModule:cN,providers:[{provide:eA,useFactory:uN(n),multi:!0,deps:[l.R0b,l.zs3,In.HU,...e]}]}}const dN=(0,In.u3)(vp.ZF,!0),tA=new Map,N1={activated:!1,tokenObservers:[]},hN={initialized:!1,enabled:!1};function Ii(n){return tA.get(n)||Object.assign({},N1)}function eb(){return hN}class vN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new sn.BH,yield function _N(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new sn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const os=new sn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function P1(n){if(!Ii(n).activated)throw os.create("use-before-activation",{appName:n.name})}function iA(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,g;try{h=yield fetch(n,u)}catch(N){throw os.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==h.status)throw os.create("fetch-status-error",{httpStatus:h.status});try{g=yield h.json()}catch(N){throw os.create("fetch-parse-error",{originalErrorMessage:N?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw os.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),A=Date.now();return{token:g.token,expireTimeMillis:A+D,issuedAtTimeMillis:A}}),sA.apply(this,arguments)}function bN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const h0="firebase-app-check-store";let rb=null;function F1(){return rb||(rb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(os.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(h0,{keyPath:"compositeKey"})}}catch(t){e(os.create("storage-open",{originalErrorMessage:t?.message}))}}),rb)}function oA(){return oA=(0,we.Z)(function*(n,e){const r=(yield F1()).transaction(h0,"readwrite"),u=r.objectStore(h0).put({compositeKey:n,value:e});return new Promise((h,g)=>{u.onsuccess=_=>{h()},r.onerror=_=>{var D;g(os.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})}),oA.apply(this,arguments)}const f0=new Fo.Yd("@firebase/app-check");function cA(n,e){return(0,sn.hl)()?function AN(n,e){return function L1(n,e){return oA.apply(this,arguments)}(function U1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{f0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function B1(){return eb().enabled}function $1(){return dA.apply(this,arguments)}function dA(){return dA=(0,we.Z)(function*(){const n=eb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),dA.apply(this,arguments)}const ON={error:"UNKNOWN_ERROR"};function PN(n){return sn.US.encodeString(JSON.stringify(n),!1)}function ib(n){return hA.apply(this,arguments)}function hA(){return hA=(0,we.Z)(function*(n,e=!1){const t=n.app;P1(t);const r=Ii(t);let u,o=r.token;if(o&&!oy(o)&&(r.token=void 0,o=void 0),!o){const _=yield r.cachedTokenPromise;_&&(oy(_)?o=_:yield cA(t,void 0))}if(!e&&o&&oy(o))return{token:o.token};let g,h=!1;if(B1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=iA(bN(t,yield $1()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const _=yield r.exchangeTokenPromise;return yield cA(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),o=yield Ii(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?f0.warn(_.message):f0.error(_),u=_}return o?u?g=oy(o)?{token:o.token,internalError:u}:G1(u):(g={token:o.token},r.token=o,yield cA(t,o)):g=G1(u),h&&H1(t,g),g}),hA.apply(this,arguments)}function pA(n,e){const t=Ii(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function j1(n){const{app:e}=n,t=Ii(e);let r=t.tokenRefresher;r||(r=function kN(n){const{app:e}=n;return new vN((0,we.Z)(function*(){let r;if(r=Ii(e).token?yield ib(n,!0):yield ib(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function H1(n,e){const t=Ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function oy(n){return n.expireTimeMillis-Date.now()>0}function G1(n){return{token:PN(ON),error:n}}class FN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ii(this.app);for(const t of e)pA(this.app,t.next);return Promise.resolve()}}const J1="app-check-internal";!function YN(){(0,es._registerComponent)(new yg.wA("app-check",n=>function LN(n,e){return new FN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(J1).initialize()})),(0,es._registerComponent)(new yg.wA(J1,n=>function VN(n){return{getToken:e=>ib(n,e),addTokenListener:e=>function fA(n,e,t,r){const{app:o}=n,u=Ii(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&oy(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),j1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>j1(n))}(n,"INTERNAL",e),removeTokenListener:e=>pA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,es.registerVersion)("@firebase/app-check","0.6.0")}();class ob{constructor(){return(0,In.vb)("app-check")}}typeof window<"u"&&window;var ex=k(9260);const tx=new l.OlP("angularfire2.auth.use-emulator"),nx=new l.OlP("angularfire2.auth.settings"),rx=new l.OlP("angularfire2.auth.tenant-id"),ix=new l.OlP("angularfire2.auth.langugage-code"),sx=new l.OlP("angularfire2.auth.use-device-language"),ox=new l.OlP("angularfire.auth.persistence"),ax=(n,e,t,r,o,u,h,g)=>(0,Ys.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),h)for(const[D,A]of Object.entries(h))_.settings[D]=A;return g&&_.setPersistence(g),_},[t,r,o,u,h,g]);let Zo=(()=>{class n{constructor(t,r,o,u,h,g,_,D,A,N,q,se){const ye=new Si.x,Be=rt(void 0).pipe((0,XE.Q)(h.outsideAngular),Vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9568)))),(0,st.U)(()=>(0,Ys.on)(t,u,r)),(0,st.U)(He=>ax(He,u,g,D,A,N,_,q)),x1({bufferSize:1,refCount:!1}));if(co(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{Be.pipe(W()).subscribe();const Gt=Be.pipe(Vn(Bt=>Bt.getRedirectResult().then(Vt=>Vt,()=>null)),In.iC,x1({bufferSize:1,refCount:!1})),Zt=Be.pipe(Vn(Bt=>new Tr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onAuthStateChanged(Yt=>Vt.next(Yt),Yt=>Vt.error(Yt),()=>Vt.complete()))})))),Ut=Be.pipe(Vn(Bt=>new Tr.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onIdTokenChanged(Yt=>Vt.next(Yt),Yt=>Vt.error(Yt),()=>Vt.complete()))}))));this.authState=Gt.pipe(M1(Zt),(0,XT.R)(h.outsideAngular),(0,XE.Q)(h.insideAngular)),this.user=Gt.pipe(M1(Ut),(0,XT.R)(h.outsideAngular),(0,XE.Q)(h.insideAngular)),this.idToken=this.user.pipe(Vn(Bt=>Bt?(0,cn.D)(Bt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Vn(Bt=>Bt?(0,cn.D)(Bt.getIdTokenResult()):rt(null))),this.credential=(0,tN.T)(Gt,ye,this.authState.pipe(ui(Bt=>!Bt))).pipe((0,st.U)(Bt=>Bt?.user?Bt:null),(0,XT.R)(h.outsideAngular),(0,XE.Q)(h.insideAngular))}return(0,Ys.pX)(this,Be,u,{spy:{apply:(He,Gt,Zt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&Zt.then(Ut=>ye.next(Ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ys.Dh),l.LFG(Ys.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(In.HU),l.LFG(tx,8),l.LFG(nx,8),l.LFG(rx,8),l.LFG(ix,8),l.LFG(sx,8),l.LFG(ox,8),l.LFG(ob,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nO=(()=>{class n{constructor(){ex.Z.registerVersion("angularfire",In.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Zo]}),n})();function ux(n,e){return function rO(n,e=DD.z){return new Tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function _A(n,e){return ux(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function ab(n,e){return _A(n,e).pipe(Zs(void 0),Zy(),(0,st.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,g)=>{const _=o.find(A=>A.doc.ref.isEqual(h.ref)),D=t?.payload.docs.find(A=>A.ref.isEqual(h.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(h.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:h}})}),u}))}function cx(n,e,t){return ab(n,t).pipe(ft((r,o)=>function sO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function oO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function lw(n,e=$s.y){return n=n??CD,(0,kn.e)((t,r)=>{let o,u=!0;t.subscribe((0,ur.x)(r,h=>{const g=e(h);(u||!n(o,g))&&(u=!1,o=g,r.next(h))}))})}(),(0,st.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function wA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function lx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ab(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Zs(void 0),Zy(),ui(([r,o])=>o.length>0||!r),(0,st.U)(([r,o])=>o),In.iC)}auditTrail(e){return this.stateChanges(e).pipe(ft((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lx(e);return cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return _A(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),In.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(In.iC)}add(e){return this.ref.add(e)}doc(e){return new hx(this.ref.doc(e),this.afs)}}class hx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=gx(r,t);return new dx(o,u,this.afs)}snapshotChanges(){return function iO(n,e){return ux(n,e).pipe(Zs(void 0),Zy(),(0,st.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cn.D)(this.ref.get(e)).pipe(In.iC)}}class aO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ui(t=>t.length>0),In.iC):ab(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(e){return this.stateChanges(e).pipe(ft((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lx(e);return cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return _A(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),In.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(In.iC)}}const fx=new l.OlP("angularfire2.enableFirestorePersistence"),px=new l.OlP("angularfire2.firestore.persistenceSettings"),uO=new l.OlP("angularfire2.firestore.settings"),cO=new l.OlP("angularfire2.firestore.use-emulator");function gx(n,e=(t=>t)){return{query:e(n),ref:n}}let _p=(()=>{class n{constructor(t,r,o,u,h,g,_,D,A,N,q,se,ye,Be,He,Gt,Zt){this.schedulers=_;const Ut=(0,Ys.on)(t,g,r),Bt=A;N&&ax(Ut,g,q,ye,Be,He,se,Gt),[this.firestore,this.persistenceEnabled$]=(0,Ys.cc)(`${Ut.name}.firestore`,"AngularFirestore",Ut.name,()=>{const Vt=g.runOutsideAngular(()=>Ut.firestore());if(u&&Vt.settings(u),Bt&&Vt.useEmulator(...Bt),o&&!co(h)){const Yt=()=>{try{return(0,cn.D)(Vt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(ei){return typeof console<"u"&&console.warn(ei),rt(!1)}};return[Vt,g.runOutsideAngular(Yt)]}return[Vt,rt(!1)]},[u,Bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=gx(o,r),g=this.schedulers.ngZone.run(()=>u);return new dx(g,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new aO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new hx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ys.Dh),l.LFG(Ys.xv,8),l.LFG(fx,8),l.LFG(uO,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(In.HU),l.LFG(px,8),l.LFG(cO,8),l.LFG(Zo,8),l.LFG(tx,8),l.LFG(nx,8),l.LFG(rx,8),l.LFG(ix,8),l.LFG(sx,8),l.LFG(ox,8),l.LFG(ob,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lO=(()=>{class n{constructor(){ex.Z.registerVersion("angularfire",In.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:fx,useValue:!0},{provide:px,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[_p]}),n})(),p0=(()=>{class n{constructor(t){this.angularFirestore=t}getIncidencias(){return this.angularFirestore.collection("incidencias").snapshotChanges()}getIncidenciaById(t){return this.angularFirestore.collection("incidencias").doc(t).valueChanges()}createIncidencia(t){return new Promise((r,o)=>{this.angularFirestore.collection("incidencias").add(t).then(u=>{console.log(u)},u=>{o(u)})})}updateIncidencia(t,r){return this.angularFirestore.collection("incidencias").doc(r).update({descripcion:t.descripcion,estado:t.estado,fecha:t.fecha,lugar:t.lugar,posible_arreglo:t.posible_arreglo,revisada:t.revisada})}checkIncidencia(t){return this.angularFirestore.collection("incidencias").doc(t.id).update({revisada:1==t.revisada})}deleteIncidencia(t){return this.angularFirestore.collection("incidencias").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_p))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),wp=(()=>{class n extends mx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const nc=new l.OlP("NgValueAccessor"),hO={provide:nc,useExisting:(0,l.Gpc)(()=>IA),multi:!0};let IA=(()=>{class n extends wp{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(u){return r.onChange(u.target.checked)})("blur",function(){return r.onTouched()})},features:[l._Bn([hO]),l.qOj]}),n})();const fO={provide:nc,useExisting:(0,l.Gpc)(()=>El),multi:!0},gO=new l.OlP("CompositionEventMode");let El=(()=>{class n extends mx{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pO(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(gO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[l._Bn([fO]),l.qOj]}),n})();const Ui=new l.OlP("NgValidators"),oh=new l.OlP("NgAsyncValidators");function wx(n){return function sh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function ub(n){return null}function Tx(n){return null!=n}function Ax(n){return(0,l.QGY)(n)?(0,cn.D)(n):n}function Sx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function xx(n,e){return e.map(t=>t(n))}function Mx(n){return n.map(e=>function vO(n){return!n.validate}(e)?e:t=>e.validate(t))}function EA(n){return null!=n?function Rx(n){if(!n)return null;const e=n.filter(Tx);return 0==e.length?null:function(t){return Sx(xx(t,e))}}(Mx(n)):null}function bA(n){return null!=n?function Nx(n){if(!n)return null;const e=n.filter(Tx);return 0==e.length?null:function(t){return function dO(...n){const e=(0,Ji.jO)(n),{args:t,keys:r}=ps(n),o=new Tr.y(u=>{const{length:h}=t;if(!h)return void u.complete();const g=new Array(h);let _=h,D=h;for(let A=0;A<h;A++){let N=!1;(0,js.Xf)(t[A]).subscribe((0,ur.x)(u,q=>{N||(N=!0,D--),g[A]=q},()=>_--,void 0,()=>{(!_||!N)&&(D||u.next(r?ga(r,g):g),u.complete())}))}});return e?o.pipe(uu(e)):o}(xx(t,e).map(Ax)).pipe((0,st.U)(Sx))}}(Mx(n)):null}function Ox(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Px(n){return n._rawValidators}function kx(n){return n._rawAsyncValidators}function DA(n){return n?Array.isArray(n)?n:[n]:[]}function cb(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fx(n,e){const t=DA(e);return DA(n).forEach(o=>{cb(t,o)||t.push(o)}),t}function Lx(n,e){return DA(e).filter(t=>!cb(n,t))}class Vx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=EA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class as extends Vx{get formDirective(){return null}get path(){return null}}class ah extends Vx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ux{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let uh=(()=>{class n extends Ux{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ah,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),n})(),Ip=(()=>{class n extends Ux{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(as,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]}),n})();const g0="VALID",db="INVALID",ay="PENDING",m0="DISABLED";function SA(n){return(hb(n)?n.validators:n)||null}function $x(n){return Array.isArray(n)?EA(n):n||null}function xA(n,e){return(hb(e)?e.asyncValidators:n)||null}function jx(n){return Array.isArray(n)?bA(n):n||null}function hb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Hx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[t])throw new l.vHH(1001,"")}function Gx(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new l.vHH(1002,"")})}class fb{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$x(this._rawValidators),this._composedAsyncValidatorFn=jx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===g0}get invalid(){return this.status===db}get pending(){return this.status==ay}get disabled(){return this.status===m0}get enabled(){return this.status!==m0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$x(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jx(e)}addValidators(e){this.setValidators(Fx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lx(e,this._rawAsyncValidators))}hasValidator(e){return cb(this._rawValidators,e)}hasAsyncValidator(e){return cb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ay,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=m0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=g0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===g0||this.status===ay)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?m0:g0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ay,this._hasOwnPendingAsyncValidator=!0;const t=Ax(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?m0:this.errors?db:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ay)?ay:this._anyControlsHaveStatus(db)?db:g0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ep extends fb{constructor(e,t,r){super(SA(t),xA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Gx(this,0,e),Object.keys(e).forEach(r=>{Hx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class qx extends Ep{}function pb(n,e){return[...e.path,n]}function y0(n,e){MA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function TO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Zx(n,e)})}(n,e),function SO(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function AO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Zx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function CO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gb(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),yb(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function mb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MA(n,e){const t=Px(n);null!==e.validator?n.setValidators(Ox(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=kx(n);null!==e.asyncValidator?n.setAsyncValidators(Ox(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();mb(e._rawValidators,o),mb(e._rawAsyncValidators,o)}function yb(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Px(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=kx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return mb(e._rawValidators,r),mb(e._rawAsyncValidators,r),t}function Zx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function NA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===El?t=u:function RO(n){return Object.getPrototypeOf(n.constructor)===wp}(u)?r=u:o=u}),o||r||t||null}function Yx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Qx(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rc=class extends fb{constructor(e=null,t,r){super(SA(t),xA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Qx(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Yx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Yx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Qx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},FO={provide:ah,useExisting:(0,l.Gpc)(()=>PA)},eM=(()=>Promise.resolve())();let PA=(()=>{class n extends ah{constructor(t,r,o,u,h){super(),this._changeDetectorRef=h,this.control=new rc,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=NA(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),RA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){y0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){eM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,l.D6c)(r);eM.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?pb(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(as,9),l.Y36(Ui,10),l.Y36(oh,10),l.Y36(nc,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([FO]),l.qOj,l.TTD]}),n})(),bp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),nM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const kA=new l.OlP("NgModelWithFormControlWarning"),jO={provide:as,useExisting:(0,l.Gpc)(()=>bl)};let bl=(()=>{class n extends as{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return y0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){gb(t.control||null,t,!1),function NO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Kx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(gb(r||null,t),(n=>n instanceof rc)(o)&&(y0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function zx(n,e){MA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function xO(n,e){return yb(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MA(this.form,this),this._oldForm&&yb(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ui,10),l.Y36(oh,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([jO]),l.qOj,l.TTD]}),n})();const qO={provide:ah,useExisting:(0,l.Gpc)(()=>ch)};let ch=(()=>{class n extends ah{constructor(t,r,o,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=NA(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),RA(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return pb(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(as,13),l.Y36(Ui,10),l.Y36(oh,10),l.Y36(nc,10),l.Y36(kA,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([qO]),l.qOj,l.TTD]}),n})();const ZO={provide:nc,useExisting:(0,l.Gpc)(()=>Dp),multi:!0};function aM(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Dp=(()=>{class n extends wp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=aM(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function zO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([ZO]),l.qOj]}),n})(),_0=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(aM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(Dp,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const WO={provide:nc,useExisting:(0,l.Gpc)(()=>VA),multi:!0};function uM(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let VA=(()=>{class n extends wp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,h)=>{u._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const h=u;for(let g=0;g<h.length;g++){const D=this._getOptionValue(h[g].value);o.push(D)}}else{const h=r.options;for(let g=0;g<h.length;g++){const _=h[g];if(_.selected){const D=this._getOptionValue(_.value);o.push(D)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function KO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&l.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([WO]),l.qOj]}),n})(),w0=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(uM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(uM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(VA,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Cp=(()=>{class n{constructor(){this._validator=ub}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ub,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const JO={provide:Ui,useExisting:(0,l.Gpc)(()=>Tp),multi:!0};let Tp=(()=>{class n extends Cp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=t=>wx}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([JO]),l.qOj]}),n})(),vM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[nM]}),n})(),iP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[vM]}),n})(),_M=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[vM]}),n})();class wM extends fb{constructor(e,t,r){super(SA(t),xA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Gx(this,0,e),e.forEach((r,o)=>{Hx(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function IM(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let vb=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return IM(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Ep(o,u)}record(t,r=null){const o=this._reduceControls(t);return new qx(o,r)}control(t,r,o){let u={};return this.useNonNullable?(IM(r)?u=r:(u.validators=r,u.asyncValidators=o),new rc(t,{...u,nonNullable:!0})):new rc(t,r,o)}array(t,r,o){const u=t.map(h=>this._createControl(h));return new wM(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof rc||t instanceof fb?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:_M}),n})(),sP=(()=>{class n{constructor(t,r,o){this.incidenciaService=t,this.formbuilder=r,this.router=o,this.incidenciaForm=this.formbuilder.group({descripcion:[""],estado:["Sin estado"],fecha:[""],lugar:[""],posible_arreglo:[""],revisada:!1})}ngOnInit(){}onSubmit(){this.incidenciaService.createIncidencia(this.incidenciaForm.value),this.router.navigate(["show"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(p0),l.Y36(vb),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-crear"]],decls:24,vars:2,consts:[[1,"contenedorCrear","pt-4","pb-4"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","fecha","type","date","required","",1,"form-control"],["name","mitextarea","id","mitextarea","cols","40","rows","5","formControlName","descripcion","placeholder","Descripci\xf3n de la incidencia...","type","text",1,"form-control",2,"resize","none"],["formControlName","lugar","type","text","required","",1,"form-control"],["formControlName","posible_arreglo","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Creaci\xf3n de nueva incidencia"),l.qZA(),l._UZ(3,"hr"),l.TgZ(4,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(5,"div",2)(6,"label",3),l._uU(7,"Fecha de la incidencia"),l.qZA(),l._UZ(8,"input",4),l.qZA(),l.TgZ(9,"div",2)(10,"label",3),l._uU(11,"Descripci\xf3n"),l.qZA(),l.TgZ(12,"textarea",5),l._uU(13,"            "),l.qZA()(),l.TgZ(14,"div",2)(15,"label",3),l._uU(16,"Lugar"),l.qZA(),l._UZ(17,"input",6),l.qZA(),l.TgZ(18,"div",2)(19,"label",3),l._uU(20,"Posible Arreglo"),l.qZA(),l._UZ(21,"input",7),l.qZA(),l.TgZ(22,"button",8),l._uU(23,"Crear"),l.qZA()()()),2&t&&(l.xp6(4),l.Q6J("formGroup",r.incidenciaForm),l.xp6(18),l.Q6J("disabled",!r.incidenciaForm.valid))},dependencies:[bp,El,uh,Ip,Tp,bl,ch],styles:[".contenedorCrear[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}"]}),n})(),oP=(()=>{class n{constructor(t,r,o,u){this.incidenciaService=t,this.formBuilder=r,this.activeRoute=o,this.router=u,this.editForm=this.formBuilder.group({descripcion:[{value:"",disabled:!0}],estado:[""],fecha:[{value:"",disabled:!0}],lugar:[{value:"",disabled:!0}],posible_arreglo:[{value:"",disabled:!0}],revisada:[{value:"",disabled:!0}]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.incidenciaService.getIncidenciaById(t).subscribe(r=>{this.incidenciaRef=r,this.editForm=this.formBuilder.group({descripcion:[this.incidenciaRef.descripcion],estado:[this.incidenciaRef.estado],fecha:[this.incidenciaRef.fecha],lugar:[this.incidenciaRef.lugar],posible_arreglo:[this.incidenciaRef.posible_arreglo],revisada:[this.incidenciaRef.revisada]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.incidenciaService.updateIncidencia(this.editForm.value,t),this.router.navigate(["show"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(p0),l.Y36(vb),l.Y36(ys),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-editar"]],decls:42,vars:3,consts:[[1,"container","pt-4","pb-4"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","fecha","type","date","required","",1,"form-control"],["name","mitextarea","id","mitextarea","cols","40","rows","5","formControlName","descripcion","placeholder","Descripci\xf3n de la incidencia...","type","text",1,"form-control",2,"resize","none"],["formControlName","lugar","type","text","required","",1,"form-control"],["formControlName","posible_arreglo","type","text","required","",1,"form-control"],[1,"card"],[1,"card-header"],[1,"card-body"],["formControlName","estado","placeholder","Estado","type","text",1,"form-select"],["value","Leido"],["value","Asignado"],["value","Comenzado"],["value","Terminado"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h3"),l._uU(2,"Informaci\xf3n de la incidencia"),l.qZA(),l.TgZ(3,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(4,"div",2)(5,"label",3),l._uU(6,"Fecha de la incidencia"),l.qZA(),l._UZ(7,"input",4),l.qZA(),l.TgZ(8,"div",2)(9,"label",3),l._uU(10,"Descripci\xf3n"),l.qZA(),l.TgZ(11,"textarea",5),l._uU(12,"            "),l.qZA()(),l.TgZ(13,"div",2)(14,"label",3),l._uU(15,"Lugar"),l.qZA(),l._UZ(16,"input",6),l.qZA(),l.TgZ(17,"div",2)(18,"label",3),l._uU(19,"Posible Arreglo"),l.qZA(),l._UZ(20,"input",7),l.qZA(),l._UZ(21,"br"),l.qZA(),l.TgZ(22,"div",8)(23,"div",9)(24,"h3"),l._uU(25,"Estado de la incidencia "),l.qZA()(),l.TgZ(26,"div",10)(27,"label",3),l._uU(28,"Seleccione un nuevo estado para actualizar la incidencia:"),l.qZA(),l.TgZ(29,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(30,"div",2)(31,"select",11)(32,"option",12),l._uU(33,"Leido"),l.qZA(),l.TgZ(34,"option",13),l._uU(35,"Asignado"),l.qZA(),l.TgZ(36,"option",14),l._uU(37,"Comenzado"),l.qZA(),l.TgZ(38,"option",15),l._uU(39,"Terminado"),l.qZA()()(),l.TgZ(40,"button",16),l._uU(41,"Actualizar estado"),l.qZA()()()()()),2&t&&(l.xp6(3),l.Q6J("formGroup",r.editForm),l.xp6(26),l.Q6J("formGroup",r.editForm),l.xp6(11),l.Q6J("disabled",!r.editForm.valid))},dependencies:[bp,_0,w0,El,Dp,uh,Ip,Tp,bl,ch]}),n})();function aP(n,e){if(1&n&&(l.TgZ(0,"tr")(1,"td",10),l._uU(2),l.qZA(),l.TgZ(3,"td",11),l._uU(4),l.qZA(),l.TgZ(5,"td",12),l._uU(6),l.qZA(),l.TgZ(7,"td",13),l._uU(8),l.qZA(),l.TgZ(9,"td",14),l._uU(10),l.qZA(),l.TgZ(11,"td")(12,"button",15),l._uU(13,"Actualizar estado"),l.qZA()()()),2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.descripcion),l.xp6(2),l.Oqu(t.estado),l.xp6(2),l.Oqu(t.fecha),l.xp6(2),l.Oqu(t.lugar),l.xp6(2),l.Oqu(t.posible_arreglo),l.xp6(2),l.MGl("routerLink","/edit/",t.id,"")}}let uP=(()=>{class n{constructor(t){this.incidenciaService=t,this.deleteRow=r=>this.incidenciaService.deleteIncidencia(r)}ngOnInit(){this.incidenciaService.getIncidencias().subscribe(t=>{this.Incidencias=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(p0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-mostrar"]],decls:22,vars:1,consts:[[1,"container"],[1,"card"],[1,"card-body"],["scope","col",1,"descripcionTd"],["scope","col",1,"estadoTd"],["scope","col",1,"fechaTd"],["scope","col",1,"lugarTd"],["scope","col",1,"posibleArregloTd"],["scope","col"],[4,"ngFor","ngForOf"],[1,"descripcionTd"],[1,"estadoTd"],[1,"fechaTd"],[1,"lugarTd"],[1,"posibleArregloTd"],[1,"btn","btn-outline-secondary",3,"routerLink"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Listado de incidencias"),l.qZA(),l._UZ(3,"br"),l.TgZ(4,"div",1)(5,"div",2)(6,"table")(7,"tr")(8,"th",3),l._uU(9,"Descripci\xf3n"),l.qZA(),l.TgZ(10,"th",4),l._uU(11,"Estado"),l.qZA(),l.TgZ(12,"th",5),l._uU(13,"Fecha"),l.qZA(),l.TgZ(14,"th",6),l._uU(15,"Lugar"),l.qZA(),l.TgZ(16,"th",7),l._uU(17,"Posible arreglo"),l.qZA(),l.TgZ(18,"th",8),l._uU(19,"Actualizar estado"),l.qZA()(),l._UZ(20,"br"),l.YNc(21,aP,14,6,"tr",9),l.qZA()()()()),2&t&&(l.xp6(21),l.Q6J("ngForOf",r.Incidencias))},dependencies:[bi,_s],styles:[".tabla[_ngcontent-%COMP%]{border-collapse:collapse;border-radius:15px;border:2px red;padding:5px}.tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:7px}td[_ngcontent-%COMP%]{font-size:15px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:10px}.descripcionTd[_ngcontent-%COMP%]{width:100%;min-width:180px!important;max-width:180px!important}.estadoTd[_ngcontent-%COMP%]{width:100%;min-width:25px!important;max-width:25px!important}.fechaTd[_ngcontent-%COMP%]{width:100%;min-width:90px!important;max-width:90px!important}.lugarTd[_ngcontent-%COMP%]{width:100%;min-width:150px!important;max-width:150px!important}.posibleArregloTd[_ngcontent-%COMP%]{width:100%;min-width:200px!important}.estadoTd[_ngcontent-%COMP%]{width:100%;min-width:110px!important;max-width:110px!important}"]}),n})();var UA=k(552);class _b{constructor(e){return e}}const BA=new l.OlP("angularfire2.auth-instances");function dP(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new _b(r)}}const hP={provide:class cP{constructor(){return(0,In.vb)("auth")}},deps:[[new l.FiY,BA]]},fP={provide:_b,useFactory:function lP(n,e){const t=(0,In.JM)("auth",n,e);return t&&new _b(t)},deps:[[new l.FiY,BA],d0]};let pP=(()=>{class n{constructor(){(0,vp.KN)("angularfire",In.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[fP,hP]}),n})();function gP(n,...e){return{ngModule:pP,providers:[{provide:BA,useFactory:dP(n),multi:!0,deps:[l.R0b,l.zs3,In.HU,R1,[new l.FiY,ob],...e]}]}}const mP=(0,In.u3)(UA.n,!0),yP=(0,In.u3)(UA.a6,!0),vP=(0,In.u3)(UA.y,!0);let $A=(()=>{class n{constructor(t,r){this.angularFirestore=t,this.afAuth=r}getUsuarios(){return this.angularFirestore.collection("users").snapshotChanges()}getUsuarioById(t){return this.angularFirestore.collection("users").doc(t).valueChanges()}getUsuarioBySessionId(t){return this.angularFirestore.collection("users").doc(t).valueChanges()}createUsuario(t){return new Promise((r,o)=>{this.angularFirestore.collection("users").add(t).then(u=>{console.log(u)},u=>{o(u)})})}updateUsuario(t,r){return this.angularFirestore.collection("users").doc(r).update({email:t.email,id:t.id,rango:t.rango})}setUsuario(t){this.usuario=t}getUsuario(){return this.usuario}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_p),l.LFG(Zo))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I0=(()=>{class n{constructor(t,r,o,u){this.auth=t,this.afsAuth=r,this.afs=o,this.sesionService=u}register({email:t,password:r}){return new Promise((o,u)=>{this.afsAuth.createUserWithEmailAndPassword(t,r).then(h=>{o(h),this.updateUserData(h.user)}).catch(h=>console.log(u(h)))})}login({email:t,password:r}){return yP(this.auth,t,r).then(o=>(this.sesionService.setUsuario(o),o)).catch(o=>{throw new Error("No se pudo autenticar al usuario")})}logout(){return vP(this.auth)}isAuth(){return this.afsAuth.authState.pipe((0,st.U)(t=>t))}updateUserData(t){return this.afs.doc(`users/${t.uid}`).set({id:t.uid,email:t.email,rango:0},{merge:!0})}isUserRole(t){return this.afs.doc(`users/${t}`).valueChanges()}isAuthenticated(){return this.afsAuth.authState}getUser(t){return this.afs.collection("users",r=>r.where("email","==",t).limit(1)).valueChanges()}getUid(){return this.afsAuth.currentUser.then(t=>t.email)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_b),l.LFG(Zo),l.LFG(_p),l.LFG($A))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _P(n,e){1&n&&(l.TgZ(0,"div",2),l._UZ(1,"hr"),l.TgZ(2,"p"),l._uU(3,"Parce que no has iniciado sesi\xf3n todav\xeda, inicia sesi\xf3n o registrate para acceder a las funciones de la aplicaci\xf3n. "),l.qZA(),l.TgZ(4,"button",3),l._uU(5,"Inicio de sesi\xf3n y registro"),l.qZA()())}function wP(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2),l._UZ(1,"hr"),l.TgZ(2,"h3"),l._uU(3),l.qZA(),l._UZ(4,"br"),l.TgZ(5,"p"),l._uU(6,"Usa las opciones del men\xfa de navegaci\xf3n izquierdo para gestionar las incidencias"),l.qZA(),l.TgZ(7,"button",4),l.NdJ("click",function(){l.CHM(t);const o=l.oxw();return l.KtG(o.onClick())})("click",function(){l.CHM(t);const o=l.oxw();return l.KtG(o.refresh())}),l._uU(8,"Cerrar sesi\xf3n"),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(3),l.hij("Est\xe1s logeado como: ",t.userEmail,"")}}let IP=(()=>{class n{constructor(t,r,o,u){this.afAuth=t,this.userService=r,this.router=o,this.location=u,this.userIsAuthenticated=!1,this.afAuth.authState.subscribe(h=>{h&&(this.userEmail=h.email),this.afAuth.authState.subscribe(g=>{this.userIsAuthenticated=!!g})})}ngOnInit(){}onClick(){this.userService.logout().then(()=>{this.router.navigate(["/login"])}).catch(t=>console.log(t))}refresh(){this.location.go(this.location.path()),window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Zo),l.Y36(I0),l.Y36(gn),l.Y36(Ne))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-principal"]],decls:5,vars:2,consts:[[1,"container","pt-4","pb-4"],["class","nav nav-pills flex-column mt-auto",4,"ngIf"],[1,"nav","nav-pills","flex-column","mt-auto"],["routerLink","/login","type","button",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline-danger","mt-5",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Bienvenido al panel de incidencias "),l.qZA(),l.YNc(3,_P,6,0,"div",1),l.YNc(4,wP,9,1,"div",1),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngIf",!r.userIsAuthenticated),l.xp6(1),l.Q6J("ngIf",r.userIsAuthenticated))},dependencies:[On,_s]}),n})(),EP=(()=>{class n{constructor(t,r,o,u){this.incidenciaService=t,this.formBuilder=r,this.activeRoute=o,this.router=u,this.editForm=this.formBuilder.group({descripcion:[{value:"",disabled:!0}],estado:[{value:"",disabled:!0}],fecha:[{value:"",disabled:!0}],lugar:[{value:"",disabled:!0}],posible_arreglo:[{value:"",disabled:!0}],revisada:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.incidenciaService.getIncidenciaById(t).subscribe(r=>{this.incidenciaRef=r,this.editForm=this.formBuilder.group({descripcion:[this.incidenciaRef.descripcion],estado:[this.incidenciaRef.estado],fecha:[this.incidenciaRef.fecha],lugar:[this.incidenciaRef.lugar],posible_arreglo:[this.incidenciaRef.posible_arreglo],revisada:[this.incidenciaRef.revisada]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.incidenciaService.updateIncidencia(this.editForm.value,t),this.router.navigate(["check"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(p0),l.Y36(vb),l.Y36(ys),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-editar"]],decls:47,vars:3,consts:[[1,"container","pt-4","pb-4"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","fecha","type","date","required","",1,"form-control"],["name","mitextarea","id","mitextarea","cols","40","rows","5","formControlName","descripcion","placeholder","Descripci\xf3n de la incidencia...","type","text",1,"form-control",2,"resize","none"],["formControlName","lugar","type","text","required","",1,"form-control"],["formControlName","posible_arreglo","type","text","required","",1,"form-control"],["formControlName","estado","placeholder","Estado","type","text",1,"form-control"],["value","Leido"],["value","Asignado"],["value","Comenzado"],["value","Terminado"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-check","form-switch"],["type","checkbox","formControlName","revisada",1,"form-check-input"],[1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h3"),l._uU(2,"Informaci\xf3n de la incidencia"),l.qZA(),l.TgZ(3,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(4,"div",2)(5,"label",3),l._uU(6,"Fecha de la incidencia"),l.qZA(),l._UZ(7,"input",4),l.qZA(),l.TgZ(8,"div",2)(9,"label",3),l._uU(10,"Descripci\xf3n"),l.qZA(),l.TgZ(11,"textarea",5),l._uU(12,"            "),l.qZA()(),l.TgZ(13,"div",2)(14,"label",3),l._uU(15,"Lugar"),l.qZA(),l._UZ(16,"input",6),l.qZA(),l.TgZ(17,"div",2)(18,"label",3),l._uU(19,"Posible Arreglo"),l.qZA(),l._UZ(20,"input",7),l.qZA(),l.TgZ(21,"div",2)(22,"label",3),l._uU(23,"Seleccione un nuevo estado para actualizar la incidencia:"),l.qZA(),l.TgZ(24,"select",8)(25,"option",9),l._uU(26,"Leido"),l.qZA(),l.TgZ(27,"option",10),l._uU(28,"Asignado"),l.qZA(),l.TgZ(29,"option",11),l._uU(30,"Comenzado"),l.qZA(),l.TgZ(31,"option",12),l._uU(32,"Terminado"),l.qZA()()(),l._UZ(33,"br"),l.qZA(),l.TgZ(34,"div",13)(35,"div",14)(36,"h3"),l._uU(37,"Revisi\xf3n de la incidencia "),l.qZA()(),l.TgZ(38,"div",15)(39,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(40,"div",16),l._UZ(41,"input",17),l.TgZ(42,"label",18),l._uU(43,"Marcar esta casilla para indicar que esta incidencia est\xe1 revisada"),l.qZA()(),l._UZ(44,"br"),l.TgZ(45,"button",19),l._uU(46,"Actualizar revisi\xf3n"),l.qZA()()()()()),2&t&&(l.xp6(3),l.Q6J("formGroup",r.editForm),l.xp6(36),l.Q6J("formGroup",r.editForm),l.xp6(6),l.Q6J("disabled",!r.editForm.valid))},dependencies:[bp,_0,w0,El,IA,Dp,uh,Ip,Tp,bl,ch]}),n})();function bP(n,e){if(1&n&&(l.TgZ(0,"tr")(1,"td",16),l._uU(2),l.qZA(),l.TgZ(3,"td",17),l._uU(4),l.qZA(),l.TgZ(5,"td",18),l._uU(6),l.qZA(),l.TgZ(7,"td",19),l._uU(8),l.qZA(),l.TgZ(9,"td",20),l._uU(10),l.qZA(),l.TgZ(11,"td")(12,"button",21),l._uU(13,"Establecer revisi\xf3n"),l.qZA()()()),2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.descripcion),l.xp6(2),l.Oqu(t.estado),l.xp6(2),l.Oqu(t.fecha),l.xp6(2),l.Oqu(t.lugar),l.xp6(2),l.Oqu(t.posible_arreglo),l.xp6(2),l.MGl("routerLink","/checkEdit/",t.id,"")}}let DP=(()=>{class n{constructor(t){this.incidenciaService=t,this.filtroRevisada="todos"}ngOnInit(){this.incidenciaService.getIncidencias().subscribe(t=>{this.Incidencias=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})),"todos"===this.filtroRevisada?this.IncidenciasFiltradas=this.Incidencias:"revisada"===this.filtroRevisada?this.IncidenciasFiltradas=this.Incidencias.filter(r=>r.revisada):"no-revisada"===this.filtroRevisada&&(this.IncidenciasFiltradas=this.Incidencias.filter(r=>!r.revisada))})}actualizarFiltro(){"todos"===this.filtroRevisada?this.IncidenciasFiltradas=this.Incidencias:"revisada"===this.filtroRevisada?this.IncidenciasFiltradas=this.Incidencias.filter(t=>t.revisada):"no-revisada"===this.filtroRevisada&&(this.IncidenciasFiltradas=this.Incidencias.filter(t=>!t.revisada))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(p0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-revision"]],decls:32,vars:2,consts:[[1,"container"],[1,"form-group"],["for","filtroRevisada"],["id","filtroRevisada",1,"form-select",2,"width","300px",3,"ngModel","ngModelChange","change"],["value","todos"],["value","revisada"],["value","no-revisada"],[1,"card"],[1,"card-body"],["scope","col",1,"descripcionTd"],["scope","col",1,"estadoTd"],["scope","col",1,"fechaTd"],["scope","col",1,"lugarTd"],["scope","col",1,"posibleArregloTd"],["scope","col"],[4,"ngFor","ngForOf"],[1,"descripcionTd"],[1,"estadoTd"],[1,"fechaTd"],[1,"lugarTd"],[1,"posibleArregloTd"],[1,"btn","btn-outline-secondary",3,"routerLink"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Listado de incidencias"),l.qZA(),l._UZ(3,"br"),l.TgZ(4,"div",1)(5,"label",2),l._uU(6,"Filtrar por estado de revisi\xf3n:"),l.qZA(),l.TgZ(7,"select",3),l.NdJ("ngModelChange",function(u){return r.filtroRevisada=u})("change",function(){return r.actualizarFiltro()}),l.TgZ(8,"option",4),l._uU(9,"Todas las incidencias"),l.qZA(),l.TgZ(10,"option",5),l._uU(11,"Inicidencias revisadas"),l.qZA(),l.TgZ(12,"option",6),l._uU(13,"Incidencias no revisadas"),l.qZA()()(),l._UZ(14,"br"),l.TgZ(15,"div",7)(16,"div",8)(17,"table")(18,"tr")(19,"th",9),l._uU(20,"Descripci\xf3n"),l.qZA(),l.TgZ(21,"th",10),l._uU(22,"Estado"),l.qZA(),l.TgZ(23,"th",11),l._uU(24,"Fecha"),l.qZA(),l.TgZ(25,"th",12),l._uU(26,"Lugar"),l.qZA(),l.TgZ(27,"th",13),l._uU(28,"Posible arreglo"),l.qZA(),l.TgZ(29,"th",14),l._uU(30,"Actualizar estado"),l.qZA()(),l.YNc(31,bP,14,6,"tr",15),l.qZA()()()()),2&t&&(l.xp6(7),l.Q6J("ngModel",r.filtroRevisada),l.xp6(24),l.Q6J("ngForOf",r.IncidenciasFiltradas))},dependencies:[bi,_s,_0,w0,Dp,uh,PA],styles:[".tabla[_ngcontent-%COMP%]{border-collapse:collapse;border-radius:15px;border:2px red;padding:5px}.tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:7px}td[_ngcontent-%COMP%]{font-size:15px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:10px}.descripcionTd[_ngcontent-%COMP%]{width:100%;min-width:180px!important;max-width:180px!important}.estadoTd[_ngcontent-%COMP%]{width:100%;min-width:25px!important;max-width:25px!important}.fechaTd[_ngcontent-%COMP%]{width:100%;min-width:90px!important;max-width:90px!important}.lugarTd[_ngcontent-%COMP%]{width:100%;min-width:150px!important;max-width:150px!important}.posibleArregloTd[_ngcontent-%COMP%]{width:100%;min-width:200px!important}.estadoTd[_ngcontent-%COMP%]{width:100%;min-width:110px!important;max-width:110px!important}"]}),n})();function CP(n,e){1&n&&(l.TgZ(0,"div",17),l._uU(1,"Los datos introducidos no coinciden con la base de datos."),l.qZA())}let TP=(()=>{class n{constructor(t,r){this.userService=t,this.router=r,this.formLogin=new Ep({email:new rc,password:new rc})}ngOnInit(){}onSubmit(){this.userService.login(this.formLogin.value).then(t=>{this.router.navigate(["/"]),console.log(t)}).catch(t=>(this.error=t.message,rt(!1)))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(I0),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:71,vars:2,consts:[[1,"container"],[2,"text-align","center"],[1,"formLogin","card",2,"background-color","rgb(238, 244, 253)"],[3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["type","submit","value","Iniciar sesi\xf3n",1,"btn","btn-primary"],["routerLink","/register",1,""],[1,"cardContainer"],[1,"card","border-primary","mb-3",2,"width","48%","margin-right","2%"],[1,"card-header"],[1,"card-body","text-primary"],[1,"card-text"],[1,"card","border-primary","mb-3",2,"width","48%","margin-left","2%"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Inicio de sesi\xf3n"),l.qZA(),l._UZ(3,"br"),l.TgZ(4,"div",2)(5,"form",3),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.YNc(6,CP,2,0,"div",4),l.TgZ(7,"div",5)(8,"label",6),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",7),l.qZA(),l._UZ(11,"br"),l.TgZ(12,"div",5)(13,"label",6),l._uU(14,"Password"),l.qZA(),l._UZ(15,"input",8),l.qZA(),l._UZ(16,"br")(17,"input",9),l.qZA(),l._UZ(18,"br"),l.TgZ(19,"a",10),l._uU(20,"\xbfNo tienes cuenta? Reg\xedstrate aqu\xed"),l.qZA(),l._UZ(21,"br"),l.qZA(),l._UZ(22,"br")(23,"br"),l.TgZ(24,"h4",1),l._uU(25,"Cuentas de prueba con roles pre-asignados"),l.qZA(),l._UZ(26,"hr"),l.TgZ(27,"div",11)(28,"div",12)(29,"div",13),l._uU(30,"Cuenta de usuario"),l.qZA(),l.TgZ(31,"div",14)(32,"p",15),l._uU(33,"Mail: usuario@gmail.com"),l.qZA(),l.TgZ(34,"p",15),l._uU(35,"Contrase\xf1a: 123456"),l.qZA(),l.TgZ(36,"p",15),l._uU(37,"Rol: Usuario (0)"),l.qZA()()(),l.TgZ(38,"div",16)(39,"div",13),l._uU(40,"Cuenta de mantenimiento"),l.qZA(),l.TgZ(41,"div",14)(42,"p",15),l._uU(43,"Mail: mantenimiento@gmail.com"),l.qZA(),l.TgZ(44,"p",15),l._uU(45,"Contrase\xf1a: 123456"),l.qZA(),l.TgZ(46,"p",15),l._uU(47,"Rol: Mantenimiento (1)"),l.qZA()()(),l._UZ(48,"br"),l.qZA(),l.TgZ(49,"div",11)(50,"div",12)(51,"div",13),l._uU(52,"Cuenta de directivo"),l.qZA(),l.TgZ(53,"div",14)(54,"p",15),l._uU(55,"Mail: directivo@gmail.com"),l.qZA(),l.TgZ(56,"p",15),l._uU(57,"Contrase\xf1a: 123456"),l.qZA(),l.TgZ(58,"p",15),l._uU(59,"Rol: Directivo (2)"),l.qZA()()(),l.TgZ(60,"div",16)(61,"div",13),l._uU(62,"Cuenta de administrador"),l.qZA(),l.TgZ(63,"div",14)(64,"p",15),l._uU(65,"Mail: admin@gmail.com"),l.qZA(),l.TgZ(66,"p",15),l._uU(67,"Contrase\xf1a: 123456"),l.qZA(),l.TgZ(68,"p",15),l._uU(69,"Rol: Administrador (3)"),l.qZA()()(),l._UZ(70,"br"),l.qZA()()),2&t&&(l.xp6(5),l.Q6J("formGroup",r.formLogin),l.xp6(1),l.Q6J("ngIf",r.error))},dependencies:[On,Qh,bp,El,uh,Ip,bl,ch],styles:[".container[_ngcontent-%COMP%]{padding:20px;margin:10px auto;width:65%}.formLogin[_ngcontent-%COMP%]{padding:20px}.cardContainer[_ngcontent-%COMP%]{display:flex}"]}),n})();function AP(n,e){if(1&n&&(l.TgZ(0,"div",12),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.hij('Error al registrar: "',t.error,'".')}}function SP(n,e){1&n&&(l.TgZ(0,"div",12),l._uU(1,"Las contrase\xf1as no coinciden."),l.qZA())}let xP=(()=>{class n{constructor(t,r){this.router=t,this.userService=r,this.formReg=new Ep({email:new rc,password:new rc,confirmPassword:new rc})}ngOnInit(){this.formReg.setValidators(this.checkPasswords)}onSubmit(){this.formReg.valid?this.userService.register(this.formReg.value).then(t=>{this.router.navigate(["/"]),console.log(t)}).catch(t=>(this.error=t.message,rt(!1))):this.formReg.markAllAsTouched()}checkPasswords(t){return t.get("password").value===t.get("confirmPassword").value?null:{notSame:!0}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(I0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:3,consts:[[1,"container"],[2,"text-align","center"],[1,"formLogin","card",2,"background-color","rgb(238, 244, 253)"],[3,"formGroup","ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirmPassword",1,"form-control"],["type","submit","value","Registrarme",1,"btn","btn-primary"],["routerLink","/login","value","Volver",1,"btn","btn-outline-primary"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Registro"),l.qZA(),l._UZ(3,"br"),l.TgZ(4,"div",2)(5,"form",3),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.YNc(6,AP,2,1,"div",4),l.TgZ(7,"div",5)(8,"label",6),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",7),l.qZA(),l._UZ(11,"br"),l.TgZ(12,"div",5)(13,"label",6),l._uU(14,"Contrase\xf1a"),l.qZA(),l._UZ(15,"input",8),l.qZA(),l._UZ(16,"br"),l.TgZ(17,"div",5)(18,"label",6),l._uU(19,"Repite la contrase\xf1a"),l.qZA(),l._UZ(20,"input",9),l.qZA(),l._UZ(21,"br"),l.YNc(22,SP,2,0,"div",4),l._UZ(23,"input",10),l.qZA(),l._UZ(24,"br"),l.qZA(),l._UZ(25,"br"),l.TgZ(26,"button",11),l._uU(27,"\u2190 Volver"),l.qZA()()),2&t&&(l.xp6(5),l.Q6J("formGroup",r.formReg),l.xp6(1),l.Q6J("ngIf",r.error),l.xp6(16),l.Q6J("ngIf",null==r.formReg.errors?null:r.formReg.errors.notSame))},dependencies:[On,_s,bp,El,uh,Ip,bl,ch],styles:[".container[_ngcontent-%COMP%]{padding:20px;margin:10px auto;width:65%}.formLogin[_ngcontent-%COMP%]{padding:20px}"]}),n})();function MP(n,e){if(1&n&&(l.TgZ(0,"tr")(1,"td",8),l._uU(2),l.qZA(),l.TgZ(3,"td",8),l._uU(4),l.qZA(),l.TgZ(5,"td",9),l._uU(6),l.qZA(),l.TgZ(7,"td")(8,"button",10),l._uU(9,"Editar Usuario"),l.qZA()()()),2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.id),l.xp6(2),l.Oqu(t.email),l.xp6(2),l.Oqu(t.rango),l.xp6(2),l.MGl("routerLink","/usersEdit/",t.id,"")}}let RP=(()=>{class n{constructor(t){this.usuarioService=t}ngOnInit(){this.usuarioService.getUsuarios().subscribe(t=>{this.Usuarios=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($A))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-mostrar2"]],decls:18,vars:1,consts:[[1,"container","contenedor"],[1,"card","tarjeta"],[1,"card-body"],["scope","col",1,"descripcionTd"],["scope","col",1,"estadoTd"],["scope","col",1,"fechaTd"],["scope","col"],[4,"ngFor","ngForOf"],[1,"descripcionTd"],[1,"estadoTd"],[1,"btn","btn-outline-secondary",3,"routerLink"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Listado de incidencias"),l.qZA(),l._UZ(3,"br"),l.TgZ(4,"div",1)(5,"div",2)(6,"table")(7,"tr")(8,"th",3),l._uU(9,"Identificador"),l.qZA(),l.TgZ(10,"th",4),l._uU(11,"Email"),l.qZA(),l.TgZ(12,"th",5),l._uU(13,"Rango"),l.qZA(),l.TgZ(14,"th",6),l._uU(15,"Acci\xf3n"),l.qZA()(),l._UZ(16,"br"),l.YNc(17,MP,10,4,"tr",7),l.qZA()()()()),2&t&&(l.xp6(17),l.Q6J("ngForOf",r.Usuarios))},dependencies:[bi,_s],styles:[".tabla[_ngcontent-%COMP%]{border-collapse:collapse;border-radius:15px;border:2px red;padding:5px}.tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:7px}td[_ngcontent-%COMP%]{font-size:15px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-right:10px}.descripcionTd[_ngcontent-%COMP%]{width:100%;min-width:40%!important;max-width:40%!important}.estadoTd[_ngcontent-%COMP%]{width:100%;min-width:25px!important;max-width:25px!important}.fechaTd[_ngcontent-%COMP%]{width:100%;min-width:90px!important;max-width:90px!important}.lugarTd[_ngcontent-%COMP%]{width:100%;min-width:150px!important;max-width:150px!important}.posibleArregloTd[_ngcontent-%COMP%]{width:100%;min-width:200px!important}.estadoTd[_ngcontent-%COMP%]{width:100%;min-width:110px!important;max-width:110px!important}.contenedor[_ngcontent-%COMP%]{min-width:800px}"]}),n})(),NP=(()=>{class n{constructor(t,r,o,u){this.usuarioService=t,this.formBuilder=r,this.activeRoute=o,this.router=u,this.editForm=this.formBuilder.group({id:[{value:"",disabled:!0}],email:[{value:"",disabled:!0}],rango:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.usuarioService.getUsuarioById(t).subscribe(r=>{this.usuarioRef=r,this.editForm=this.formBuilder.group({id:[this.usuarioRef.id],email:[this.usuarioRef.email],rango:[this.usuarioRef.rango]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.usuarioService.updateUsuario(this.editForm.value,t),this.router.navigate(["users"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36($A),l.Y36(vb),l.Y36(ys),l.Y36(gn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-editar2"]],decls:33,vars:3,consts:[[1,"container","pt-4","pb-4"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","id","type","text","required","",1,"form-control"],["formControlName","email","type","text","required","",1,"form-control"],[1,"card"],[1,"card-header"],[1,"card-body"],["formControlName","rango","placeholder","Estado","type","text",1,"form-select"],["value","0"],["value","1"],["value","2"],["value","3"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"h3"),l._uU(2,"Informaci\xf3n del usuario"),l.qZA(),l.TgZ(3,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(4,"div",2)(5,"label",3),l._uU(6,"Identificador"),l.qZA(),l._UZ(7,"input",4),l.qZA(),l.TgZ(8,"div",2)(9,"label",3),l._uU(10,"Email"),l.qZA(),l._UZ(11,"input",5),l.qZA()(),l.TgZ(12,"div",6)(13,"div",7)(14,"h3"),l._uU(15,"Estado de la incidencia "),l.qZA()(),l.TgZ(16,"div",8)(17,"form",1),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(18,"div",2)(19,"div",2)(20,"label",3),l._uU(21,"Introduzca el Rol que desea para el usuario"),l.qZA(),l.TgZ(22,"select",9)(23,"option",10),l._uU(24,"Usuario"),l.qZA(),l.TgZ(25,"option",11),l._uU(26,"Matenimiento"),l.qZA(),l.TgZ(27,"option",12),l._uU(28,"Directivo"),l.qZA(),l.TgZ(29,"option",13),l._uU(30,"Administrador"),l.qZA()()()(),l.TgZ(31,"button",14),l._uU(32,"Actualizar estado"),l.qZA()()()()()),2&t&&(l.xp6(3),l.Q6J("formGroup",r.editForm),l.xp6(14),l.Q6J("formGroup",r.editForm),l.xp6(14),l.Q6J("disabled",!r.editForm.valid))},dependencies:[bp,_0,w0,El,Dp,uh,Ip,Tp,bl,ch]}),n})();function OP(n,e){1&n&&(l.TgZ(0,"a"),l._uU(1,"Administrador"),l.qZA())}function PP(n,e){1&n&&(l.TgZ(0,"a"),l._uU(1,"Directivo"),l.qZA())}function kP(n,e){1&n&&(l.TgZ(0,"a"),l._uU(1,"Mantenimiento"),l.qZA())}function FP(n,e){1&n&&(l.TgZ(0,"a"),l._uU(1,"Usuario"),l.qZA())}let LP=(()=>{class n{constructor(t,r,o){this.router=t,this.userService=r,this.afAuth=o,this.userIsAuthenticated=!1,this.userUid=null,this.isAdmin=null,this.isDirectivo=null,this.isMantenimiento=null,this.isUsuario=null,this.afAuth.authState.subscribe(u=>{u&&(this.userEmail=u.email,this.userId=u.uid),this.afAuth.authState.subscribe(h=>{this.userIsAuthenticated=!!h})})}ngOnInit(){this.getCurrentUser()}getCurrentUser(){this.userService.isAuth().subscribe(t=>{t&&(this.userUid=t.uid,this.userService.isUserRole(this.userUid).subscribe(r=>{this.isUsuario=0==r.rango,this.isMantenimiento=1==r.rango,this.isDirectivo=2==r.rango,this.isAdmin=3==r.rango}))})}onClick(){this.userService.logout().then(()=>{this.router.navigate(["/login"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(I0),l.Y36(Zo))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-perfil"]],decls:22,vars:6,consts:[[1,"etiqueta"],[4,"ngIf"],["type","button",1,"btn","btn-outline-danger","mt-5",3,"click"]],template:function(t,r){1&t&&(l.TgZ(0,"h2"),l._uU(1,"Estos son los datos de tu perfil:"),l.qZA(),l._UZ(2,"br"),l.TgZ(3,"a",0),l._uU(4,"Identificador: "),l.qZA(),l.TgZ(5,"a"),l._uU(6),l.qZA(),l._UZ(7,"br"),l.TgZ(8,"a",0),l._uU(9,"Email: "),l.qZA(),l.TgZ(10,"a"),l._uU(11),l.qZA(),l._UZ(12,"br"),l.TgZ(13,"a",0),l._uU(14,"Rango: "),l.qZA(),l.YNc(15,OP,2,0,"a",1),l.YNc(16,PP,2,0,"a",1),l.YNc(17,kP,2,0,"a",1),l.YNc(18,FP,2,0,"a",1),l._UZ(19,"br"),l.TgZ(20,"button",2),l.NdJ("click",function(){return r.onClick()}),l._uU(21,"Cerrar sesi\xf3n"),l.qZA()),2&t&&(l.xp6(6),l.Oqu(r.userId),l.xp6(5),l.Oqu(r.userEmail),l.xp6(4),l.Q6J("ngIf",r.isAdmin),l.xp6(1),l.Q6J("ngIf",r.isDirectivo),l.xp6(1),l.Q6J("ngIf",r.isMantenimiento),l.xp6(1),l.Q6J("ngIf",r.isUsuario))},dependencies:[On],styles:[".etiqueta[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:700}"]}),n})(),Ap=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r}canActivate(t,r){return this.afAuth.authState.pipe((0,st.U)(o=>!!o),(0,_e.b)(o=>{o||this.router.navigate(["/login"])}))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zo),l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bM=(()=>{class n{constructor(t,r,o){this.afAuth=t,this.firestore=r,this.router=o}canActivate(t,r){return this.afAuth.authState.pipe(Vn(o=>o?this.firestore.doc(`users/${o.uid}`).valueChanges():rt(null)),(0,st.U)(o=>1==o.rango||3==o.rango||(this.router.navigate(["/"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zo),l.LFG(_p),l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DM=(()=>{class n{constructor(t,r,o){this.afAuth=t,this.firestore=r,this.router=o}canActivate(t,r){return this.afAuth.authState.pipe(Vn(o=>o?this.firestore.doc(`users/${o.uid}`).valueChanges():rt(null)),(0,st.U)(o=>2==o.rango||3==o.rango||(this.router.navigate(["/"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zo),l.LFG(_p),l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CM=(()=>{class n{constructor(t,r,o){this.afAuth=t,this.firestore=r,this.router=o}canActivate(t,r){return this.afAuth.authState.pipe(Vn(o=>o?this.firestore.doc(`users/${o.uid}`).valueChanges():rt(null)),(0,st.U)(o=>3==o.rango||(this.router.navigate(["/"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Zo),l.LFG(_p),l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VP=[{path:"",component:IP},{path:"show",component:uP,canActivate:[Ap,bM]},{path:"create",component:sP},{path:"edit/:id",component:oP,canActivate:[Ap,bM]},{path:"check",component:DP,canActivate:[Ap,DM]},{path:"checkEdit/:id",component:EP,canActivate:[Ap,DM]},{path:"login",component:TP},{path:"register",component:xP},{path:"users",component:RP,canActivate:[Ap,CM]},{path:"usersEdit/:id",component:NP,canActivate:[Ap,CM]},{path:"profile",component:LP,canActivate:[Ap]}];let UP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Gy.forRoot(VP),Gy]}),n})();function BP(n,e){1&n&&(l.O4$(),l.kcU(),l.TgZ(0,"li")(1,"a",40),l.O4$(),l.TgZ(2,"svg",30),l._UZ(3,"use",41),l.qZA(),l._uU(4," Gesti\xf3n de Incidencias "),l.qZA()())}function $P(n,e){1&n&&(l.O4$(),l.kcU(),l.TgZ(0,"li")(1,"a",42),l.O4$(),l.TgZ(2,"svg",30),l._UZ(3,"use",43),l.qZA(),l._uU(4," Revision de Incidencias "),l.qZA()())}function jP(n,e){1&n&&(l.O4$(),l.kcU(),l.TgZ(0,"li"),l._UZ(1,"hr"),l.TgZ(2,"a",44),l.O4$(),l.TgZ(3,"svg",30),l._UZ(4,"use",45),l.qZA(),l._uU(5," Gestionar Usuarios "),l.qZA()())}function HP(n,e){1&n&&(l.TgZ(0,"a",46),l.O4$(),l.TgZ(1,"svg",30),l._UZ(2,"use",47),l.qZA(),l._uU(3," Inicio de Sesi\xf3n y Registro "),l.qZA())}function GP(n,e){if(1&n&&(l.TgZ(0,"div")(1,"div",36)(2,"ul",37)(3,"li")(4,"a",48),l.O4$(),l.TgZ(5,"svg",30),l._UZ(6,"use",47),l.qZA(),l._uU(7," Estas logeado como:"),l.kcU(),l._UZ(8,"br"),l.TgZ(9,"a"),l._uU(10),l.qZA()()()()()()),2&n){const t=l.oxw();l.xp6(10),l.hij(" ",t.userEmail,"")}}let qP=(()=>{class n{constructor(t,r,o){this.router=t,this.userService=r,this.afAuth=o,this.userIsAuthenticated=!1,this.isAdmin=null,this.isDirectivo=null,this.isMantenimiento=null,this.isUsuario=null,this.userUid=null,this.afAuth.authState.subscribe(u=>{u&&(this.userEmail=u.email),this.afAuth.authState.subscribe(h=>{this.userIsAuthenticated=!!h})})}ngOnInit(){this.getCurrentUser()}getCurrentUser(){this.userService.isAuth().subscribe(t=>{t&&(this.userUid=t.uid,this.userService.isUserRole(this.userUid).subscribe(r=>{this.isUsuario=0==r.rango,this.isMantenimiento=1==r.rango,this.isDirectivo=2==r.rango,this.isAdmin=3==r.rango}))})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gn),l.Y36(I0),l.Y36(Zo))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sidebar"]],decls:54,vars:5,consts:[["xmlns","http://www.w3.org/2000/svg",2,"display","none"],["id","bootstrap","viewBox","0 0 118 94"],["fill-rule","evenodd","clip-rule","evenodd","d","M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z"],["id","home","viewBox","0 0 16 16"],["d","M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"],["id","list","viewBox","0 0 16 16"],["d","M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"],["d","M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"],["id","list-checked","viewBox","0 0 16 16"],["d","M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"],["d","m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"],["id","suma","viewBox","0 0 16 16"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["id","logo","viewBox","0 0 16 16"],["d","M6 1v3H1V1h5zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H1zm14 12v3h-5v-3h5zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-5zM6 8v7H1V8h5zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H1zm14-6v7h-5V1h5zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1h-5z"],["id","people-circle","viewBox","0 0 16 16"],["d","M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"],["fill-rule","evenodd","d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"],["id","gestion","viewBox","0 0 16 16"],["d","M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"],[1,"bloqueIzquierda"],[1,"sideBar","d-flex","flex-column","flex-shrink-0","p-3","bg-light",2,"width","280px"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],["width","40","height","32",1,"bi","pe-none","me-2"],[0,"xlink","href","#logo"],[1,"fs-4",2,"font-weight","bold"],[1,"nav","nav-pills","flex-column"],[1,"nav-item"],["routerLink","/","aria-current","page",1,"enlace","nav-link","link-dark"],["width","16","height","16",1,"bi","pe-none","me-2"],[0,"xlink","href","#home"],[1,"mb-auto"],["routerLink","create",1,"enlace","nav-link","link-dark"],[0,"xlink","href","#suma"],[4,"ngIf"],[2,"text-align","center"],[1,"nav","nav-pills","flex-column","mb-auto"],["routerLink","login","class","enlace nav-link link-dark",4,"ngIf"],[1,"divisorVertical"],["routerLink","show",1,"enlace","nav-link","link-dark"],[0,"xlink","href","#list"],["routerLink","check",1,"enlace","nav-link","link-dark"],[0,"xlink","href","#list-checked"],["routerLink","users",1,"enlace","nav-link","link-dark"],[0,"xlink","href","#gestion"],["routerLink","login",1,"enlace","nav-link","link-dark"],[0,"xlink","href","#people-circle"],["routerLink","profile",1,"enlace","nav-link","link-dark"]],template:function(t,r){1&t&&(l.O4$(),l.TgZ(0,"svg",0)(1,"symbol",1)(2,"title"),l._uU(3,"Incidencias"),l.qZA(),l._UZ(4,"path",2),l.qZA(),l.TgZ(5,"symbol",3),l._UZ(6,"path",4),l.qZA(),l.TgZ(7,"symbol",5),l._UZ(8,"path",6)(9,"path",7),l.qZA(),l.TgZ(10,"symbol",8),l._UZ(11,"path",9)(12,"path",10),l.qZA(),l.TgZ(13,"symbol",11),l._UZ(14,"path",12)(15,"path",13),l.qZA(),l.TgZ(16,"symbol",14),l._UZ(17,"path",15),l.qZA(),l.TgZ(18,"symbol",16),l._UZ(19,"path",17)(20,"path",18),l.qZA(),l.TgZ(21,"symbol",19),l._UZ(22,"path",20),l.qZA()(),l.kcU(),l.TgZ(23,"div",21)(24,"div",22)(25,"a",23),l.O4$(),l.TgZ(26,"svg",24),l._UZ(27,"use",25),l.qZA(),l.kcU(),l.TgZ(28,"span",26),l._uU(29,"App Incidencias"),l.qZA()(),l._UZ(30,"br"),l.TgZ(31,"ul",27)(32,"li",28)(33,"a",29),l.O4$(),l.TgZ(34,"svg",30),l._UZ(35,"use",31),l.qZA(),l._uU(36," Inicio "),l.qZA()()(),l.kcU(),l.TgZ(37,"div",32)(38,"ul",27)(39,"li")(40,"a",33),l.O4$(),l.TgZ(41,"svg",30),l._UZ(42,"use",34),l.qZA(),l._uU(43," Agregar una Incidencia "),l.qZA()(),l.YNc(44,BP,5,0,"li",35),l.YNc(45,$P,5,0,"li",35),l.YNc(46,jP,6,0,"li",35),l.qZA()(),l.kcU(),l._UZ(47,"hr"),l.TgZ(48,"div",36)(49,"ul",37)(50,"li"),l.YNc(51,HP,4,0,"a",38),l.qZA()()(),l.YNc(52,GP,11,1,"div",35),l.qZA(),l._UZ(53,"div",39),l.qZA()),2&t&&(l.xp6(44),l.Q6J("ngIf",1==r.isMantenimiento||1==r.isAdmin),l.xp6(1),l.Q6J("ngIf",1==r.isDirectivo||1==r.isAdmin),l.xp6(1),l.Q6J("ngIf",1==r.isAdmin),l.xp6(5),l.Q6J("ngIf",!r.userIsAuthenticated),l.xp6(1),l.Q6J("ngIf",r.userIsAuthenticated))},dependencies:[On,Qh],styles:[".bloqueIzquierda[_ngcontent-%COMP%]{float:left;position:fixed;display:flex;width:290px}.divisorVertical[_ngcontent-%COMP%]{height:100%;background-color:transparent;width:10px;height:97vh;padding:0!important;float:right}.sideBar[_ngcontent-%COMP%]{float:left;border-radius:15px;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px;z-index:1}.bloqueDerecha[_ngcontent-%COMP%]{background-color:#fff;width:100%;height:-moz-fit-content;height:fit-content;margin-left:290px;float:right;border-radius:15px;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}.b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}.b-example-vr[_ngcontent-%COMP%]{flex-shrink:0;width:1.5rem;height:100vh}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.nav-scroller[_ngcontent-%COMP%]{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.enlace[_ngcontent-%COMP%]:hover{background-color:#0d6efd;color:#fff!important}"]}),n})(),ZP=(()=>{class n{constructor(){this.title="examen2-pabloLopezLujan"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"contenedorTotal"],[1,"bloqueIzquierda"],[1,"divisorVertical"],[1,"bloqueDerecha","p-3","pt-5","pb-5"]],template:function(t,r){1&t&&(l.TgZ(0,"body")(1,"div",0)(2,"div",1),l._UZ(3,"app-sidebar")(4,"div",2),l.qZA(),l.TgZ(5,"div",3),l._UZ(6,"router-outlet"),l.qZA()()())},dependencies:[My,qP],styles:[".contenedorTotal[_ngcontent-%COMP%]{background-color:#c4e3ff;display:flex;padding:10px;width:100%;height:100vh}.bloqueIzquierda[_ngcontent-%COMP%]{float:left;position:fixed;display:flex;width:290px}.bloqueDerecha[_ngcontent-%COMP%]{background-color:#fff;width:100%;min-width:800px;height:-moz-fit-content;height:fit-content;margin-left:290px;float:right;border-radius:15px;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}"]}),n})();const jA_firebase={projectId:"app-ind-94e5e",appId:"1:202066564435:web:69711c048486be833bbda6",storageBucket:"app-ind-94e5e.appspot.com",apiKey:"AIzaSyA3xhHgPJsVENCW-KJL352T4S5JPWyIEDc",authDomain:"app-ind-94e5e.firebaseapp.com",messagingSenderId:"202066564435"};let zP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[ZP]}),n.\u0275inj=l.cJS({imports:[Eo,UP,Ys.hO.initializeApp(jA_firebase),nO,lO,iP,_M,lN(()=>dN(jA_firebase)),gP(()=>mP())]}),n})();(0,l.G48)(),ha().bootstrapModule(zP).catch(n=>console.error(n))},9751:(ct,Te,k)=>{k.d(Te,{y:()=>ce});var l=k(2961),B=k(727),O=k(8822),ne=k(9635),oe=k(2416),pe=k(576),he=k(2806);let ce=(()=>{class Y{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const be=new Y;return be.source=this,be.operator=Me,be}subscribe(Me,be,et){const ve=function j(Y){return Y&&Y instanceof l.Lv||function G(Y){return Y&&(0,pe.m)(Y.next)&&(0,pe.m)(Y.error)&&(0,pe.m)(Y.complete)}(Y)&&(0,B.Nn)(Y)}(Me)?Me:new l.Hp(Me,be,et);return(0,he.x)(()=>{const{operator:fe,source:Qe}=this;ve.add(fe?fe.call(ve,Qe):Qe?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Me){try{return this._subscribe(Me)}catch(be){Me.error(be)}}forEach(Me,be){return new(be=ge(be))((et,ve)=>{const fe=new l.Hp({next:Qe=>{try{Me(Qe)}catch(Ke){ve(Ke),fe.unsubscribe()}},error:ve,complete:et});this.subscribe(fe)})}_subscribe(Me){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Me)}[O.L](){return this}pipe(...Me){return(0,ne.U)(Me)(this)}toPromise(Me){return new(Me=ge(Me))((be,et)=>{let ve;this.subscribe(fe=>ve=fe,fe=>et(fe),()=>be(ve))})}}return Y.create=Ue=>new Y(Ue),Y})();function ge(Y){var Ue;return null!==(Ue=Y??oe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(ct,Te,k)=>{k.d(Te,{x:()=>he});var l=k(9751),B=k(727);const ne=(0,k(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=k(8737),pe=k(2806);let he=(()=>{class ge extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Y=new ce(this,this);return Y.operator=j,Y}_throwIfClosed(){if(this.closed)throw new ne}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Y}=this;for(;Y.length;)Y.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Y,isStopped:Ue,observers:Me}=this;return Y||Ue?B.Lc:(this.currentObservers=null,Me.push(j),new B.w0(()=>{this.currentObservers=null,(0,oe.P)(Me,j)}))}_checkFinalizedStatuses(j){const{hasError:Y,thrownError:Ue,isStopped:Me}=this;Y?j.error(Ue):Me&&j.complete()}asObservable(){const j=new l.y;return j.source=this,j}}return ge.create=(G,j)=>new ce(G,j),ge})();class ce extends he{constructor(G,j){super(),this.destination=G,this.source=j}next(G){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Y||Y.call(j,G)}error(G){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Y||Y.call(j,G)}complete(){var G,j;null===(j=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===j||j.call(G)}_subscribe(G){var j,Y;return null!==(Y=null===(j=this.source)||void 0===j?void 0:j.subscribe(G))&&void 0!==Y?Y:B.Lc}}},2961:(ct,Te,k)=>{k.d(Te,{Hp:()=>et,Lv:()=>Y});var l=k(576),B=k(727),O=k(2416),ne=k(7849);function oe(){}const pe=ge("C",void 0,void 0);function ge(Ne,Se,Ee){return{kind:Ne,value:Se,error:Ee}}var G=k(3410),j=k(2806);class Y extends B.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,B.Nn)(Se)&&Se.add(this)):this.destination=Ke}static create(Se,Ee,Ge){return new et(Se,Ee,Ge)}next(Se){this.isStopped?Qe(function ce(Ne){return ge("N",Ne,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Qe(function he(Ne){return ge("E",void 0,Ne)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Qe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Me(Ne,Se){return Ue.call(Ne,Se)}class be{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Se)}catch(Ge){ve(Ge)}}error(Se){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Se)}catch(Ge){ve(Ge)}else ve(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Ee){ve(Ee)}}}class et extends Y{constructor(Se,Ee,Ge){let te;if(super(),(0,l.m)(Se)||!Se)te={next:Se??void 0,error:Ee??void 0,complete:Ge??void 0};else{let ae;this&&O.v.useDeprecatedNextContext?(ae=Object.create(Se),ae.unsubscribe=()=>this.unsubscribe(),te={next:Se.next&&Me(Se.next,ae),error:Se.error&&Me(Se.error,ae),complete:Se.complete&&Me(Se.complete,ae)}):te=Se}this.destination=new be(te)}}function ve(Ne){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ne):(0,ne.h)(Ne)}function Qe(Ne,Se){const{onStoppedNotification:Ee}=O.v;Ee&&G.z.setTimeout(()=>Ee(Ne,Se))}const Ke={closed:!0,next:oe,error:function fe(Ne){throw Ne},complete:oe}},727:(ct,Te,k)=>{k.d(Te,{Lc:()=>pe,w0:()=>oe,Nn:()=>he});var l=k(576);const O=(0,k(3888).d)(ge=>function(j){ge(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Y,Ue)=>`${Ue+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ne=k(8737);class oe{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Me of j)Me.remove(this);else j.remove(this);const{initialTeardown:Y}=this;if((0,l.m)(Y))try{Y()}catch(Me){G=Me instanceof O?Me.errors:[Me]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Me of Ue)try{ce(Me)}catch(be){G=G??[],be instanceof O?G=[...G,...be.errors]:G.push(be)}}if(G)throw new O(G)}}add(G){var j;if(G&&G!==this)if(this.closed)ce(G);else{if(G instanceof oe){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(G)}}_hasParent(G){const{_parentage:j}=this;return j===G||Array.isArray(j)&&j.includes(G)}_addParent(G){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(G),j):j?[j,G]:G}_removeParent(G){const{_parentage:j}=this;j===G?this._parentage=null:Array.isArray(j)&&(0,ne.P)(j,G)}remove(G){const{_finalizers:j}=this;j&&(0,ne.P)(j,G),G instanceof oe&&G._removeParent(this)}}oe.EMPTY=(()=>{const ge=new oe;return ge.closed=!0,ge})();const pe=oe.EMPTY;function he(ge){return ge instanceof oe||ge&&"closed"in ge&&(0,l.m)(ge.remove)&&(0,l.m)(ge.add)&&(0,l.m)(ge.unsubscribe)}function ce(ge){(0,l.m)(ge)?ge():ge.unsubscribe()}},2416:(ct,Te,k)=>{k.d(Te,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,Te,k)=>{k.d(Te,{E:()=>B});const B=new(k(9751).y)(oe=>oe.complete())},8996:(ct,Te,k)=>{k.d(Te,{D:()=>Se});var l=k(8421),B=k(5363),O=k(9468),pe=k(9751),ce=k(2202),ge=k(576),G=k(9672);function Y(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new pe.y(te=>{(0,G.f)(te,Ge,()=>{const ae=Ee[Symbol.asyncIterator]();(0,G.f)(te,Ge,()=>{ae.next().then(me=>{me.done?te.complete():te.next(me.value)})},0,!0)})})}var Ue=k(3670),Me=k(8239),be=k(1144),et=k(6495),ve=k(2206),fe=k(4532),Qe=k(3260);function Se(Ee,Ge){return Ge?function Ne(Ee,Ge){if(null!=Ee){if((0,Ue.c)(Ee))return function ne(Ee,Ge){return(0,l.Xf)(Ee).pipe((0,O.R)(Ge),(0,B.Q)(Ge))}(Ee,Ge);if((0,be.z)(Ee))return function he(Ee,Ge){return new pe.y(te=>{let ae=0;return Ge.schedule(function(){ae===Ee.length?te.complete():(te.next(Ee[ae++]),te.closed||this.schedule())})})}(Ee,Ge);if((0,Me.t)(Ee))return function oe(Ee,Ge){return(0,l.Xf)(Ee).pipe((0,O.R)(Ge),(0,B.Q)(Ge))}(Ee,Ge);if((0,ve.D)(Ee))return Y(Ee,Ge);if((0,et.T)(Ee))return function j(Ee,Ge){return new pe.y(te=>{let ae;return(0,G.f)(te,Ge,()=>{ae=Ee[ce.h](),(0,G.f)(te,Ge,()=>{let me,K;try{({value:me,done:K}=ae.next())}catch(Q){return void te.error(Q)}K?te.complete():te.next(me)},0,!0)}),()=>(0,ge.m)(ae?.return)&&ae.return()})}(Ee,Ge);if((0,Qe.L)(Ee))return function Ke(Ee,Ge){return Y((0,Qe.Q)(Ee),Ge)}(Ee,Ge)}throw(0,fe.z)(Ee)}(Ee,Ge):(0,l.Xf)(Ee)}},8421:(ct,Te,k)=>{k.d(Te,{Xf:()=>Ue});var l=k(655),B=k(1144),O=k(8239),ne=k(9751),oe=k(3670),pe=k(2206),he=k(4532),ce=k(6495),ge=k(3260),G=k(576),j=k(7849),Y=k(8822);function Ue(Ne){if(Ne instanceof ne.y)return Ne;if(null!=Ne){if((0,oe.c)(Ne))return function Me(Ne){return new ne.y(Se=>{const Ee=Ne[Y.L]();if((0,G.m)(Ee.subscribe))return Ee.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,B.z)(Ne))return function be(Ne){return new ne.y(Se=>{for(let Ee=0;Ee<Ne.length&&!Se.closed;Ee++)Se.next(Ne[Ee]);Se.complete()})}(Ne);if((0,O.t)(Ne))return function et(Ne){return new ne.y(Se=>{Ne.then(Ee=>{Se.closed||(Se.next(Ee),Se.complete())},Ee=>Se.error(Ee)).then(null,j.h)})}(Ne);if((0,pe.D)(Ne))return fe(Ne);if((0,ce.T)(Ne))return function ve(Ne){return new ne.y(Se=>{for(const Ee of Ne)if(Se.next(Ee),Se.closed)return;Se.complete()})}(Ne);if((0,ge.L)(Ne))return function Qe(Ne){return fe((0,ge.Q)(Ne))}(Ne)}throw(0,he.z)(Ne)}function fe(Ne){return new ne.y(Se=>{(function Ke(Ne,Se){var Ee,Ge,te,ae;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,l.KL)(Ne);!(Ge=yield Ee.next()).done;)if(Se.next(Ge.value),Se.closed)return}catch(me){te={error:me}}finally{try{Ge&&!Ge.done&&(ae=Ee.return)&&(yield ae.call(Ee))}finally{if(te)throw te.error}}Se.complete()})})(Ne,Se).catch(Ee=>Se.error(Ee))})}},6451:(ct,Te,k)=>{k.d(Te,{T:()=>pe});var l=k(8189),B=k(8421),O=k(515),ne=k(7669),oe=k(8996);function pe(...he){const ce=(0,ne.yG)(he),ge=(0,ne._6)(he,1/0),G=he;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,l.J)(ge)((0,oe.D)(G,ce)):O.E}},5403:(ct,Te,k)=>{k.d(Te,{x:()=>B});var l=k(2961);function B(ne,oe,pe,he,ce){return new O(ne,oe,pe,he,ce)}class O extends l.Lv{constructor(oe,pe,he,ce,ge,G){super(oe),this.onFinalize=ge,this.shouldUnsubscribe=G,this._next=pe?function(j){try{pe(j)}catch(Y){oe.error(Y)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(Y){oe.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(j){oe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ct,Te,k)=>{k.d(Te,{U:()=>O});var l=k(4482),B=k(5403);function O(ne,oe){return(0,l.e)((pe,he)=>{let ce=0;pe.subscribe((0,B.x)(he,ge=>{he.next(ne.call(oe,ge,ce++))}))})}},8189:(ct,Te,k)=>{k.d(Te,{J:()=>O});var l=k(5577),B=k(4671);function O(ne=1/0){return(0,l.z)(B.y,ne)}},5577:(ct,Te,k)=>{k.d(Te,{z:()=>ce});var l=k(4004),B=k(8421),O=k(4482),ne=k(9672),oe=k(5403),he=k(576);function ce(ge,G,j=1/0){return(0,he.m)(G)?ce((Y,Ue)=>(0,l.U)((Me,be)=>G(Y,Me,Ue,be))((0,B.Xf)(ge(Y,Ue))),j):("number"==typeof G&&(j=G),(0,O.e)((Y,Ue)=>function pe(ge,G,j,Y,Ue,Me,be,et){const ve=[];let fe=0,Qe=0,Ke=!1;const Ne=()=>{Ke&&!ve.length&&!fe&&G.complete()},Se=Ge=>fe<Y?Ee(Ge):ve.push(Ge),Ee=Ge=>{Me&&G.next(Ge),fe++;let te=!1;(0,B.Xf)(j(Ge,Qe++)).subscribe((0,oe.x)(G,ae=>{Ue?.(ae),Me?Se(ae):G.next(ae)},()=>{te=!0},void 0,()=>{if(te)try{for(fe--;ve.length&&fe<Y;){const ae=ve.shift();be?(0,ne.f)(G,be,()=>Ee(ae)):Ee(ae)}Ne()}catch(ae){G.error(ae)}}))};return ge.subscribe((0,oe.x)(G,Se,()=>{Ke=!0,Ne()})),()=>{et?.()}}(Y,Ue,ge,j)))}},5363:(ct,Te,k)=>{k.d(Te,{Q:()=>ne});var l=k(9672),B=k(4482),O=k(5403);function ne(oe,pe=0){return(0,B.e)((he,ce)=>{he.subscribe((0,O.x)(ce,ge=>(0,l.f)(ce,oe,()=>ce.next(ge),pe),()=>(0,l.f)(ce,oe,()=>ce.complete(),pe),ge=>(0,l.f)(ce,oe,()=>ce.error(ge),pe)))})}},3099:(ct,Te,k)=>{k.d(Te,{B:()=>oe});var l=k(8421),B=k(7579),O=k(2961),ne=k(4482);function oe(he={}){const{connector:ce=(()=>new B.x),resetOnError:ge=!0,resetOnComplete:G=!0,resetOnRefCountZero:j=!0}=he;return Y=>{let Ue,Me,be,et=0,ve=!1,fe=!1;const Qe=()=>{Me?.unsubscribe(),Me=void 0},Ke=()=>{Qe(),Ue=be=void 0,ve=fe=!1},Ne=()=>{const Se=Ue;Ke(),Se?.unsubscribe()};return(0,ne.e)((Se,Ee)=>{et++,!fe&&!ve&&Qe();const Ge=be=be??ce();Ee.add(()=>{et--,0===et&&!fe&&!ve&&(Me=pe(Ne,j))}),Ge.subscribe(Ee),!Ue&&et>0&&(Ue=new O.Hp({next:te=>Ge.next(te),error:te=>{fe=!0,Qe(),Me=pe(Ke,ge,te),Ge.error(te)},complete:()=>{ve=!0,Qe(),Me=pe(Ke,G),Ge.complete()}}),(0,l.Xf)(Se).subscribe(Ue))})(Y)}}function pe(he,ce,...ge){if(!0===ce)return void he();if(!1===ce)return;const G=new O.Hp({next:()=>{G.unsubscribe(),he()}});return ce(...ge).subscribe(G)}},9468:(ct,Te,k)=>{k.d(Te,{R:()=>B});var l=k(4482);function B(O,ne=0){return(0,l.e)((oe,pe)=>{pe.add(O.schedule(()=>oe.subscribe(pe),ne))})}},8505:(ct,Te,k)=>{k.d(Te,{b:()=>oe});var l=k(576),B=k(4482),O=k(5403),ne=k(4671);function oe(pe,he,ce){const ge=(0,l.m)(pe)||he||ce?{next:pe,error:he,complete:ce}:pe;return ge?(0,B.e)((G,j)=>{var Y;null===(Y=ge.subscribe)||void 0===Y||Y.call(ge);let Ue=!0;G.subscribe((0,O.x)(j,Me=>{var be;null===(be=ge.next)||void 0===be||be.call(ge,Me),j.next(Me)},()=>{var Me;Ue=!1,null===(Me=ge.complete)||void 0===Me||Me.call(ge),j.complete()},Me=>{var be;Ue=!1,null===(be=ge.error)||void 0===be||be.call(ge,Me),j.error(Me)},()=>{var Me,be;Ue&&(null===(Me=ge.unsubscribe)||void 0===Me||Me.call(ge)),null===(be=ge.finalize)||void 0===be||be.call(ge)}))}):ne.y}},4408:(ct,Te,k)=>{k.d(Te,{o:()=>oe});var l=k(727);class B extends l.w0{constructor(he,ce){super()}schedule(he,ce=0){return this}}const O={setInterval(pe,he,...ce){const{delegate:ge}=O;return ge?.setInterval?ge.setInterval(pe,he,...ce):setInterval(pe,he,...ce)},clearInterval(pe){const{delegate:he}=O;return(he?.clearInterval||clearInterval)(pe)},delegate:void 0};var ne=k(8737);class oe extends B{constructor(he,ce){super(he,ce),this.scheduler=he,this.work=ce,this.pending=!1}schedule(he,ce=0){var ge;if(this.closed)return this;this.state=he;const G=this.id,j=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(j,G,ce)),this.pending=!0,this.delay=ce,this.id=null!==(ge=this.id)&&void 0!==ge?ge:this.requestAsyncId(j,this.id,ce),this}requestAsyncId(he,ce,ge=0){return O.setInterval(he.flush.bind(he,this),ge)}recycleAsyncId(he,ce,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ce;null!=ce&&O.clearInterval(ce)}execute(he,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(he,ce);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,ce){let G,ge=!1;try{this.work(he)}catch(j){ge=!0,G=j||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:he,scheduler:ce}=this,{actions:ge}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ge,this),null!=he&&(this.id=this.recycleAsyncId(ce,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,Te,k)=>{k.d(Te,{v:()=>O});var l=k(6063);class B{constructor(oe,pe=B.now){this.schedulerActionCtor=oe,this.now=pe}schedule(oe,pe=0,he){return new this.schedulerActionCtor(this,oe).schedule(he,pe)}}B.now=l.l.now;class O extends B{constructor(oe,pe=B.now){super(oe,pe),this.actions=[],this._active=!1}flush(oe){const{actions:pe}=this;if(this._active)return void pe.push(oe);let he;this._active=!0;do{if(he=oe.execute(oe.state,oe.delay))break}while(oe=pe.shift());if(this._active=!1,he){for(;oe=pe.shift();)oe.unsubscribe();throw he}}}},4986:(ct,Te,k)=>{k.d(Te,{z:()=>O});var l=k(4408);const O=new(k(7565).v)(l.o)},6063:(ct,Te,k)=>{k.d(Te,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(ct,Te,k)=>{k.d(Te,{z:()=>l});const l={setTimeout(B,O,...ne){const{delegate:oe}=l;return oe?.setTimeout?oe.setTimeout(B,O,...ne):setTimeout(B,O,...ne)},clearTimeout(B){const{delegate:O}=l;return(O?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(ct,Te,k)=>{k.d(Te,{h:()=>B});const B=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,Te,k)=>{k.d(Te,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ct,Te,k)=>{k.d(Te,{_6:()=>pe,jO:()=>ne,yG:()=>oe});var l=k(576);function O(he){return he[he.length-1]}function ne(he){return(0,l.m)(O(he))?he.pop():void 0}function oe(he){return function B(he){return he&&(0,l.m)(he.schedule)}(O(he))?he.pop():void 0}function pe(he,ce){return"number"==typeof O(he)?he.pop():ce}},8737:(ct,Te,k)=>{function l(B,O){if(B){const ne=B.indexOf(O);0<=ne&&B.splice(ne,1)}}k.d(Te,{P:()=>l})},3888:(ct,Te,k)=>{function l(B){const ne=B(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}k.d(Te,{d:()=>l})},2806:(ct,Te,k)=>{k.d(Te,{O:()=>ne,x:()=>O});var l=k(2416);let B=null;function O(oe){if(l.v.useDeprecatedSynchronousErrorHandling){const pe=!B;if(pe&&(B={errorThrown:!1,error:null}),oe(),pe){const{errorThrown:he,error:ce}=B;if(B=null,he)throw ce}}else oe()}function ne(oe){l.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=oe)}},9672:(ct,Te,k)=>{function l(B,O,ne,oe=0,pe=!1){const he=O.schedule(function(){ne(),pe?B.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(B.add(he),!pe)return he}k.d(Te,{f:()=>l})},4671:(ct,Te,k)=>{function l(B){return B}k.d(Te,{y:()=>l})},1144:(ct,Te,k)=>{k.d(Te,{z:()=>l});const l=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ct,Te,k)=>{k.d(Te,{D:()=>B});var l=k(576);function B(O){return Symbol.asyncIterator&&(0,l.m)(O?.[Symbol.asyncIterator])}},576:(ct,Te,k)=>{function l(B){return"function"==typeof B}k.d(Te,{m:()=>l})},3670:(ct,Te,k)=>{k.d(Te,{c:()=>O});var l=k(8822),B=k(576);function O(ne){return(0,B.m)(ne[l.L])}},6495:(ct,Te,k)=>{k.d(Te,{T:()=>O});var l=k(2202),B=k(576);function O(ne){return(0,B.m)(ne?.[l.h])}},8239:(ct,Te,k)=>{k.d(Te,{t:()=>B});var l=k(576);function B(O){return(0,l.m)(O?.then)}},3260:(ct,Te,k)=>{k.d(Te,{L:()=>ne,Q:()=>O});var l=k(655),B=k(576);function O(oe){return(0,l.FC)(this,arguments,function*(){const he=oe.getReader();try{for(;;){const{value:ce,done:ge}=yield(0,l.qq)(he.read());if(ge)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ce)}}finally{he.releaseLock()}})}function ne(oe){return(0,B.m)(oe?.getReader)}},4482:(ct,Te,k)=>{k.d(Te,{A:()=>B,e:()=>O});var l=k(576);function B(ne){return(0,l.m)(ne?.lift)}function O(ne){return oe=>{if(B(oe))return oe.lift(function(pe){try{return ne(pe,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ct,Te,k)=>{k.d(Te,{U:()=>O,z:()=>B});var l=k(4671);function B(...ne){return O(ne)}function O(ne){return 0===ne.length?l.y:1===ne.length?ne[0]:function(pe){return ne.reduce((he,ce)=>ce(he),pe)}}},7849:(ct,Te,k)=>{k.d(Te,{h:()=>O});var l=k(2416),B=k(3410);function O(ne){B.z.setTimeout(()=>{const{onUnhandledError:oe}=l.v;if(!oe)throw ne;oe(ne)})}},4532:(ct,Te,k)=>{function l(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>l})},655:(ct,Te,k)=>{function ne(K,Q){var le={};for(var ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&Q.indexOf(ie)<0&&(le[ie]=K[ie]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ie=Object.getOwnPropertySymbols(K);Fe<ie.length;Fe++)Q.indexOf(ie[Fe])<0&&Object.prototype.propertyIsEnumerable.call(K,ie[Fe])&&(le[ie[Fe]]=K[ie[Fe]])}return le}function ce(K,Q,le,ie){return new(le||(le=Promise))(function(Le,lt){function en(dn){try{qe(ie.next(dn))}catch(En){lt(En)}}function Ft(dn){try{qe(ie.throw(dn))}catch(En){lt(En)}}function qe(dn){dn.done?Le(dn.value):function Fe(Le){return Le instanceof le?Le:new le(function(lt){lt(Le)})}(dn.value).then(en,Ft)}qe((ie=ie.apply(K,Q||[])).next())})}function ve(K){return this instanceof ve?(this.v=K,this):new ve(K)}function fe(K,Q,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ie=le.apply(K,Q||[]),Le=[];return Fe={},lt("next"),lt("throw"),lt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function lt(Qt){ie[Qt]&&(Fe[Qt]=function(Jt){return new Promise(function($t,Rt){Le.push([Qt,Jt,$t,Rt])>1||en(Qt,Jt)})})}function en(Qt,Jt){try{!function Ft(Qt){Qt.value instanceof ve?Promise.resolve(Qt.value.v).then(qe,dn):En(Le[0][2],Qt)}(ie[Qt](Jt))}catch($t){En(Le[0][3],$t)}}function qe(Qt){en("next",Qt)}function dn(Qt){en("throw",Qt)}function En(Qt,Jt){Qt(Jt),Le.shift(),Le.length&&en(Le[0][0],Le[0][1])}}function Ke(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,Q=K[Symbol.asyncIterator];return Q?Q.call(K):(K=function Y(K){var Q="function"==typeof Symbol&&Symbol.iterator,le=Q&&K[Q],ie=0;if(le)return le.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ie>=K.length&&(K=void 0),{value:K&&K[ie++],done:!K}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),le={},ie("next"),ie("throw"),ie("return"),le[Symbol.asyncIterator]=function(){return this},le);function ie(Le){le[Le]=K[Le]&&function(lt){return new Promise(function(en,Ft){!function Fe(Le,lt,en,Ft){Promise.resolve(Ft).then(function(qe){Le({value:qe,done:en})},lt)}(en,Ft,(lt=K[Le](lt)).done,lt.value)})}}}k.d(Te,{FC:()=>fe,KL:()=>Ke,_T:()=>ne,mG:()=>ce,qq:()=>ve})},4650:(ct,Te,k)=>{k.d(Te,{$8M:()=>ou,$Z:()=>yw,AFp:()=>R_,AaK:()=>ce,CHM:()=>fh,CRH:()=>y_,CZH:()=>Nm,CqO:()=>Yc,D6c:()=>J_,EJc:()=>KC,EpF:()=>Pi,F4k:()=>Av,FYo:()=>Yh,FiY:()=>_e,G48:()=>sT,GfV:()=>nw,Gpc:()=>j,JOm:()=>Ri,KtG:()=>fo,LFG:()=>Rn,LSH:()=>id,Lbi:()=>WC,Lck:()=>FI,MGl:()=>Oa,MMx:()=>r_,NdJ:()=>Sv,O4$:()=>gc,OlP:()=>Tn,Oqu:()=>kv,PXZ:()=>Hm,Q6J:()=>qg,QGY:()=>Kg,QP$:()=>Oe,Qsj:()=>uD,R0b:()=>rs,RDi:()=>xb,Rgc:()=>$d,SBq:()=>Lc,Sil:()=>Fm,Suo:()=>Ba,TTD:()=>us,TgZ:()=>Af,X6Q:()=>q_,XFs:()=>Ye,Xpm:()=>De,Xts:()=>ug,Y36:()=>Au,YKP:()=>Js,YNc:()=>Dv,Yjl:()=>V,Yz7:()=>Jt,Z0I:()=>Ei,ZZ4:()=>np,_Bn:()=>Fd,_UZ:()=>Zg,_Vd:()=>Eu,_c5:()=>fT,_uU:()=>bs,aQg:()=>ip,c2e:()=>P_,cJS:()=>Rt,cg1:()=>Uv,dDg:()=>Bm,dqk:()=>Ct,eFA:()=>Zm,ekj:()=>vt,eoX:()=>B_,f3M:()=>ui,g9A:()=>N_,h0i:()=>ul,hGG:()=>pT,hij:()=>ku,iGM:()=>bm,ifc:()=>ht,ip1:()=>M_,jDz:()=>Ld,kL8:()=>Bv,kcU:()=>Vl,lG2:()=>z,lqb:()=>Iu,lri:()=>_l,n5z:()=>fs,oAB:()=>Kt,oxw:()=>Xw,q4F:()=>rw,qLn:()=>_s,qOj:()=>Ug,qZA:()=>Bo,rWj:()=>Um,sBO:()=>Yd,sIi:()=>Nu,s_b:()=>Im,soG:()=>km,tb:()=>O_,tp0:()=>ot,uIk:()=>wv,vHH:()=>be,vpe:()=>Go,wAp:()=>Et,xp6:()=>uw,z2F:()=>Kd,zSh:()=>By,zs3:()=>es});var l=k(7579),B=k(727),O=k(9751),ne=k(6451),oe=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function he(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ge(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const G=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function Y(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(G)&&i.__forward_ref__===j}class be extends Error{constructor(s,a){super(function et(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ve(i){return"string"==typeof i?i:null==i?"":String(i)}function Se(i,s){throw new be(-201,!1)}function Ft(i,s){null==i&&function qe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Rt(i){return{providers:i.providers||[],imports:i.imports||[]}}function br(i){return Pr(i,kr)||Pr(i,fi)}function Ei(i){return null!==br(i)}function Pr(i,s){return i.hasOwnProperty(s)?i[s]:null}function $i(i){return i&&(i.hasOwnProperty(qn)||i.hasOwnProperty(ji))?i[qn]:null}const kr=pe({\u0275prov:pe}),qn=pe({\u0275inj:pe}),fi=pe({ngInjectableDef:pe}),ji=pe({ngInjectorDef:pe});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let Qn;function wn(i){const s=Qn;return Qn=i,s}function pr(i,s,a){const c=br(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ye.Optional?null:void 0!==s?s:void Se(ce(i))}function bn(i){return{toString:i}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),ht=(()=>{return(i=ht||(ht={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ht;var i})();const Ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dr={},bt=[],Fr=pe({\u0275cmp:pe}),Mt=pe({\u0275dir:pe}),ti=pe({\u0275pipe:pe}),zt=pe({\u0275mod:pe}),ar=pe({\u0275fac:pe}),xn=pe({__NG_ELEMENT_ID__:pe});let Je=0;function De(i){return bn(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||bt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ht.Emulated,id:"c"+Je++,styles:i.styles||bt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return d.inputs=$(i.inputs,c),d.outputs=$(i.outputs),y&&y.forEach(w=>w(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(Dt):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(X).filter(Dt):null,d})}function _t(i){return M(i)||L(i)}function Dt(i){return null!==i}function Kt(i){return bn(()=>({type:i.type,bootstrap:i.bootstrap||bt,declarations:i.declarations||bt,imports:i.imports||bt,exports:i.exports||bt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function $(i,s){if(null==i)return Dr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}const z=De;function V(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function M(i){return i[Fr]||null}function L(i){return i[Mt]||null}function X(i){return i[ti]||null}function Oe(i){const s=M(i)||L(i)||X(i);return null!==s&&s.standalone}function tt(i,s){const a=i[zt]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Xn(i){return Array.isArray(i)&&"object"==typeof i[1]}function ri(i){return Array.isArray(i)&&!0===i[1]}function ro(i){return 0!=(8&i.flags)}function sc(i){return 2==(2&i.flags)}function Ko(i){return 1==(1&i.flags)}function jr(i){return null!==i.template}function oc(i){return 0!=(256&i[2])}function _r(i,s){return i.hasOwnProperty(ar)?i[ar]:null}class ao{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function us(){return xl}function xl(i){return i.type.prototype.ngOnChanges&&(i.setInput=uc),Wa}function Wa(){const i=uo(this),s=i?.current;if(s){const a=i.previous;if(a===Dr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function uc(i,s,a,c){const d=uo(i)||function Pp(i,s){return i[Ml]=s}(i,{previous:Dr,current:null}),f=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[a],E=y[w];f[w]=new ao(E&&E.currentValue,s,y===Dr),i[c]=s}us.ngInherit=!0;const Ml="__ngSimpleChanges__";function uo(i){return i[Ml]||null}function Ln(i){for(;Array.isArray(i);)i=i[0];return i}function gi(i,s){return Ln(s[i])}function gr(i,s){return Ln(s[i.index])}function lo(i,s){return i.data[s]}function tn(i,s){const a=s[i];return Xn(a)?a:a[0]}function cs(i){return 64==(64&i[2])}function oi(i,s){return null==s?null:i[s]}function Jo(i){i[18]=0}function Un(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const St={lFrame:ua(null),bindingsEnabled:!0};function Ps(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function qt(){return St.lFrame.tView}function fh(i){return St.lFrame.contextLView=i,i[8]}function fo(i){return St.lFrame.contextLView=null,i}function er(){let i=po();for(;null!==i&&64===i.type;)i=i.parent;return i}function po(){return St.lFrame.currentTNode}function Lr(i,s){const a=St.lFrame;a.currentTNode=i,a.isParent=s}function Qa(){return St.lFrame.isParent}function sa(){return St.lFrame.bindingIndex++}function Pl(i,s){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,mo(s)}function mo(i){St.lFrame.currentDirectiveIndex=i}function oa(){return St.lFrame.currentQueryIndex}function pc(i){St.lFrame.currentQueryIndex=i}function aa(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function kl(i,s,a){if(a&Ye.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Ye.Host||(d=aa(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const c=St.lFrame=mh();return c.currentTNode=s,c.lView=i,!0}function yo(i){const s=mh(),a=i[1];St.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function mh(){const i=St.lFrame,s=null===i?null:i.child;return null===s?ua(i):s}function ua(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function yh(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Fl=yh;function ls(){const i=yh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Pn(){return St.lFrame.selectedIndex}function Ki(i){St.lFrame.selectedIndex=i}function Mn(){const i=St.lFrame;return lo(i.tView,i.selectedIndex)}function gc(){St.lFrame.currentNamespace="svg"}function Vl(){!function yc(){St.lFrame.currentNamespace=null}()}function Ja(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:R}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function vo(i,s,a){Fs(i,s,3,a)}function _o(i,s,a,c){(3&i[2])===a&&Fs(i,s,a,c)}function Ul(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Fs(i,s,a,c){const f=c??-1,y=s.length-1;let w=0;for(let E=void 0!==c?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=c&&w>=c)break}else s[E]<0&&(i[18]+=65536),(w<f||-1==f)&&(Bl(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Bl(i,s,a,c){const d=a[c]<0,f=a[c+1],w=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class ai{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Yi(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,f)}else{const f=d,y=a[++c];Ic(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function ca(i){return 3===i||4===i||6===i}function Ic(i){return 64===i.charCodeAt(0)}function la(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||jl(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function jl(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function _h(i){return-1!==i}function nr(i){return 32767&i}function hs(i,s){let a=function wh(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ec=!0;function da(i){const s=Ec;return Ec=i,s}let Hl=0;const Gr={};function Qi(i,s){const a=ru(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,bc(c.data,i),bc(s,null),bc(c.blueprint,null));const d=ha(i,s),f=i.injectorIndex;if(_h(d)){const y=nr(d),w=hs(d,s),E=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|E[y+T]}return s[f+8]=d,f}function bc(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ru(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ha(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Ao(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ls(i,s,a){!function Gl(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(xn)&&(c=a[xn]),null==c&&(c=a[xn]=Hl++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Io(i,s,a){if(a&Ye.Optional||void 0!==i)return i;Se()}function Eo(i,s,a,c){if(a&Ye.Optional&&void 0===c&&(c=null),0==(a&(Ye.Self|Ye.Host))){const d=i[9],f=wn(void 0);try{return d?d.get(s,c,a&Ye.Optional):pr(s,c,a&Ye.Optional)}finally{wn(f)}}return Io(c,0,a)}function bo(i,s,a,c=Ye.Default,d){if(null!==i){if(1024&s[2]){const y=function bh(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=ql(f,y,a,c|Ye.Self,Gr);if(w!==Gr)return w;let E=f.parent;if(!E){const T=y[21];if(T){const R=T.get(a,Gr,c);if(R!==Gr)return R}E=Ao(y),y=y[15]}f=E}return d}(i,s,a,c,Gr);if(y!==Gr)return y}const f=ql(i,s,a,c,Gr);if(f!==Gr)return f}return Eo(s,a,c,d)}function ql(i,s,a,c,d){const f=function Eh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xn)?i[xn]:void 0;return"number"==typeof s?s>=0?255&s:Dc:s}(a);if("function"==typeof f){if(!kl(s,i,c))return c&Ye.Host?Io(d,0,c):Eo(s,a,c,d);try{const y=f(c);if(null!=y||c&Ye.Optional)return y;Se()}finally{Fl()}}else if("number"==typeof f){let y=null,w=ru(i,s),E=-1,T=c&Ye.Host?s[16][6]:null;for((-1===w||c&Ye.SkipSelf)&&(E=-1===w?ha(i,s):s[w+8],-1!==E&&su(c,!1)?(y=s[1],w=nr(E),s=hs(E,s)):w=-1);-1!==w;){const R=s[1];if(Do(f,w,R.data)){const F=iu(w,s,a,y,c,T);if(F!==Gr)return F}E=s[w+8],-1!==E&&su(c,s[1].data[w+8]===T)&&Do(f,w,s)?(y=R,w=nr(E),s=hs(E,s)):w=-1}}return d}function iu(i,s,a,c,d,f){const y=s[1],w=y.data[i+8],R=pa(w,y,a,null==c?sc(w)&&Ec:c!=y&&0!=(3&w.type),d&Ye.Host&&f===w);return null!==R?Ti(s,y,R,w):Gr}function pa(i,s,a,c,d){const f=i.providerIndexes,y=s.data,w=1048575&f,E=i.directiveStart,R=f>>20,Z=d?w+R:i.directiveEnd;for(let ee=c?w:w+R;ee<Z;ee++){const Ie=y[ee];if(ee<E&&a===Ie||ee>=E&&Ie.type===a)return ee}if(d){const ee=y[E];if(ee&&jr(ee)&&ee.type===a)return E}return null}function Ti(i,s,a,c){let d=i[a];const f=s.data;if(function wc(i){return i instanceof ai}(d)){const y=d;y.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new be(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ve(i)}(f[a]));const w=da(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?wn(y.injectImpl):null;kl(i,c,Ye.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function _c(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=xl(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&wn(E),da(w),y.resolving=!1,Fl()}}return d}function Do(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function su(i,s){return!(i&Ye.Self||i&Ye.Host&&s)}class Co{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return bo(this._tNode,this._lView,s,c,a)}}function Dc(){return new Co(er(),Ae())}function fs(i){return bn(()=>{const s=i.prototype.constructor,a=s[ar]||To(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[ar]||To(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function To(i){return Ue(i)?()=>{const s=To(Y(i));return s&&s()}:_r(i)}function Ao(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function ou(i){return function fa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(ca(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(er(),i)}const So="__parameters__";function Mo(i,s,a){return bn(()=>{const c=function Cc(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(E,T,R){const F=E.hasOwnProperty(So)?E[So]:Object.defineProperty(E,So,{value:[]})[So];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Tn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function An(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),An(c,s)):s!==i&&s.push(c)}return s}function Xi(i,s){i.forEach(a=>Array.isArray(a)?Xi(a,s):s(a))}function Us(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Tr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function st(i,s,a){let c=xi(i,s);return c>=0?i[1|c]=a:(c=~c,function Th(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Tc(i,s){const a=xi(i,s);if(a>=0)return i[1|a]}function xi(i,s){return function ga(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const yi={},du="__NG_DI_FLAG__",gs="ngTempTokenPath",Ar=/\n/gm,kn="__source";let Gs;function qs(i){const s=Gs;return Gs=i,s}function Vn(i,s=Ye.Default){if(void 0===Gs)throw new be(-203,!1);return null===Gs?pr(i,void 0,s):Gs.get(i,s&Ye.Optional?null:void 0,s)}function Rn(i,s=Ye.Default){return(function Zn(){return Qn}()||Vn)(Y(i),s)}function ui(i,s=Ye.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Rn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=Y(i[a]);if(Array.isArray(c)){if(0===c.length)throw new be(900,!1);let d,f=Ye.Default;for(let y=0;y<c.length;y++){const w=c[y],E=x(w);"number"==typeof E?-1===E?d=w.token:f|=E:d=w}s.push(Rn(d,f))}else s.push(Rn(c))}return s}function C(i,s){return i[du]=s,i.prototype[du]=s,i}function x(i){return i[du]}const _e=C(Mo("Optional"),8),ot=C(Mo("SkipSelf"),4);var Ri=(()=>((Ri=Ri||{})[Ri.Important=1]="Important",Ri[Ri.DashCase=2]="DashCase",Ri))();const xc=new Map;let Gp=0;const p="__ngContext__";function m(i,s){Xn(s)?(i[p]=s[20],function _y(i){xc.set(i[20],i)}(s)):i[p]=s}function Mc(i,s){return undefined(i,s)}function Ia(i){const s=i[3];return ri(s)?s[3]:s}function Ea(i){return Kp(i[13])}function Po(i){return Kp(i[4])}function Kp(i){for(;null!==i&&!ri(i);)i=i[4];return i}function yu(i,s,a,c,d){if(null!=c){let f,y=!1;ri(c)?f=c:Xn(c)&&(y=!0,c=c[0]);const w=Ln(c);0===i&&null!==a?null==d?P0(s,a,w):vu(s,a,w,d||null,!0):1===i&&null!==a?vu(s,a,w,d||null,!0):2===i?function Xp(i,s,a){const c=ms(i,s);c&&function Dy(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function Tb(i,s,a,c,d){const f=a[7];f!==Ln(a)&&yu(s,i,c,f,d);for(let w=10;w<a.length;w++){const E=a[w];Oc(E[1],E,i,s,c,f)}}(s,i,f,a,d)}}function Lh(i,s,a){return i.createElement(s,a)}function M0(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,Un(d,-1)),a.splice(c,1)}function Iy(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&M0(d,c),s>0&&(i[a-1][4]=c[4]);const f=Tr(i,10+s);!function Rc(i,s){Oc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function R0(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Oc(i,s,a,3,null,null),function wb(i){let s=i[13];if(!s)return Ey(i[1],i);for(;s;){let a=null;if(Xn(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Xn(s)&&Ey(s[1],s),s=s[3];null===s&&(s=i),Xn(s)&&Ey(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ey(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Db(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof ai)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],E=f[y+1];try{E.call(w)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function bb(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(s):Ln(s[y]),E=c[d=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],E,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),f+=2}else{const y=c[d=a[f+1]];a[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&ri(s[3])){a!==s[3]&&M0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function Jl(i){xc.delete(i[20])}(s)}}function N0(i,s,a){return function O0(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===ht.None||d===ht.Emulated)return null}return gr(c,a)}(i,s.parent,a)}function vu(i,s,a,c,d){i.insertBefore(s,a,c,d)}function P0(i,s,a){i.appendChild(s,a)}function by(i,s,a,c,d){null!==c?vu(i,s,a,c,d):P0(i,s,a)}function ms(i,s){return i.parentNode(s)}let Ry,F0=function Ty(i,s,a){return 40&i.type?gr(i,a):null};function Jp(i,s,a,c){const d=N0(i,c,s),f=s[11],w=function Cy(i,s,a){return F0(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)by(f,d,a[E],w,!1);else by(f,d,a,w,!1)}function Nc(i,s){if(null!==s){const a=s.type;if(3&a)return gr(s,i);if(4&a)return Vh(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Nc(i,c);{const d=i[s.index];return ri(d)?Vh(-1,d):Ln(d)}}if(32&a)return Mc(s,i)()||Ln(i[s.index]);{const c=Sy(i,s);return null!==c?Array.isArray(c)?c[0]:Nc(Ia(i[16]),c):Nc(i,s.next)}}return null}function Sy(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Vh(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Nc(c,d)}return s[7]}function Uh(i,s,a,c,d,f,y){for(;null!=a;){const w=c[a.index],E=a.type;if(y&&0===s&&(w&&m(Ln(w),c),a.flags|=4),64!=(64&a.flags))if(8&E)Uh(i,s,a.child,c,d,f,!1),yu(s,i,d,w,f);else if(32&E){const T=Mc(a,c);let R;for(;R=T();)yu(s,i,d,R,f);yu(s,i,d,w,f)}else 16&E?nd(i,s,c,a,d,f):yu(s,i,d,w,f);a=y?a.projectionNext:a.next}}function Oc(i,s,a,c,d,f){Uh(a,c,i.firstChild,s,d,f,!1)}function nd(i,s,a,c,d,f){const y=a[16],E=y[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)yu(s,i,d,E[T],f);else Uh(i,s,E,y[3],d,f,!0)}function eg(i,s,a){i.setAttribute(s,"style",a)}function tg(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function xb(i){Ry=i}class ig{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Da(i){return i instanceof ig?i.changingThisBreaksApplicationSecurity:i}const Gh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var cr=(()=>((cr=cr||{})[cr.NONE=0]="NONE",cr[cr.HTML=1]="HTML",cr[cr.STYLE=2]="STYLE",cr[cr.SCRIPT=3]="SCRIPT",cr[cr.URL=4]="URL",cr[cr.RESOURCE_URL=5]="RESOURCE_URL",cr))();function id(i){const s=function wu(){const i=Ae();return i&&i[12]}();return s?s.sanitize(cr.URL,i)||"":function Ca(i,s){const a=function Fb(i){return i instanceof ig&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Da(i):function kc(i){return(i=String(i)).match(Gh)?i:"unsafe:"+i}(ve(i))}const ug=new Tn("ENVIRONMENT_INITIALIZER"),sd=new Tn("INJECTOR",-1),Fy=new Tn("INJECTOR_DEF_TYPES");class Z0{get(s,a=yi){if(a===yi){const c=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw c.name="NullInjectorError",c}return a}}function Yb(...i){return{\u0275providers:z0(0,i)}}function z0(i,...s){const a=[],c=new Set;let d;return Xi(s,f=>{const y=f;Ly(y,a,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&W0(d,a),a}function W0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Xi(d,f=>{s.push(f)})}}function Ly(i,s,a,c){if(!(i=Y(i)))return!1;let d=null,f=$i(i);const y=!f&&M(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const E=i.ngModule;if(f=$i(E),!f)return!1;d=E}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)Ly(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;c.add(d);try{Xi(f.imports,R=>{Ly(R,s,a,c)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&W0(T,s)}if(!w){const T=_r(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:bt},{provide:Fy,useValue:d,multi:!0},{provide:ug,useValue:()=>Rn(d),multi:!0})}const E=f.providers;null==E||w||Xi(E,R=>{s.push(R)})}}return d!==i&&void 0!==i.providers}const Qb=pe({provide:String,useValue:pe});function Uy(i){return null!==i&&"object"==typeof i&&Qb in i}function Fc(i){return"function"==typeof i}const By=new Tn("Set Injector scope."),Wh={},Xb={};let cg;function Kh(){return void 0===cg&&(cg=new Z0),cg}class Iu{}class $y extends Iu{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dg(s,y=>this.processProvider(y)),this.records.set(sd,od(void 0,this)),d.has("environment")&&this.records.set(Iu,od(void 0,this));const f=this.records.get(By);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Fy.multi,bt,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=qs(this),c=wn(void 0);try{return s()}finally{qs(a),wn(c)}}get(s,a=yi,c=Ye.Default){this.assertNotDestroyed();const d=qs(this),f=wn(void 0);try{if(!(c&Ye.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=function J0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Tn}(s)&&br(s);w=E&&this.injectableDefInScope(E)?od(lg(s),Wh):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&Ye.Self?Kh():this.parent).get(s,a=c&Ye.Optional&&a===yi?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[gs]=y[gs]||[]).unshift(ce(s)),d)throw y;return function U(i,s,a,c){const d=i[gs];throw s[kn]&&d.unshift(s[kn]),i.message=function W(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ce(s);if(Array.isArray(s))d=s.map(ce).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Ar,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[gs]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{wn(f),qs(d)}}resolveInjectorInitializers(){const s=qs(this),a=wn(void 0);try{const c=this.get(ug.multi,bt,Ye.Self);for(const d of c)d()}finally{qs(s),wn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ce(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(s){let a=Fc(s=Y(s))?s:Y(s&&s.provide);const c=function tD(i){return Uy(i)?od(void 0,i.useValue):od(Q0(i),Wh)}(s);if(Fc(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=od(void 0,Wh,!0),d.factory=()=>b(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Wh&&(a.value=Xb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function rD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function lg(i){const s=br(i),a=null!==s?s.factory:_r(i);if(null!==a)return a;if(i instanceof Tn)throw new be(204,!1);if(i instanceof Function)return function eD(i){const s=i.length;if(s>0)throw function Bs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new be(204,!1);const a=function Fn(i){const s=i&&(i[kr]||i[fi]);if(s){const a=function Bi(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new be(204,!1)}function Q0(i,s,a){let c;if(Fc(i)){const d=Y(i);return _r(d)||lg(d)}if(Uy(i))c=()=>Y(i.useValue);else if(function Y0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function K0(i){return!(!i||!i.useExisting)}(i))c=()=>Rn(Y(i.useExisting));else{const d=Y(i&&(i.useClass||i.provide));if(!function nD(i){return!!i.deps}(i))return _r(d)||lg(d);c=()=>new d(...b(i.deps))}return c}function od(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function jy(i){return!!i.\u0275providers}function dg(i,s){for(const a of i)Array.isArray(a)?dg(a,s):jy(a)?dg(a.\u0275providers,s):s(a)}class iD{}class oD{resolveComponentFactory(s){throw function sD(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Eu=(()=>{class i{}return i.NULL=new oD,i})();function tw(){return bu(er(),Ae())}function bu(i,s){return new Lc(gr(i,s))}let Lc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=tw,i})();function aD(i){return i instanceof Lc?i.nativeElement:i}class Yh{}let uD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function cD(){const i=Ae(),a=tn(er().index,i);return(Xn(a)?a:i)[11]}(),i})(),lD=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class nw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const rw=new nw("14.2.12"),hg={};function fg(i){return i.ngOriginalError}class _s{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&fg(s);for(;a&&fg(a);)a=fg(a);return a||null}}function ko(i){return i instanceof Function?i():i}function Hy(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const mg="ng-template";function yD(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Hy(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function sw(i){return 4===i.type&&i.value!==mg}function vD(i,s,a){return s===(4!==i.type||a?i.value:mg)}function ow(i,s,a){let c=4;const d=i.attrs||[],f=function aw(i){for(let s=0;s<i.length;s++)if(ca(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!y)if(4&c){if(c=2|1&c,""!==E&&!vD(i,E,a)||""===E&&1===s.length){if(Ks(c))return!1;y=!0}}else{const T=8&c?E:s[++w];if(8&c&&null!==i.attrs){if(!yD(i.attrs,T,a)){if(Ks(c))return!1;y=!0}continue}const F=eS(8&c?"class":E,d,sw(i),a);if(-1===F){if(Ks(c))return!1;y=!0;continue}if(""!==T){let Z;Z=F>f?"":d[F+1].toLowerCase();const ee=8&c?Z:null;if(ee&&-1!==Hy(ee,T,0)||2&c&&T!==Z){if(Ks(c))return!1;y=!0}}}}else{if(!y&&!Ks(c)&&!Ks(E))return!1;if(y&&Ks(E))continue;y=!1,c=E|1&c}}return Ks(c)||y}function Ks(i){return 0==(1&i)}function eS(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function _D(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Xh(i,s,a=!1){for(let c=0;c<s.length;c++)if(ow(i,s[c],a))return!0;return!1}function Gy(i,s){return i?":not("+s.trim()+")":s}function ID(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Ks(y)&&(s+=Gy(f,d),d=""),c=y,f=f||!Ks(c);a++}return""!==d&&(s+=Gy(f,d)),s}const Lt={};function uw(i){qy(qt(),Ae(),Pn()+i,!1)}function qy(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&vo(s,f,a)}else{const f=i.preOrderHooks;null!==f&&_o(s,f,0,a)}Ki(a)}function dw(i,s=null,a=null,c){const d=we(i,s,a,c);return d.resolveInjectorInitializers(),d}function we(i,s=null,a=null,c,d=new Set){const f=[a||bt,Yb(i)];return c=c||("object"==typeof i?void 0:ce(i)),new $y(f,s||Kh(),c||null,d)}let es=(()=>{class i{static create(a,c){if(Array.isArray(a))return dw({name:""},c,a,"");{const d=a.name??"";return dw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=yi,i.NULL=new Z0,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>Rn(sd)}),i.__NG_ELEMENT_ID__=-1,i})();function Au(i,s=Ye.Default){const a=Ae();return null===a?Rn(i,s):bo(er(),a,Y(i),s)}function yw(){throw new Error("invalid")}function Sa(i,s){return i<<17|s<<2}function ws(i){return i>>17&32767}function Ky(i){return 2|i}function Lo(i){return(131068&i)>>2}function cd(i,s){return-131069&i|s<<2}function rf(i){return 1|i}function Mw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],f=a[c+1];if(-1!==f){const y=i.data[f];pc(d),y.contentQueries(2,s[f],f)}}}function Sg(i,s,a,c,d,f,y,w,E,T,R){const F=s.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==R||i&&1024&i[2])&&(F[2]|=1024),Jo(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=E||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function vy(){return Gp++}(),F[21]=R,F[16]=2==s.type?i[16]:F,F}function xa(i,s,a,c,d){let f=i.data[s];if(null===f)f=function lf(i,s,a,c,d){const f=po(),y=Qa(),E=i.data[s]=function Uc(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==f&&(y?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,d),function Ol(){return St.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function Ya(){const i=St.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Lr(f,!0),f}function xu(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function xg(i,s,a){yo(s);try{const c=i.viewQuery;null!==c&&Fg(1,c,a);const d=i.template;null!==d&&dd(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Mw(i,s),i.staticViewQueries&&Fg(2,i.viewQuery,a);const f=i.components;null!==f&&function Rw(i,s){for(let a=0;a<s.length;a++)mf(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,ls()}}function Mg(i,s,a,c){const d=s[2];if(128!=(128&d)){yo(s);try{Jo(s),function ia(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&dd(i,s,a,2,c);const y=3==(3&d);if(y){const T=i.preOrderCheckHooks;null!==T&&vo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&_o(s,T,0,null),Ul(s,0)}if(function gf(i){for(let s=Ea(i);null!==s;s=Po(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],f=d[3];0==(512&d[2])&&Un(f,1),d[2]|=512}}}(s),function HD(i){for(let s=Ea(i);null!==s;s=Po(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];cs(c)&&Mg(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&Mw(i,s),y){const T=i.contentCheckHooks;null!==T&&vo(s,T)}else{const T=i.contentHooks;null!==T&&_o(s,T,1),Ul(s,1)}!function rv(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Ki(~d);else{const f=d,y=a[++c],w=a[++c];Pl(y,f),w(2,s[f])}}}finally{Ki(-1)}}(i,s);const w=i.components;null!==w&&function iv(i,s){for(let a=0;a<s.length;a++)Lw(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&Fg(2,E,c),y){const T=i.viewCheckHooks;null!==T&&vo(s,T)}else{const T=i.viewHooks;null!==T&&_o(s,T,2),Ul(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Un(s[3],-1))}finally{ls()}}}function dd(i,s,a,c,d){const f=Pn(),y=2&c;try{Ki(-1),y&&s.length>22&&qy(i,s,22,!1),a(c,d)}finally{Ki(f)}}function Rg(i,s,a){!Ps()||(function Pw(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Qi(a,s),m(c,s);const y=a.initialInputs;for(let w=d;w<f;w++){const E=i.data[w],T=jr(E);T&&$D(s,a,E);const R=Ti(s,i,w,a);m(R,s),null!==y&&pv(0,w-d,R,E,0,y),T&&(tn(a.index,s)[8]=R)}}(i,s,a,gr(a,s)),128==(128&a.flags)&&function kw(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function gh(){return St.lFrame.currentDirectiveIndex}();try{Ki(f);for(let w=c;w<d;w++){const E=i.data[w],T=s[w];mo(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&fd(E,T)}}finally{Ki(-1),mo(y)}}(i,s,a))}function Ng(i,s,a=gr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function df(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ov(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function ov(i,s,a,c,d,f,y,w,E,T){const R=22+c,F=R+d,Z=function VD(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Lt);return a}(R,F),ee="function"==typeof T?T():T;return Z[1]={type:i,blueprint:Z,template:a,queries:null,viewQuery:w,declTNode:s,data:Z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:ee,incompleteFirstPass:!1}}function Nw(i,s,a,c){const d=Mu(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Uo(i).push(c,d.length-1))}function av(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,d):a[c]=[s,d]}return a}function ff(i,s){const c=s.directiveEnd,d=i.data,f=s.attrs,y=[];let w=null,E=null;for(let T=s.directiveStart;T<c;T++){const R=d[T],F=R.inputs,Z=null===f||sw(s)?null:Fw(F,f);y.push(Z),w=av(F,T,w),E=av(R.outputs,T,E)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=E}function Qr(i,s,a,c,d,f,y,w){const E=gr(s,a);let R,T=s.inputs;!w&&null!=T&&(R=T[c])?(Lg(i,a,R,c,d),sc(s)&&uv(a,s.index)):3&s.type&&(c=function Ow(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(E,c,d))}function uv(i,s){const a=tn(s,i);16&a[2]||(a[2]|=32)}function hd(i,s,a,c){let d=!1;if(Ps()){const f=function dv(i,s,a){const c=i.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];Xh(a,y.selectors,!1)&&(d||(d=[]),Ls(Qi(a,s),i,y.type),jr(y)?(Og(i,a),d.unshift(y)):d.push(y))}return d}(i,s,a),y=null===c?null:{"":-1};if(null!==f){d=!0,pd(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const F=f[R];F.providersResolver&&F.providersResolver(F)}let w=!1,E=!1,T=xu(i,s,f.length,null);for(let R=0;R<f.length;R++){const F=f[R];a.mergedAttrs=la(a.mergedAttrs,F.hostAttrs),fv(i,a,s,T,F),Pg(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const Z=F.type.prototype;!w&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&(Z.ngOnChanges||Z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}ff(i,a)}y&&function hv(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new be(-301,!1);c.push(s[d],f)}}}(a,c,y)}return a.mergedAttrs=la(a.mergedAttrs,a.attrs),d}function cv(i,s,a,c,d,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~s.index;(function lv(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(c,d,y)}}function fd(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Og(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Pg(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;jr(s)&&(a[""]=i)}}function pd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function fv(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=_r(d.type)),y=new ai(f,jr(d),Au);i.blueprint[c]=y,a[c]=y,cv(i,s,0,c,xu(i,a,d.hostVars,Lt),d)}function $D(i,s,a){const c=gr(s,i),d=df(a),f=i[10],y=yd(i,Sg(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=y}function Is(i,s,a,c,d,f){const y=gr(i,s);!function gd(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const w=null==y?ve(f):y(f,c||"",d);i.setAttribute(s,d,w,a)}}(s[11],y,f,i.value,a,c,d)}function pv(i,s,a,c,d,f){const y=f[s];if(null!==y){const w=c.setInput;for(let E=0;E<y.length;){const T=y[E++],R=y[E++],F=y[E++];null!==w?c.setInput(a,F,T,R):a[R]=F}}}function Fw(i,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return a}function gv(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Lw(i,s){const a=tn(s,i);if(cs(a)){const c=a[1];48&a[2]?Mg(c,a,c.template,a[8]):a[5]>0&&md(a)}}function md(i){for(let c=Ea(i);null!==c;c=Po(c))for(let d=10;d<c.length;d++){const f=c[d];if(cs(f))if(512&f[2]){const y=f[1];Mg(y,f,y.template,f[8])}else f[5]>0&&md(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=tn(a[c],i);cs(d)&&d[5]>0&&md(d)}}function mf(i,s){const a=tn(s,i),c=a[1];(function Bc(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),xg(c,a,a[8])}function yd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function mv(i){for(;i;){i[2]|=32;const s=Ia(i);if(oc(i)&&!s)return i;i=s}return null}function kg(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{Mg(i,s,i.template,a)}catch(y){throw c&&vf(s,y),y}finally{d.end&&d.end()}}function Fg(i,s,a){pc(0),s(i,a)}function Mu(i){return i[7]||(i[7]=[])}function Uo(i){return i.cleanup||(i.cleanup=[])}function vf(i,s){const a=i[9],c=a?a.get(_s,null):null;c&&c.handleError(s)}function Lg(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],E=s[y],T=i.data[y];null!==T.setInput?T.setInput(E,d,c,w):E[w]=d}}function $c(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?d=ge(d,w):2==f&&(c=ge(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Ru(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Ln(f)),ri(f))for(let w=10;w<f.length;w++){const E=f[w],T=E[1].firstChild;null!==T&&Ru(E[1],E,T,c)}const y=a.type;if(8&y)Ru(i,s,a.child,c);else if(32&y){const w=Mc(a,s);let E;for(;E=w();)c.push(E)}else if(16&y){const w=Sy(s,a);if(Array.isArray(w))c.push(...w);else{const E=Ia(s[16]);Ru(E[1],E,w,c,!0)}}a=d?a.projectionNext:a.next}return c}class Ma{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ru(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ri(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Iy(s,c),Tr(a,c))}this._attachedToViewContainer=!1}R0(this._lView[1],this._lView)}onDestroy(s){Nw(this._lView[1],this._lView,null,s)}markForCheck(){mv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){kg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function x0(i,s){Oc(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=s}}class qD extends Ma{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;kg(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Vg extends Eu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=M(s);return new _f(a,this.ngModule)}}function Vw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class zD{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const d=this.injector.get(s,hg,c);return d!==hg||a===hg?d:this.parentInjector.get(s,a,c)}}class _f extends iD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function ED(i){return i.map(ID).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Vw(this.componentDef.inputs)}get outputs(){return Vw(this.componentDef.outputs)}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Iu?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new zD(s,f):s,w=y.get(Yh,null);if(null===w)throw new be(407,!1);const E=y.get(lD,null),T=w.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function UD(i,s,a){return i.selectRootElement(s,a===ht.ShadowDom)}(T,c,this.componentDef.encapsulation):Lh(T,R,function ZD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),Z=this.componentDef.onPush?288:272,ee=ov(0,null,null,1,0,null,null,null,null,null),Ie=Sg(null,ee,null,Z,null,null,w,T,E,y,null);let $e,Ze;yo(Ie);try{const at=function Bw(i,s,a,c,d,f){const y=a[1];a[22]=i;const E=xa(y,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&($c(E,T,!0),null!==i&&(Yi(d,i,T),null!==E.classes&&tg(d,i,E.classes),null!==E.styles&&eg(d,i,E.styles)));const R=c.createRenderer(i,s),F=Sg(a,df(s),null,s.onPush?32:16,a[22],E,c,R,f||null,null,null);return y.firstCreatePass&&(Ls(Qi(E,a),y,s.type),Og(y,E),pd(E,a.length,1)),yd(a,F),a[22]=F}(F,this.componentDef,Ie,w,T);if(F)if(c)Yi(T,F,["ng-version",rw.full]);else{const{attrs:It,classes:xe}=function bD(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!Ks(d))break;d=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);It&&Yi(T,F,It),xe&&xe.length>0&&tg(T,F,xe.join(" "))}if(Ze=lo(ee,22),void 0!==a){const It=Ze.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const At=a[xe];It.push(null!=At?Array.from(At):null)}}$e=function vd(i,s,a,c){const d=a[1],f=function pf(i,s,a){const c=er();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),fv(i,c,s,xu(i,s,1,null),a),ff(i,c));const d=Ti(s,i,c.directiveStart,c);m(d,s);const f=gr(c,s);return f&&m(f,s),d}(d,a,s);if(i[8]=a[8]=f,null!==c)for(const w of c)w(f,s);if(s.contentQueries){const w=er();s.contentQueries(1,f,w.directiveStart)}const y=er();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ki(y.index),cv(a[1],y,0,y.directiveStart,y.directiveEnd,s),fd(s,f)),f}(at,this.componentDef,Ie,[KD]),xg(ee,Ie,null)}finally{ls()}return new Uw(this.componentType,$e,bu(Ze,Ie),Ie,Ze)}}class Uw extends class X0{}{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new qD(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;Lg(f[1],f,d,s,a),uv(f,this._tNode.index)}}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function KD(){const i=er();Ja(Ae()[1],i)}function Ug(i){let s=function $w(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(jr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new be(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Bg(i.inputs),y.declaredInputs=Bg(i.declaredInputs),y.outputs=Bg(i.outputs);const w=d.hostBindings;w&&vv(i,w);const E=d.viewQuery,T=d.contentQueries;if(E&&jw(i,E),T&&yv(i,T),he(i.inputs,d.inputs),he(i.declaredInputs,d.declaredInputs),he(i.outputs,d.outputs),jr(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===Ug&&(a=!1)}}s=Object.getPrototypeOf(s)}!function YD(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=la(d.hostAttrs,a=la(a,d.hostAttrs))}}(c)}function Bg(i){return i===Dr?{}:i===bt?[]:i}function jw(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function yv(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function vv(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}let $g=null;function Hc(){if(!$g){const i=Ct.Symbol;if(i&&i.iterator)$g=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&($g=c)}}}return $g}function Nu(i){return!!Ef(i)&&(Array.isArray(i)||!(i instanceof Map)&&Hc()in i)}function Ef(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function li(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function wv(i,s,a,c){const d=Ae();return li(d,sa(),s)&&(qt(),Is(Mn(),d,i,s,a,c)),wv}function Gc(i,s,a,c){return li(i,sa(),a)?s+ve(a)+c:Lt}function Dv(i,s,a,c,d,f,y,w){const E=Ae(),T=qt(),R=i+22,F=T.firstCreatePass?function zw(i,s,a,c,d,f,y,w,E){const T=s.consts,R=xa(s,i,4,y||null,oi(T,w));hd(s,a,R,oi(T,E)),Ja(s,R);const F=R.tViews=ov(2,R,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),F.queries=s.queries.embeddedTView(R)),R}(R,T,E,s,a,c,d,f,y):T.data[R];Lr(F,!1);const Z=E[11].createComment("");Jp(T,E,Z,F),m(Z,E),yd(E,E[R]=gv(Z,E,Z,F)),Ko(F)&&Rg(T,E,F),null!=y&&Ng(E,F,w)}function qg(i,s,a){const c=Ae();return li(c,sa(),s)&&Qr(qt(),Mn(),c,i,s,c[11],a,!1),qg}function Id(i,s,a,c,d){const y=d?"class":"style";Lg(i,a,s.inputs[y],y,c)}function Af(i,s,a,c){const d=Ae(),f=qt(),y=22+i,w=d[11],E=d[y]=Lh(w,s,function vc(){return St.lFrame.currentNamespace}()),T=f.firstCreatePass?function Ww(i,s,a,c,d,f,y){const w=s.consts,T=xa(s,i,2,d,oi(w,f));return hd(s,a,T,oi(w,y)),null!==T.attrs&&$c(T,T.attrs,!1),null!==T.mergedAttrs&&$c(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,f,d,0,s,a,c):f.data[y];Lr(T,!0);const R=T.mergedAttrs;null!==R&&Yi(w,E,R);const F=T.classes;null!==F&&tg(w,E,F);const Z=T.styles;return null!==Z&&eg(w,E,Z),64!=(64&T.flags)&&Jp(f,d,E,T),0===function ea(){return St.lFrame.elementDepthCount}()&&m(E,d),function Nl(){St.lFrame.elementDepthCount++}(),Ko(T)&&(Rg(f,d,T),function sv(i,s,a){if(ro(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,T,d)),null!==c&&Ng(d,T),Af}function Bo(){let i=er();Qa()?function go(){St.lFrame.isParent=!1}():(i=i.parent,Lr(i,!1));const s=i;!function ta(){St.lFrame.elementDepthCount--}();const a=qt();return a.firstCreatePass&&(Ja(a,i),ro(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function eu(i){return 0!=(16&i.flags)}(s)&&Id(a,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function tu(i){return 0!=(32&i.flags)}(s)&&Id(a,s,Ae(),s.stylesWithoutHost,!1),Bo}function Zg(i,s,a,c){return Af(i,s,a,c),Bo(),Zg}function Pi(){return Ae()}function Kg(i){return!!i&&"function"==typeof i.then}function Av(i){return!!i&&"function"==typeof i.subscribe}const Yc=Av;function Sv(i,s,a,c){const d=Ae(),f=qt(),y=er();return function Qw(i,s,a,c,d,f,y,w){const E=Ko(c),R=i.firstCreatePass&&Uo(i),F=s[8],Z=Mu(s);let ee=!0;if(3&c.type||w){const Ze=gr(c,s),at=w?w(Ze):Ze,It=Z.length,xe=w?ln=>w(Ln(ln[c.index])):c.index;let At=null;if(!w&&E&&(At=function xv(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const w=s[7],E=d[f+2];return w.length>E?w[E]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=f,At.__ngLastListenerFn__=f,ee=!1;else{f=Mv(c,s,F,f,!1);const ln=a.listen(at,d,f);Z.push(f,ln),R&&R.push(d,xe,It,It+1)}}else f=Mv(c,s,F,f,!1);const Ie=c.outputs;let $e;if(ee&&null!==Ie&&($e=Ie[d])){const Ze=$e.length;if(Ze)for(let at=0;at<Ze;at+=2){const Yn=s[$e[at]][$e[at+1]].subscribe(f),qa=Z.length;Z.push(f,Yn),R&&R.push(d,c.index,qa,-(qa+1))}}}(f,d,d[11],y,i,s,0,c),Sv}function Jw(i,s,a,c){try{return!1!==a(c)}catch(d){return vf(i,d),!1}}function Mv(i,s,a,c,d){return function f(y){if(y===Function)return c;mv(2&i.flags?tn(i.index,s):s);let E=Jw(s,0,c,y),T=f.__ngNextListenerFn__;for(;T;)E=Jw(s,0,T,y)&&E,T=T.__ngNextListenerFn__;return d&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function Xw(i=1){return function ds(i){return(St.lFrame.contextLView=function Ll(i,s){for(;i>0;)s=s[15],i--;return s}(i,St.lFrame.contextLView))[8]}(i)}function Oa(i,s,a,c,d){const f=Ae(),y=Gc(f,s,a,c);return y!==Lt&&Qr(qt(),Mn(),f,i,y,f[11],d,!1),Oa}function de(i,s,a,c,d){const f=i[a+1],y=null===s;let w=c?ws(f):Lo(f),E=!1;for(;0!==w&&(!1===E||y);){const R=i[w+1];Pe(i[w],s)&&(E=!0,i[w+1]=c?rf(R):Ky(R)),w=c?ws(R):Lo(R)}E&&(i[a+1]=c?Ky(f):rf(f))}function Pe(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&xi(i,s)>=0}function vt(i,s){return function je(i,s,a,c){const d=Ae(),f=qt(),y=function Wi(i){const s=St.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Pu(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[Pn()],y=function Xg(i,s){return s>=i.expandoStartIndex}(i,a);(function Mf(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!y&&(s=!1),s=function sC(i,s,a,c){const d=function fc(i){const s=St.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=bd(a=tm(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=tm(d,i,s,a,c),null===f){let E=function em(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Lo(c))return i[ws(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=tm(null,i,s,E[1],c),E=bd(E,s.attrs,c),function oC(i,s,a,c){i[ws(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function xf(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=bd(c,i[f].hostAttrs,a);return bd(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function JD(i,s,a,c,d,f){let y=f?s.classBindings:s.styleBindings,w=ws(y),E=Lo(y);i[c]=a;let R,T=!1;if(Array.isArray(a)){const F=a;R=F[1],(null===R||xi(F,R)>0)&&(T=!0)}else R=a;if(d)if(0!==E){const Z=ws(i[w+1]);i[c+1]=Sa(Z,w),0!==Z&&(i[Z+1]=cd(i[Z+1],c)),i[w+1]=function _w(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Sa(w,0),0!==w&&(i[w+1]=cd(i[w+1],c)),w=c;else i[c+1]=Sa(E,0),0===w?w=c:i[E+1]=cd(i[E+1],c),E=c;T&&(i[c+1]=Ky(i[c+1])),de(i,R,c,!0),de(i,R,c,!1),function We(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&xi(f,s)>=0&&(a[c+1]=rf(a[c+1]))}(s,R,i,c,f),y=Sa(w,E),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,c)}}(f,i,y,c),s!==Lt&&li(d,y,s)&&function Pv(i,s,a,c,d,f,y,w){if(!(3&s.type))return;const E=i.data,T=E[w+1];Dd(function bg(i){return 1==(1&i)}(T)?ka(E,s,a,d,Lo(T),y):void 0)||(Dd(f)||function Eg(i){return 2==(2&i)}(T)&&(f=ka(E,null,a,d,w,y)),function Ab(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Ri.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Ri.Important),i.setStyle(a,c,d,f))}}(c,y,gi(Pn(),a),d,f))}(f,f.data[Pn()],d,d[11],i,d[y+1]=function ue(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Da(i)))),i}(s,a),c,y)}(i,s,null,!0),vt}function tm(i,s,a,c,d){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=s[w],c=bd(c,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function bd(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),st(i,y,!!a||s[++f]))}return void 0===i?null:i}function ka(i,s,a,c,d,f){const y=null===s;let w;for(;d>0;){const E=i[d],T=Array.isArray(E),R=T?E[1]:E,F=null===R;let Z=a[d+1];Z===Lt&&(Z=F?bt:void 0);let ee=F?Tc(Z,c):R===c?Z:void 0;if(T&&!Dd(ee)&&(ee=Tc(E,c)),Dd(ee)&&(w=ee,y))return w;const Ie=i[d+1];d=y?ws(Ie):Lo(Ie)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(w=Tc(E,c))}return w}function Dd(i){return void 0!==i}function bs(i,s=""){const a=Ae(),c=qt(),d=i+22,f=c.firstCreatePass?xa(c,d,1,s,null):c.data[d],y=a[d]=function Yp(i,s){return i.createText(s)}(a[11],s);Jp(c,a,y,f),Lr(f,!1)}function kv(i){return ku("",i,""),kv}function ku(i,s,a){const c=Ae(),d=Gc(c,i,s,a);return d!==Lt&&function mn(i,s,a){const c=gi(s,i);!function wy(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Pn(),d),ku}const ju=void 0;var om=["en",[["a","p"],["AM","PM"],ju],[["AM","PM"],ju,ju],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ju,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ju,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ju,"{1} 'at' {0}",ju],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let $o={};function Uv(i){const s=function fI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=$v(s);if(a)return a;const c=s.split("-")[0];if(a=$v(c),a)return a;if("en"===c)return om;throw new be(701,!1)}function Bv(i){return Uv(i)[Et.PluralCase]}function $v(i){return i in $o||($o[i]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[i]),$o[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const an="en-US";let jv=an;function fr(i,s,a,c,d){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)fr(i[f],s,a,c,d);else{const f=qt(),y=Ae();let w=Fc(i)?i:Y(i.provide),E=Q0(i);const T=er(),R=1048575&T.providerIndexes,F=T.directiveStart,Z=T.providerIndexes>>20;if(Fc(i)||!i.multi){const ee=new ai(E,d,Au),Ie=pm(w,s,d?R:R+Z,F);-1===Ie?(Ls(Qi(T,y),f,w),rn(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ee),y.push(ee)):(a[Ie]=ee,y[Ie]=ee)}else{const ee=pm(w,s,R+Z,F),Ie=pm(w,s,R,R+Z),$e=ee>=0&&a[ee],Ze=Ie>=0&&a[Ie];if(d&&!Ze||!d&&!$e){Ls(Qi(T,y),f,w);const at=function kI(i,s,a,c,d){const f=new ai(i,a,Au);return f.multi=[],f.index=s,f.componentProviders=0,t_(f,d,c&&!a),f}(d?DC:Zu,a.length,d,c,E);!d&&Ze&&(a[Ie].providerFactory=at),rn(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(at),y.push(at)}else rn(f,i,ee>-1?ee:Ie,t_(a[d?Ie:ee],E,!d&&c));!d&&c&&Ze&&a[Ie].componentProviders++}}}function rn(i,s,a,c){const d=Fc(s),f=function Jb(i){return!!i.useClass}(s);if(d||f){const E=(f?Y(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const R=T.indexOf(a);-1===R?T.push(a,[c,E]):T[R+1].push(c,E)}else T.push(a,E)}}}function t_(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function pm(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function Zu(i,s,a,c){return hi(this.multi,[])}function DC(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ti(a,a[1],this.providerFactory.index,c);f=w.slice(0,y),hi(d,f);for(let E=y;E<w.length;E++)f.push(w[E])}else f=[],hi(d,f);return f}function hi(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Fd(i,s=[]){return a=>{a.providersResolver=(c,d)=>function bC(i,s,a){const c=qt();if(c.firstCreatePass){const d=jr(i);fr(a,c.data,c.blueprint,d,!0),fr(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class ul{}class Js{}function FI(i,s){return new LI(i,s??null)}class LI extends ul{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vg(this);const c=tt(s);this._bootstrapComponents=ko(c.bootstrap),this._r3Injector=we(s,a,[{provide:ul,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver}],ce(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class n_ extends Js{constructor(s){super(),this.moduleType=s}create(s){return new LI(this.moduleType,s)}}class Ht extends ul{constructor(s,a,c){super(),this.componentFactoryResolver=new Vg(this),this.instance=null;const d=new $y([...s,{provide:ul,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver}],a||Kh(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function r_(i,s,a=null){return new Ht(i,s,a).injector}let mm=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=z0(0,a.type),d=c.length>0?r_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Jt({token:i,providedIn:"environment",factory:()=>new i(Rn(Iu))}),i})();function Ld(i){i.getStandaloneInjector=s=>s.get(mm).getOrCreateStandaloneInjector(i)}function Xr(i){return s=>{setTimeout(i,void 0,s)}}const Go=class QI extends l.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),f=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(f=Xr(f),d&&(d=Xr(d)),y&&(y=Xr(y)));const w=super.subscribe({next:d,error:f,complete:y});return s instanceof B.w0&&s.add(w),w}};function JI(){return this._results[Hc()]()}class Ds{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Hc(),c=Ds.prototype;c[a]||(c[a]=JI)}get changes(){return this._changes||(this._changes=new Go)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=An(s);(this._changesDetected=!function Si(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $d=(()=>{class i{}return i.__NG_ELEMENT_ID__=NC,i})();const _m=$d,XI=class extends _m{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=Sg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(c)),xg(c,d,s),new Ma(d)}};function NC(){return wm(er(),Ae())}function wm(i,s){return 4&i.type?new XI(s,i,bu(i,s)):null}let Im=(()=>{class i{}return i.__NG_ELEMENT_ID__=OC,i})();function OC(){return nE(er(),Ae())}const PC=Im,eE=class extends PC{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return bu(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){const s=ha(this._hostTNode,this._hostLView);if(_h(s)){const a=hs(s,this._hostLView),c=nr(s);return new Co(a[1].data[c+8],a)}return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=tE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const y=s.createEmbeddedView(a||{},f);return this.insert(y,d),y}createComponent(s,a,c,d,f){const y=s&&!function Ji(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const F=a||{};w=F.index,c=F.injector,d=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const E=y?s:new _f(M(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const Z=(y?T:this.parentInjector).get(Iu,null);Z&&(f=Z)}const R=E.create(T,d,void 0,f);return this.insert(R.hostView,w),R}insert(s,a){const c=s._lView,d=c[1];if(function dc(i){return ri(i[3])}(c)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const F=c[3],Z=new eE(F,F[6],F[3]);Z.detach(Z.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function Ib(i,s,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=s),c<f-10?(s[4]=a[d],Us(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function Eb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(d,c,y,f);const w=Vh(f,y),E=c[11],T=ms(E,y[7]);return null!==T&&function Qp(i,s,a,c,d,f){c[0]=d,c[6]=s,Oc(i,c,a,1,d,f)}(d,y[6],E,c,T,w),s.attachToViewContainerRef(),Us(d_(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=tE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Iy(this._lContainer,a);c&&(Tr(d_(this._lContainer),a),R0(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Iy(this._lContainer,a);return c&&null!=Tr(d_(this._lContainer),a)?new Ma(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function tE(i){return i[8]}function d_(i){return i[8]||(i[8]=[])}function nE(i,s){let a;const c=s[i.index];if(ri(c))a=c;else{let d;if(8&i.type)d=Ln(c);else{const f=s[11];d=f.createComment("");const y=gr(i,s);vu(f,ms(f,y),d,function td(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=a=gv(c,s,d,i),yd(s,a)}return new eE(a,i,s)}class h_{constructor(s){this.queryList=s,this.matches=null}clone(){return new h_(this.queryList)}setDirty(){this.queryList.setDirty()}}class f_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new f_(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==zu(s,a).matches&&this.queries[a].setDirty()}}class rE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Em{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Em(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class p_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new p_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,iE(a,f)),this.matchTNodeWithReadOption(s,a,pa(a,s,f,!1,!1))}else c===$d?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,pa(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Lc||d===Im||d===$d&&4&a.type)this.addMatch(a.index,-2);else{const f=pa(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function iE(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function LC(i,s,a,c){return-1===a?function sE(i,s){return 11&i.type?bu(i,s):4&i.type?wm(i,s):null}(s,i):-2===a?function g_(i,s,a){return a===Lc?bu(s,i):a===$d?wm(s,i):a===Im?nE(s,i):void 0}(i,s,c):Ti(i,i[1],a,s)}function Rr(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const f=i.data,y=a.matches,w=[];for(let E=0;E<y.length;E+=2){const T=y[E];w.push(T<0?null:LC(s,f[T],y[E+1],a.metadata.read))}d.matches=w}return d.matches}function qf(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=Rr(i,s,d,a);for(let w=0;w<f.length;w+=2){const E=f[w];if(E>0)c.push(y[w/2]);else{const T=f[w+1],R=s[-E];for(let F=10;F<R.length;F++){const Z=R[F];Z[17]===Z[3]&&qf(Z[1],Z,T,c)}if(null!==R[9]){const F=R[9];for(let Z=0;Z<F.length;Z++){const ee=F[Z];qf(ee[1],ee,T,c)}}}}}return c}function bm(i){const s=Ae(),a=qt(),c=oa();pc(c+1);const d=zu(a,c);if(i.dirty&&function lc(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?qf(a,s,c,[]):Rr(a,s,d,c);i.reset(f,aD),i.notifyOnChanges()}return!0}return!1}function Ba(i,s,a,c){const d=qt();if(d.firstCreatePass){const f=er();(function Zf(i,s,a){null===i.queries&&(i.queries=new Em),i.queries.track(new p_(s,a))})(d,new rE(s,a,c),f.index),function ll(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function v_(i,s,a){const c=new Ds(4==(4&a));Nw(i,s,c,c.destroy),null===s[19]&&(s[19]=new f_),s[19].queries.push(new h_(c))}(d,Ae(),a)}function y_(){return function VC(i,s){return i[19].queries[s].queryList}(Ae(),oa())}function zu(i,s){return i.queries.getByIndex(s)}function Kf(...i){}const M_=new Tn("Application Initializer");let Nm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Kf,this.reject=Kf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Kg(f))a.push(f);else if(Yc(f)){const y=new Promise((w,E)=>{f.subscribe({complete:w,error:E})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Rn(M_,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const R_=new Tn("AppId",{providedIn:"root",factory:function Yu(){return`${Pm()}${Pm()}${Pm()}`}});function Pm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const N_=new Tn("Platform Initializer"),WC=new Tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),O_=new Tn("appBootstrapListener");let P_=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const km=new Tn("LocaleId",{providedIn:"root",factory:()=>ui(km,Ye.Optional|Ye.SkipSelf)||function Ur(){return typeof $localize<"u"&&$localize.locale||an}()}),KC=new Tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Fm=(()=>{class i{compileModuleSync(a){return new n_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=ko(tt(a).declarations).reduce((y,w)=>{const E=M(w);return E&&y.push(new _f(E)),y},[]);return new QC(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const L_=(()=>Promise.resolve(0))();function Vm(i){typeof Zone>"u"?L_.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class rs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Go(!1),this.onMicrotaskEmpty=new Go(!1),this.onStable=new Go(!1),this.onError=new Go(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eT(){let i=Ct.requestAnimationFrame,s=Ct.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function fE(i){const s=()=>{!function tT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ct,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,V_(i),i.isCheckStableRunning=!0,Yf(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),V_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,w)=>{try{return U_(i),a.invokeTask(d,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),pE(i)}},onInvoke:(a,c,d,f,y,w,E)=>{try{return U_(i),a.invoke(d,f,y,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),pE(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,V_(i),Yf(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rs.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(rs.isInAngularZone())throw new be(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,hE,Kf,Kf);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const hE={};function Yf(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function V_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function U_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function pE(i){i._nesting--,Yf(i)}class zd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Go,this.onMicrotaskEmpty=new Go,this.onStable=new Go,this.onError=new Go}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const _l=new Tn(""),Um=new Tn("");let $m,Bm=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$m||(function gE(i){$m=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rs.assertNotInAngularZone(),Vm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Rn(rs),Rn(B_),Rn(Um))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),B_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return $m?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Qu=null;const jm=new Tn("AllowMultipleToken"),$_=new Tn("PlatformDestroyListeners");class Hm{constructor(s,a){this.name=s,this.token=a}}function Zm(i,s,a=[]){const c=`Platform: ${s}`,d=new Tn(c);return(f=[])=>{let y=H_();if(!y||y.injector.get(jm,!1)){const w=[...a,...f,{provide:d,useValue:!0}];i?i(w):function Qf(i){if(Qu&&!Qu.get(jm,!1))throw new be(400,!1);Qu=i;const s=i.get(wE);(function qm(i){const s=i.get(N_,null);s&&s.forEach(a=>a())})(i)}(function _E(i=[],s){return es.create({name:s,providers:[{provide:By,useValue:"platform"},{provide:$_,useValue:new Set([()=>Qu=null])},...i]})}(w,c))}return function vE(i){const s=H_();if(!s)throw new be(401,!1);return s}()}}function H_(){return Qu?.get(wE)??null}let wE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function G_(i,s){let a;return a="noop"===i?new zd:("zone.js"===i?void 0:i)||new rs(s),a}(c?.ngZone,function IE(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:rs,useValue:d}];return d.run(()=>{const y=es.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),E=w.injector.get(_s,null);if(!E)throw new be(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{E.handleError(R)}});w.onDestroy(()=>{Xf(this._modules,w),T.unsubscribe()})}),function Jf(i,s,a){try{const c=a();return Kg(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const T=w.injector.get(Nm);return T.runInitializers(),T.donePromise.then(()=>(function Hv(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&(jv=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(km,an)||an),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const d=Wd({},c);return function mE(i,s,a){const c=new n_(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Kd);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new be(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get($_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Rn(es))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Wd(i,s){return Array.isArray(s)?s.reduce(Wd,i):{...i,...s}}let Kd=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new O.y(w=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{rs.assertNotInAngularZone(),Vm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ne.T)(f,y.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof iD;if(!this._injector.get(Nm).done)throw!d&&Oe(a),new be(405,false);let y;y=d?a:this._injector.get(Eu).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function j_(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ul),T=y.create(es.NULL,[],c||y.selector,w),R=T.location.nativeElement,F=T.injector.get(_l,null);return F?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),Xf(this.components,T),F?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Xf(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(O_,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Xf(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new be(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Rn(rs),Rn(Iu),Rn(_s))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Xf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let bE=!0,DE=!1;function q_(){return DE=!0,bE}function sT(){if(DE)throw new Error("Cannot enable prod mode after platform setup.");bE=!1}let Yd=(()=>{class i{}return i.__NG_ELEMENT_ID__=Z_,i})();function Z_(i){return function Km(i,s,a){if(sc(i)&&!a){const c=tn(i.index,s);return new Ma(c,c)}return 47&i.type?new Ma(s[16],s):null}(er(),Ae(),16==(16&i))}class ME{constructor(){}supports(s){return Nu(s)}create(s){return new lT(s)}}const K_=(i,s)=>s;class lT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||K_}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<RE(c,d,f)?a:c,w=RE(y,d,f),E=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const T=w-d,R=E-d;if(T!=R){for(let Z=0;Z<T;Z++){const ee=Z<f.length?f[Z]:f[Z]=0,Ie=ee+Z;R<=Ie&&Ie<T&&(f[Z]=ee+1)}f[y.previousIndex]=R-T}}w!==E&&s(y,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Nu(s))throw new be(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else d=0,function jg(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Hc()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new Y_(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Jm),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Jm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Y_{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Jm{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new dT,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RE(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class Xm{constructor(){}supports(s){return s instanceof Map||Ef(s)}create(){return new NE}}class NE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ef(s)))throw new be(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new Q_(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Q_{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ey(){return new np([new ME])}let np=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ey()),deps:[[i,new ot,new _e]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new be(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:ey}),i})();function Ga(){return new ip([new Xm])}let ip=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Ga()),deps:[[i,new ot,new _e]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new be(901,!1)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Ga}),i})();const fT=Zm(null,"core",[]);let pT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Rn(Kd))},i.\u0275mod=Kt({type:i}),i.\u0275inj=Rt({}),i})();function J_(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ct,Te,k)=>{k.d(Te,{Z:()=>be});var l=k(2090),B=k(4859),O=k(9681),ne=k(1877);class oe{constructor(ve,fe){this._delegate=ve,this.firebase=fe,(0,O._addComponent)(ve,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ve,fe=O._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(ve);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Qe=Ke.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:fe})}_removeServiceInstance(ve,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(fe)}_addComponent(ve){(0,O._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,O._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ge(){const et=function ce(et){const ve={},fe={__esModule:!0,initializeApp:function Ne(te,ae={}){const me=O.initializeApp(te,ae);if((0,l.r3)(ve,me.name))return ve[me.name];const K=new et(me,fe);return ve[me.name]=K,K},app:Ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(te){const ae=te.name,me=ae.replace("-compat","");if(O._registerComponent(te)&&"PUBLIC"===te.type){const K=(Q=Ke())=>{if("function"!=typeof Q[me])throw he.create("invalid-app-argument",{appName:ae});return Q[me]()};void 0!==te.serviceProps&&(0,l.ZB)(K,te.serviceProps),fe[me]=K,et.prototype[me]=function(...Q){return this._getService.bind(this,ae).apply(this,te.multipleInstances?Q:[])}}return"PUBLIC"===te.type?fe[me]:null},removeApp:function Qe(te){delete ve[te]},useAsService:function Ge(te,ae){return"serverAuth"===ae?null:ae},modularAPIs:O}};function Ke(te){if(!(0,l.r3)(ve,te=te||O._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:te});return ve[te]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function Se(){return Object.keys(ve).map(te=>ve[te])}}),Ke.App=et,fe}(oe);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function ve(fe){(0,l.ZB)(et,fe)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),et}(),j=new ne.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=G;!function Me(et){(0,O.registerVersion)("@firebase/app-compat","0.2.0",et)}()},9681:(ct,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>$i,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>Jt,_apps:()=>dn,_clearComponents:()=>Ei,_components:()=>En,_getProvider:()=>Rt,_registerComponent:()=>$t,_removeServiceInstance:()=>br,deleteApp:()=>ji,getApp:()=>qn,getApps:()=>fi,initializeApp:()=>kr,onLog:()=>Zn,registerVersion:()=>Qn,setLogLevel:()=>wn});var l=k(5861),B=k(4859),O=k(1877),ne=k(2090),oe=k(8766);class pe{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function he(Je){return"VERSION"===Je.getComponent()?.type}(Xe)){const _t=Xe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Xe=>Xe).join(" ")}}const ce="@firebase/app",G=new O.Yd("@firebase/app"),Ft="[DEFAULT]",qe={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,En=new Map;function Qt(Je,De){try{Je.container.addComponent(De)}catch(Xe){G.debug(`Component ${De.name} failed to register with FirebaseApp ${Je.name}`,Xe)}}function Jt(Je,De){Je.container.addOrOverwriteComponent(De)}function $t(Je){const De=Je.name;if(En.has(De))return G.debug(`There were multiple attempts to register component ${De}.`),!1;En.set(De,Je);for(const Xe of dn.values())Qt(Xe,Je);return!0}function Rt(Je,De){const Xe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Je.container.getProvider(De)}function br(Je,De,Xe=Ft){Rt(Je,De).clearInstance(Xe)}function Ei(){En.clear()}const Fn=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bi{constructor(De,Xe,_t){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}const $i="9.15.0";function kr(Je,De={}){let Xe=Je;"object"!=typeof De&&(De={name:De});const _t=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},De),Dt=_t.name;if("string"!=typeof Dt||!Dt)throw Fn.create("bad-app-name",{appName:String(Dt)});if(Xe||(Xe=(0,ne.aH)()),!Xe)throw Fn.create("no-options");const Kt=dn.get(Dt);if(Kt){if((0,ne.vZ)(Xe,Kt.options)&&(0,ne.vZ)(_t,Kt.config))return Kt;throw Fn.create("duplicate-app",{appName:Dt})}const H=new B.H0(Dt);for(const z of En.values())H.addComponent(z);const $=new Bi(Xe,_t,H);return dn.set(Dt,$),$}function qn(Je=Ft){const De=dn.get(Je);if(!De&&Je===Ft)return kr();if(!De)throw Fn.create("no-app",{appName:Je});return De}function fi(){return Array.from(dn.values())}function ji(Je){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,l.Z)(function*(Je){const De=Je.name;dn.has(De)&&(dn.delete(De),yield Promise.all(Je.container.getProviders().map(Xe=>Xe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function Qn(Je,De,Xe){var _t;let Dt=null!==(_t=qe[Je])&&void 0!==_t?_t:Je;Xe&&(Dt+=`-${Xe}`);const Kt=Dt.match(/\s|\//),H=De.match(/\s|\//);if(Kt||H){const $=[`Unable to register library "${Dt}" with version "${De}":`];return Kt&&$.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Kt&&H&&$.push("and"),H&&$.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void G.warn($.join(" "))}$t(new B.wA(`${Dt}-version`,()=>({library:Dt,version:De}),"VERSION"))}function Zn(Je,De){if(null!==Je&&"function"!=typeof Je)throw Fn.create("invalid-log-argument");(0,O.Am)(Je,De)}function wn(Je){(0,O.Ub)(Je)}const bn="firebase-heartbeat-store";let Dn=null;function yn(){return Dn||(Dn=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(Je,De)=>{0===De&&Je.createObjectStore(bn)}}).catch(Je=>{throw Fn.create("idb-open",{originalErrorMessage:Je.message})})),Dn}function ht(){return(ht=(0,l.Z)(function*(Je){try{return(yield yn()).transaction(bn).objectStore(bn).get(Jn(Je))}catch(De){if(De instanceof ne.ZR)G.warn(De.message);else{const Xe=Fn.create("idb-get",{originalErrorMessage:De?.message});G.warn(Xe.message)}}})).apply(this,arguments)}function Ct(Je,De){return Br.apply(this,arguments)}function Br(){return(Br=(0,l.Z)(function*(Je,De){try{const _t=(yield yn()).transaction(bn,"readwrite");return yield _t.objectStore(bn).put(De,Jn(Je)),_t.done}catch(Xe){if(Xe instanceof ne.ZR)G.warn(Xe.message);else{const _t=Fn.create("idb-set",{originalErrorMessage:Xe?.message});G.warn(_t.message)}}})).apply(this,arguments)}function Jn(Je){return`${Je.name}!${Je.options.appId}`}class Fr{constructor(De){this.container=De,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new zt(Xe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var De=this;return(0,l.Z)(function*(){const _t=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=Mt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!De._heartbeatsCache.heartbeats.some(Kt=>Kt.date===Dt))return De._heartbeatsCache.heartbeats.push({date:Dt,agent:_t}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Kt=>{const H=new Date(Kt.date).valueOf();return Date.now()-H<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,l.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Xe=Mt(),{heartbeatsToSend:_t,unsentEntries:Dt}=function ti(Je,De=1024){const Xe=[];let _t=Je.slice();for(const Dt of Je){const Kt=Xe.find(H=>H.agent===Dt.agent);if(Kt){if(Kt.dates.push(Dt.date),ar(Xe)>De){Kt.dates.pop();break}}else if(Xe.push({agent:Dt.agent,dates:[Dt.date]}),ar(Xe)>De){Xe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:_t}}(De._heartbeatsCache.heartbeats),Kt=(0,ne.L)(JSON.stringify({version:2,heartbeats:_t}));return De._heartbeatsCache.lastSentHeartbeatDate=Xe,Dt.length>0?(De._heartbeatsCache.heartbeats=Dt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Kt})()}}function Mt(){return(new Date).toISOString().substring(0,10)}class zt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,l.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function dt(Je){return ht.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Xe=this;return(0,l.Z)(function*(){var _t;if(yield Xe._canUseIndexedDBPromise){const Kt=yield Xe.read();return Ct(Xe.app,{lastSentHeartbeatDate:null!==(_t=De.lastSentHeartbeatDate)&&void 0!==_t?_t:Kt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Xe=this;return(0,l.Z)(function*(){var _t;if(yield Xe._canUseIndexedDBPromise){const Kt=yield Xe.read();return Ct(Xe.app,{lastSentHeartbeatDate:null!==(_t=De.lastSentHeartbeatDate)&&void 0!==_t?_t:Kt.lastSentHeartbeatDate,heartbeats:[...Kt.heartbeats,...De.heartbeats]})}})()}}function ar(Je){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function xn(Je){$t(new B.wA("platform-logger",De=>new pe(De),"PRIVATE")),$t(new B.wA("heartbeat",De=>new Fr(De),"PRIVATE")),Qn(ce,"0.9.0",Je),Qn(ce,"0.9.0","esm2017"),Qn("fire-js","")}("")},4859:(ct,Te,k)=>{k.d(Te,{H0:()=>ce,wA:()=>O});var l=k(5861),B=k(2090);class O{constructor(G,j,Y){this.name=G,this.instanceFactory=j,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ne="[DEFAULT]";class oe{constructor(G,j){this.name=G,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const j=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(j)){const Y=new B.BH;if(this.instancesDeferred.set(j,Y),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:j});Ue&&Y.resolve(Ue)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(G){var j;const Y=this.normalizeInstanceIdentifier(G?.identifier),Ue=null!==(j=G?.optional)&&void 0!==j&&j;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Me){if(Ue)return null;throw Me}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function he(ge){return"EAGER"===ge.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[j,Y]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(j);try{const Me=this.getOrInitializeService({instanceIdentifier:Ue});Y.resolve(Me)}catch{}}}}clearInstance(G=ne){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,l.Z)(function*(){const j=Array.from(G.instances.values());yield Promise.all([...j.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...j.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ne){return this.instances.has(G)}getOptions(G=ne){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:j={}}=G,Y=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Y,options:j});for(const[Me,be]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Me)&&be.resolve(Ue);return Ue}onInit(G,j){var Y;const Ue=this.normalizeInstanceIdentifier(j),Me=null!==(Y=this.onInitCallbacks.get(Ue))&&void 0!==Y?Y:new Set;Me.add(G),this.onInitCallbacks.set(Ue,Me);const be=this.instances.get(Ue);return be&&G(be,Ue),()=>{Me.delete(G)}}invokeOnInitCallbacks(G,j){const Y=this.onInitCallbacks.get(j);if(Y)for(const Ue of Y)try{Ue(G,j)}catch{}}getOrInitializeService({instanceIdentifier:G,options:j={}}){let Y=this.instances.get(G);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=G,ge===ne?void 0:ge),options:j}),this.instances.set(G,Y),this.instancesOptions.set(G,j),this.invokeOnInitCallbacks(Y,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Y)}catch{}var ge;return Y||null}normalizeInstanceIdentifier(G=ne){return this.component?this.component.multipleInstances?G:ne:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const j=this.getProvider(G.name);if(j.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);j.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const j=new oe(G,this);return this.providers.set(G,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,Te,k)=>{k.d(Te,{Am:()=>ge,Ub:()=>ce,Yd:()=>he,in:()=>B});const l=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const O={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ne=B.INFO,oe={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},pe=(G,j,...Y)=>{if(j<G.logLevel)return;const Ue=(new Date).toISOString(),Me=oe[j];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Me](`[${Ue}]  ${G.name}:`,...Y)};class he{constructor(j){this.name=j,this._logLevel=ne,this._logHandler=pe,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in B))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...j),this._logHandler(this,B.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...j),this._logHandler(this,B.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,B.INFO,...j),this._logHandler(this,B.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,B.WARN,...j),this._logHandler(this,B.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...j),this._logHandler(this,B.ERROR,...j)}}function ce(G){l.forEach(j=>{j.setLogLevel(G)})}function ge(G,j){for(const Y of l){let Ue=null;j&&j.level&&(Ue=O[j.level]),Y.userLogHandler=null===G?null:(Me,be,...et)=>{const ve=et.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");be>=(Ue??Me.logLevel)&&G({level:B[be].toLowerCase(),message:ve,args:et,type:Me.name})}}}},259:(ct,Te,k)=>{k.d(Te,{C6:()=>l.getApps,KN:()=>l.registerVersion,Mq:()=>l.getApp,ZF:()=>l.initializeApp});var l=k(9681);(0,l.registerVersion)("firebase","9.15.0","app")},9260:(ct,Te,k)=>{k.d(Te,{Z:()=>l.Z});var l=k(3942);l.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(ct,Te,k)=>{k.r(Te);var l=k(5861),B=k(3942),O=k(552),ne=k(2090),he=(k(9681),k(1877),k(4859));function ce(){return window}function j(){return(j=(0,l.Z)(function*(V,M,L){var X;const{BuildInfo:Oe}=ce();(0,O.ap)(M.sessionId,"AuthEvent did not contain a session ID");const tt=yield fe(M.sessionId),ut={};return(0,O.aq)()?ut.ibi=Oe.packageName:(0,O.ar)()?ut.apn=Oe.packageName:(0,O.as)(V,"operation-not-supported-in-this-environment"),Oe.displayName&&(ut.appDisplayName=Oe.displayName),ut.sessionId=tt,(0,O.at)(V,L,M.type,void 0,null!==(X=M.eventId)&&void 0!==X?X:void 0,ut)})).apply(this,arguments)}function Ue(){return(Ue=(0,l.Z)(function*(V){const{BuildInfo:M}=ce(),L={};(0,O.aq)()?L.iosBundleId=M.packageName:(0,O.ar)()?L.androidPackageName=M.packageName:(0,O.as)(V,"operation-not-supported-in-this-environment"),yield(0,O.au)(V,L)})).apply(this,arguments)}function et(){return(et=(0,l.Z)(function*(V,M,L){const{cordova:X}=ce();let Oe=()=>{};try{yield new Promise((tt,ut)=>{let Ce=null;function ke(){var xt;tt();const fn=null===(xt=X.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof fn&&fn(),"function"==typeof L?.close&&L.close()}function Tt(){Ce||(Ce=window.setTimeout(()=>{ut((0,O.aw)(V,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Tt()}M.addPassiveListener(ke),document.addEventListener("resume",Tt,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",hn,!1),Oe=()=>{M.removePassiveListener(ke),document.removeEventListener("resume",Tt,!1),document.removeEventListener("visibilitychange",hn,!1),Ce&&window.clearTimeout(Ce)}})}finally{Oe()}})).apply(this,arguments)}function fe(V){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,l.Z)(function*(V){const M=Ke(V),L=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(L)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ke(V){if((0,O.ap)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(V);const M=new ArrayBuffer(V.length),L=new Uint8Array(M);for(let X=0;X<V.length;X++)L[X]=V.charCodeAt(X);return L}class Se extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(M)),super.onEvent(M)}initialized(){var M=this;return(0,l.Z)(function*(){yield M.initPromise})()}}function te(V){return ae.apply(this,arguments)}function ae(){return(ae=(0,l.Z)(function*(V){const M=yield Q()._get(le(V));return M&&(yield Q()._remove(le(V))),M})).apply(this,arguments)}function K(){const V=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const X=Math.floor(Math.random()*M.length);V.push(M.charAt(X))}return V.join("")}function Q(){return(0,O.az)(O.b)}function le(V){return(0,O.aA)("authEvent",V.config.apiKey,V.name)}function Le(V){if(!V?.includes("?"))return{};const[M,...L]=V.split("?");return(0,ne.zd)(L.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function $t(){var V;return(null===(V=self?.location)||void 0===V?void 0:V.protocol)||null}function br(V=(0,ne.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()&&"capacitor:"!==$t()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function $i(){try{const V=self.localStorage,M=O.aI();if(V)return V.setItem(M,"1"),V.removeItem(M),!function Bi(V=(0,ne.z$)()){return function Pr(){return(0,ne.w1)()&&11===document?.documentMode}()||function Fn(V=(0,ne.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,ne.hl)()}catch{return kr()&&(0,ne.hl)()}return!1}function kr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return(function Rt(){return"http:"===$t()||"https:"===$t()}()||(0,ne.ru)()||br())&&!function Ei(){return(0,ne.b$)()||(0,ne.UG)()}()&&$i()&&!kr()}function fi(){return br()&&typeof document<"u"}function Ye(){return(Ye=(0,l.Z)(function*(){return!!fi()&&new Promise(V=>{const M=setTimeout(()=>{V(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),V(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},wn=O.ax,pr="persistence";function bn(V){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(V){yield V._initializationPromise;const M=dt(),L=O.aA(pr,V.config.apiKey,V.name);M&&M.setItem(L,V._getPersistence())})).apply(this,arguments)}function dt(){var V;try{return(null===(V=function Qn(){return typeof window<"u"?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch{return null}}const ht=O.ax;class Ct{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(class en{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(M){var L=this;return(0,l.Z)(function*(){const X=M._key();let Oe=L.eventManagers.get(X);return Oe||(Oe=new Se(M),L.eventManagers.set(X,Oe),L.attachCallbackListeners(M,Oe)),Oe})()}_openPopup(M){(0,O.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,L,X,Oe){var tt=this;return(0,l.Z)(function*(){!function ve(V){var M,L,X,Oe,tt,ut,Ce,ke,Tt,hn;const xt=ce();(0,O.ax)("function"==typeof(null===(M=xt?.universalLinks)||void 0===M?void 0:M.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(L=xt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(tt=null===(Oe=null===(X=xt?.cordova)||void 0===X?void 0:X.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===tt?void 0:tt.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(ke=null===(Ce=null===(ut=xt?.cordova)||void 0===ut?void 0:ut.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===ke?void 0:ke.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(hn=null===(Tt=xt?.cordova)||void 0===Tt?void 0:Tt.InAppBrowser)||void 0===hn?void 0:hn.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const ut=yield tt._initialize(M);yield ut.initialized(),ut.resetRedirect(),(0,O.aD)(),yield tt._originValidation(M);const Ce=function Ee(V,M,L=null){return{type:M,eventId:L,urlResponse:null,sessionId:K(),postBody:null,tenantId:V.tenantId,error:(0,O.aw)(V,"no-auth-event")}}(M,X,Oe);yield function Ge(V,M){return Q()._set(le(V),M)}(M,Ce);const ke=yield function G(V,M,L){return j.apply(this,arguments)}(M,Ce,L),Tt=yield function Me(V){const{cordova:M}=ce();return new Promise(L=>{M.plugins.browsertab.isAvailable(X=>{let Oe=null;X?M.plugins.browsertab.openUrl(V):Oe=M.InAppBrowser.open(V,(0,O.av)()?"_blank":"_system","location=yes"),L(Oe)})})}(ke);return function be(V,M,L){return et.apply(this,arguments)}(M,ut,Tt)})()}_isIframeWebStorageSupported(M,L){throw new Error("Method not implemented.")}_originValidation(M){const L=M._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function Y(V){return Ue.apply(this,arguments)}(M)),this.originValidationPromises[L]}attachCallbackListeners(M,L){const{universalLinks:X,handleOpenURL:Oe,BuildInfo:tt}=ce(),ut=setTimeout((0,l.Z)(function*(){yield te(M),L.onEvent(qe())}),500),Ce=function(){var hn=(0,l.Z)(function*(xt){clearTimeout(ut);const fn=yield te(M);let Hi=null;fn&&xt?.url&&(Hi=function me(V,M){var L,X;const Oe=function Fe(V){const M=Le(V),L=M.link?decodeURIComponent(M.link):void 0,X=Le(L).link,Oe=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return Le(Oe).link||Oe||X||L||V}(M);if(Oe.includes("/__/auth/callback")){const tt=Le(Oe),ut=tt.firebaseError?function ie(V){try{return JSON.parse(V)}catch{return null}}(decodeURIComponent(tt.firebaseError)):null,Ce=null===(X=null===(L=ut?.code)||void 0===L?void 0:L.split("auth/"))||void 0===X?void 0:X[1],ke=Ce?(0,O.aw)(Ce):null;return ke?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:Oe,postBody:null}}return null}(fn,xt.url)),L.onEvent(Hi||qe())});return function(fn){return hn.apply(this,arguments)}}();typeof X<"u"&&"function"==typeof X.subscribe&&X.subscribe(null,Ce);const ke=Oe,Tt=`${tt.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var hn=(0,l.Z)(function*(xt){if(xt.toLowerCase().startsWith(Tt)&&Ce({url:xt}),"function"==typeof ke)try{ke(xt)}catch(fn){console.error(fn)}});return function(xt){return hn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(M){var L=this;return(0,l.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,L,X,Oe){var tt=this;return(0,l.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openPopup(M,L,X,Oe)})()}_openRedirect(M,L,X,Oe){var tt=this;return(0,l.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openRedirect(M,L,X,Oe)})()}_isIframeWebStorageSupported(M,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,L)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return fi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ht(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,l.Z)(function*(){if(M.underlyingResolver)return;const L=yield function ji(){return Ye.apply(this,arguments)}();M.underlyingResolver=L?M.cordovaResolver:M.browserResolver})()}}function Br(V){return V.unwrap()}function Dr(V){return Fr(V)}function Fr(V){const{_tokenResponse:M}=V instanceof ne.ZR?V.customData:V;if(!M)return null;if(!(V instanceof ne.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return O.P.credentialFromResult(V);const L=M.providerId;if(!L||L===O.o.PASSWORD)return null;let X;switch(L){case O.o.GOOGLE:X=O.Q;break;case O.o.FACEBOOK:X=O.N;break;case O.o.GITHUB:X=O.T;break;case O.o.TWITTER:X=O.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:tt,oauthTokenSecret:ut,pendingToken:Ce,nonce:ke}=M;return tt||ut||Oe||Ce?Ce?L.startsWith("saml.")?O.aL._create(L,Ce):O.J._fromParams({providerId:L,signInMethod:L,pendingToken:Ce,idToken:Oe,accessToken:tt}):new O.U(L).credential({idToken:Oe,accessToken:tt,rawNonce:ke}):null}return V instanceof ne.ZR?X.credentialFromError(V):X.credentialFromResult(V)}function Mt(V,M){return M.catch(L=>{throw L instanceof ne.ZR&&function bt(V,M){var L;const X=null===(L=M.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===M?.code)M.resolver=new ar(V,O.an(V,M));else if(X){const Oe=Fr(M),tt=M;Oe&&(tt.credential=Oe,tt.tenantId=X.tenantId||void 0,tt.email=X.email||void 0,tt.phoneNumber=X.phoneNumber||void 0)}}(V,L),L}).then(L=>{const Oe=L.user;return{operationType:L.operationType,credential:Dr(L),additionalUserInfo:O.al(L),user:xn.getOrCreate(Oe)}})}function ti(V,M){return zt.apply(this,arguments)}function zt(){return(zt=(0,l.Z)(function*(V,M){const L=yield M;return{verificationId:L.verificationId,confirm:X=>Mt(V,L.confirm(X))}})).apply(this,arguments)}class ar{constructor(M,L){this.resolver=L,this.auth=function Jn(V){return V.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return Mt(Br(this.auth),this.resolver.resolveSignIn(M))}}class xn{constructor(M){this._delegate=M,this.multiFactor=O.ao(M)}static getOrCreate(M){return xn.USER_MAP.has(M)||xn.USER_MAP.set(M,new xn(M)),xn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var L=this;return(0,l.Z)(function*(){return Mt(L.auth,O.Z(L._delegate,M))})()}linkWithPhoneNumber(M,L){var X=this;return(0,l.Z)(function*(){return ti(X.auth,O.l(X._delegate,M,L))})()}linkWithPopup(M){var L=this;return(0,l.Z)(function*(){return Mt(L.auth,O.d(L._delegate,M,Ct))})()}linkWithRedirect(M){var L=this;return(0,l.Z)(function*(){return yield bn(O.aE(L.auth)),O.g(L._delegate,M,Ct)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var L=this;return(0,l.Z)(function*(){return Mt(L.auth,O._(L._delegate,M))})()}reauthenticateWithPhoneNumber(M,L){return ti(this.auth,O.r(this._delegate,M,L))}reauthenticateWithPopup(M){return Mt(this.auth,O.e(this._delegate,M,Ct))}reauthenticateWithRedirect(M){var L=this;return(0,l.Z)(function*(){return yield bn(O.aE(L.auth)),O.h(L._delegate,M,Ct)})()}sendEmailVerification(M){return O.ab(this._delegate,M)}unlink(M){var L=this;return(0,l.Z)(function*(){return yield O.ak(L._delegate,M),L})()}updateEmail(M){return O.ag(this._delegate,M)}updatePassword(M){return O.ah(this._delegate,M)}updatePhoneNumber(M){return O.u(this._delegate,M)}updateProfile(M){return O.af(this._delegate,M)}verifyBeforeUpdateEmail(M,L){return O.ac(this._delegate,M,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xn.USER_MAP=new WeakMap;const Je=O.ax;let De=(()=>{class V{constructor(L,X){if(this.app=L,X.isInitialized())return this._delegate=X.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=L.options;Je(Oe,"invalid-api-key",{appName:L.name}),Je(Oe,"invalid-api-key",{appName:L.name});const tt=typeof window<"u"?Ct:void 0;this._delegate=X.initialize({options:{persistence:_t(Oe,L.name),popupRedirectResolver:tt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,X){O.G(this._delegate,L,X)}applyActionCode(L){return O.a2(this._delegate,L)}checkActionCode(L){return O.a3(this._delegate,L)}confirmPasswordReset(L,X){return O.a1(this._delegate,L,X)}createUserWithEmailAndPassword(L,X){var Oe=this;return(0,l.Z)(function*(){return Mt(Oe._delegate,O.a5(Oe._delegate,L,X))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return O.aa(this._delegate,L)}isSignInWithEmailLink(L){return O.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,l.Z)(function*(){Je(qn(),L._delegate,"operation-not-supported-in-this-environment");const X=yield O.j(L._delegate,Ct);return X?Mt(L._delegate,Promise.resolve(X)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function dn(V,M){(0,O.aE)(V)._logFramework(M)}(this._delegate,L)}onAuthStateChanged(L,X,Oe){const{next:tt,error:ut,complete:Ce}=Xe(L,X,Oe);return this._delegate.onAuthStateChanged(tt,ut,Ce)}onIdTokenChanged(L,X,Oe){const{next:tt,error:ut,complete:Ce}=Xe(L,X,Oe);return this._delegate.onIdTokenChanged(tt,ut,Ce)}sendSignInLinkToEmail(L,X){return O.a7(this._delegate,L,X)}sendPasswordResetEmail(L,X){return O.a0(this._delegate,L,X||void 0)}setPersistence(L){var X=this;return(0,l.Z)(function*(){let Oe;switch(function Cs(V,M){wn(Object.values(Zn).includes(M),V,"invalid-persistence-type"),(0,ne.b$)()?wn(M!==Zn.SESSION,V,"unsupported-persistence-type"):(0,ne.UG)()?wn(M===Zn.NONE,V,"unsupported-persistence-type"):kr()?wn(M===Zn.NONE||M===Zn.LOCAL&&(0,ne.hl)(),V,"unsupported-persistence-type"):wn(M===Zn.NONE||$i(),V,"unsupported-persistence-type")}(X._delegate,L),L){case Zn.SESSION:Oe=O.a;break;case Zn.LOCAL:Oe=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case Zn.NONE:Oe=O.L;break;default:return O.as("argument-error",{appName:X._delegate.name})}return X._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Mt(this._delegate,O.X(this._delegate))}signInWithCredential(L){return Mt(this._delegate,O.Y(this._delegate,L))}signInWithCustomToken(L){return Mt(this._delegate,O.$(this._delegate,L))}signInWithEmailAndPassword(L,X){return Mt(this._delegate,O.a6(this._delegate,L,X))}signInWithEmailLink(L,X){return Mt(this._delegate,O.a9(this._delegate,L,X))}signInWithPhoneNumber(L,X){return ti(this._delegate,O.s(this._delegate,L,X))}signInWithPopup(L){var X=this;return(0,l.Z)(function*(){return Je(qn(),X._delegate,"operation-not-supported-in-this-environment"),Mt(X._delegate,O.c(X._delegate,L,Ct))})()}signInWithRedirect(L){var X=this;return(0,l.Z)(function*(){return Je(qn(),X._delegate,"operation-not-supported-in-this-environment"),yield bn(X._delegate),O.f(X._delegate,L,Ct)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return O.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=Zn,V})();function Xe(V,M,L){let X=V;"function"!=typeof V&&({next:X,error:M,complete:L}=V);const Oe=X;return{next:ut=>Oe(ut&&xn.getOrCreate(ut)),error:M,complete:L}}function _t(V,M){const L=function yn(V,M){const L=dt();if(!L)return[];const X=O.aA(pr,V,M);switch(L.getItem(X)){case Zn.NONE:return[O.L];case Zn.LOCAL:return[O.i,O.a];case Zn.SESSION:return[O.a];default:return[]}}(V,M);if(typeof self<"u"&&!L.includes(O.i)&&L.push(O.i),typeof window<"u")for(const X of[O.b,O.a])L.includes(X)||L.push(X);return L.includes(O.L)||L.push(O.L),L}class Dt{constructor(){this.providerId="phone",this._delegate=new O.P(Br(B.Z.auth()))}static credential(M,L){return O.P.credential(M,L)}verifyPhoneNumber(M,L){return this._delegate.verifyPhoneNumber(M,L)}unwrap(){return this._delegate}}Dt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Dt.PROVIDER_ID=O.P.PROVIDER_ID;const Kt=O.ax;class H{constructor(M,L,X=B.Z.app()){var Oe;Kt(null===(Oe=X.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:X.name}),this._delegate=new O.R(M,L,X.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function z(V){V.INTERNAL.registerComponent(new he.wA("auth-compat",M=>{const L=M.getProvider("app-compat").getImmediate(),X=M.getProvider("auth");return new De(L,X)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:Dt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:H,TwitterAuthProvider:O.W,Auth:De,AuthCredential:O.H,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.3.0")}(B.Z)},8766:(ct,Te,k)=>{k.d(Te,{Lj:()=>Ne,X3:()=>Ke});var l=k(5861);let O,ne;const he=new WeakMap,ce=new WeakMap,ge=new WeakMap,G=new WeakMap,j=new WeakMap;let Me={get(ae,me,K){if(ae instanceof IDBTransaction){if("done"===me)return ce.get(ae);if("objectStoreNames"===me)return ae.objectStoreNames||ge.get(ae);if("store"===me)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return fe(ae[me])},set:(ae,me,K)=>(ae[me]=K,!0),has:(ae,me)=>ae instanceof IDBTransaction&&("done"===me||"store"===me)||me in ae};function ve(ae){return"function"==typeof ae?function et(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...me){return ae.apply(Qe(this),me),fe(he.get(this))}:function(...me){return fe(ae.apply(Qe(this),me))}:function(me,...K){const Q=ae.call(Qe(this),me,...K);return ge.set(Q,me.sort?me.sort():[me]),fe(Q)}}(ae):(ae instanceof IDBTransaction&&function Ue(ae){if(ce.has(ae))return;const me=new Promise((K,Q)=>{const le=()=>{ae.removeEventListener("complete",ie),ae.removeEventListener("error",Fe),ae.removeEventListener("abort",Fe)},ie=()=>{K(),le()},Fe=()=>{Q(ae.error||new DOMException("AbortError","AbortError")),le()};ae.addEventListener("complete",ie),ae.addEventListener("error",Fe),ae.addEventListener("abort",Fe)});ce.set(ae,me)}(ae),((ae,me)=>me.some(K=>ae instanceof K))(ae,function oe(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,Me):ae)}function fe(ae){if(ae instanceof IDBRequest)return function Y(ae){const me=new Promise((K,Q)=>{const le=()=>{ae.removeEventListener("success",ie),ae.removeEventListener("error",Fe)},ie=()=>{K(fe(ae.result)),le()},Fe=()=>{Q(ae.error),le()};ae.addEventListener("success",ie),ae.addEventListener("error",Fe)});return me.then(K=>{K instanceof IDBCursor&&he.set(K,ae)}).catch(()=>{}),j.set(me,ae),me}(ae);if(G.has(ae))return G.get(ae);const me=ve(ae);return me!==ae&&(G.set(ae,me),j.set(me,ae)),me}const Qe=ae=>j.get(ae);function Ke(ae,me,{blocked:K,upgrade:Q,blocking:le,terminated:ie}={}){const Fe=indexedDB.open(ae,me),Le=fe(Fe);return Q&&Fe.addEventListener("upgradeneeded",lt=>{Q(fe(Fe.result),lt.oldVersion,lt.newVersion,fe(Fe.transaction))}),K&&Fe.addEventListener("blocked",()=>K()),Le.then(lt=>{ie&&lt.addEventListener("close",()=>ie()),le&&lt.addEventListener("versionchange",()=>le())}).catch(()=>{}),Le}function Ne(ae,{blocked:me}={}){const K=indexedDB.deleteDatabase(ae);return me&&K.addEventListener("blocked",()=>me()),fe(K).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ge=new Map;function te(ae,me){if(!(ae instanceof IDBDatabase)||me in ae||"string"!=typeof me)return;if(Ge.get(me))return Ge.get(me);const K=me.replace(/FromIndex$/,""),Q=me!==K,le=Ee.includes(K);if(!(K in(Q?IDBIndex:IDBObjectStore).prototype)||!le&&!Se.includes(K))return;const ie=function(){var Fe=(0,l.Z)(function*(Le,...lt){const en=this.transaction(Le,le?"readwrite":"readonly");let Ft=en.store;return Q&&(Ft=Ft.index(lt.shift())),(yield Promise.all([Ft[K](...lt),le&&en.done]))[0]});return function(lt){return Fe.apply(this,arguments)}}();return Ge.set(me,ie),ie}!function be(ae){Me=ae(Me)}(ae=>({...ae,get:(me,K,Q)=>te(me,K)||ae.get(me,K,Q),has:(me,K)=>!!te(me,K)||ae.has(me,K)}))},5861:(ct,Te,k)=>{function l(O,ne,oe,pe,he,ce,ge){try{var G=O[ce](ge),j=G.value}catch(Y){return void oe(Y)}G.done?ne(j):Promise.resolve(j).then(pe,he)}function B(O){return function(){var ne=this,oe=arguments;return new Promise(function(pe,he){var ce=O.apply(ne,oe);function ge(j){l(ce,pe,he,ge,G,"next",j)}function G(j){l(ce,pe,he,ge,G,"throw",j)}ge(void 0)})}}k.d(Te,{Z:()=>B})}},ct=>{ct(ct.s=934)}]);